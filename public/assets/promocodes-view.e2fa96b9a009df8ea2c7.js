(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{HT8i:function(t,e,s){"use strict";s.r(e);var o=s("NDiG"),n=s("7cXU"),a=s("i2Ud"),i=s("nurM"),r=s("45Ux"),c=s("L2JU"),l=s("Q2AE"),_=s("55Sm"),v=s("jDKC"),d=s("rBTT"),p=s("8d0O"),u=s("GsIJ"),m=s("fpWb"),h=s("2JJK"),g=s("tCqp"),f=(s("GyY8"),s("QmAe")),w=s("3eXy");s("Mii2"),s("2CE6"),s("LZ6J"),s("Uh29");function b(t,e,s,o,n,a,i){try{var r=t[a](i),c=r.value}catch(t){return void s(t)}r.done?e(c):Promise.resolve(c).then(o,n)}function y(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function C(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?y(Object(s),!0).forEach((function(e){O(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function O(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var k="".concat(d.NAME,"/").concat(p.a),D={name:"promocodes",components:{VSvg:o.a,VLink:n.a,VButton:a.a,RadioSwitch:i.a,InfoRow:r.a},data:function(){var t=[{value:0,title:"Действующие"},{value:1,title:"Архив"}];return{selectedStatus:t[0].value,promocodeStatus:t,items:[]}},computed:C(C(C({},Object(c.d)([l.f])),Object(c.c)(k,[u.a])),{},{isTabletLg:function(){return this.$mq.tabletLg}}),methods:C(C(C({},Object(c.b)(_.b,[v.a])),Object(c.b)(k,[m.a])),{},{onStatusChanged:function(t){this.$router.replace({path:this.$route.path,query:{isArchive:t}})},setFilterValue:function(t){this.selectedStatus=Number(t)},onCopyCode:function(t,e){var s=Object(f.i)(e)?"Успешно скопировано":"Не удается скопировать";this[v.a]({name:h.modalName.general.NOTIFICATION,open:!0,state:{message:s}}),t.target.focus()},onToggleIsOpen:function(t){t.isOpen=!t.isOpen}}),watch:O({},u.a,(function(t){this.items=t||[]})),beforeRouteEnter:function(t,e,s){var o=t.fullPath,n=t.query.isArchive,a=void 0===n?0:n,i=w.$store.state[d.NAME][p.a].loadPath;o===i?s((function(t){return t.setFilterValue(a)})):(w.$progress.start(),w.$store.dispatch("".concat(k,"/").concat(m.a),a).then((function(){w.$store.dispatch("".concat(k,"/").concat(m.b),o),s((function(t){t.setFilterValue(a),w.$progress.finish()}))})).catch((function(t){return s((function(t){w.$progress.fail()}))})))},beforeRouteUpdate:function(t,e,s){var o,n=this;return(o=regeneratorRuntime.mark((function o(){var a,i,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=t.query.isArchive,i=void 0===a?0:a,r=e.query.isArchive,i!=r){o.next=4;break}return o.abrupt("return",s());case 4:return o.prev=4,n.$progress.start(),o.next=8,n[m.a](i);case 8:n.$progress.finish(),s(),o.next=16;break;case 12:o.prev=12,o.t0=o.catch(4),n.$progress.fail(),s(!1);case 16:case"end":return o.stop()}}),o,null,[[4,12]])})),function(){var t=this,e=arguments;return new Promise((function(s,n){var a=o.apply(t,e);function i(t){b(a,s,n,i,r,"next",t)}function r(t){b(a,s,n,i,r,"throw",t)}i(void 0)}))})()},created:function(){this.promocodeType=g.d,this.items=this[u.a]}},j=s("KHd+"),T=Object(j.a)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section promocodes-view"},[s("div",{staticClass:"container container--tablet-lg promocodes-view__header"},[s("h2",{staticClass:"promocodes-view__hl"},[t._v(t._s(t.$t("profile.routes."+t.$route.name)))]),t._v(" "),t.items&&t.items.length?s("radio-switch",{staticClass:"promocodes-view__switch",attrs:{value:t.selectedStatus,items:t.promocodeStatus,id:"promocode-switch","key-field":"value",name:"promocodeStatus"},on:{input:t.onStatusChanged}}):t.isTabletLg?t._e():s("v-link",{staticClass:"btn btn--outline",attrs:{tag:"button",to:{name:"Messages"}}},[t._v("\n            Запрос промокода\n        ")])],1),t._v(" "),t.items&&t.items.length?[s("div",{staticClass:"container container--tablet-lg"},[t.isTabletLg?t._e():s("table",{staticClass:"promocodes-view__table"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("transition-group",{staticClass:"promocodes-view__table-body",attrs:{tag:"tbody",name:"fade-in",appear:""}},t._l(t.items,(function(e){return s("tr",{key:e.code,staticClass:"promocodes-view__table-tr"},[s("td",{staticClass:"promocodes-view__table-td"},[t._v("\n                            "+t._s(e.code)+"  \n                            "),s("button",{staticClass:"promocodes-view__table-btn",on:{click:function(s){return t.onCopyCode(s,e.code)}}},[s("v-svg",{attrs:{name:"copy",width:"16",height:"16"}})],1)]),t._v(" "),s("td",{staticClass:"promocodes-view__table-td"},[!e.endDate&&e.startDate?[t._v("c")]:t._e(),t._v("\n                            "+t._s(e.startDate)+"\n                            "),e.startDate&&e.endDate||!e.startDate&&!e.endDate?[t._v("\n                                –\n                            ")]:t._e(),t._v(" "),!e.startDate&&e.endDate?[t._v("по")]:t._e(),t._v("\n                            "+t._s(e.endDate)+"\n                        ")],2),t._v(" "),s("td",{staticClass:"promocodes-view__table-td"},[e.discount?[t._v("\n                                "+t._s(e.discount)+"\n                            ")]:[t._v(" – ")]],2),t._v(" "),s("td",{staticClass:"promocodes-view__table-td"},[e.type!==t.promocodeType.PRODUCT?[t._v("Все товары")]:e.brands&&e.brands.items.length>0?s("div",{staticClass:"promocodes-view__category-panel"},[s("div",{staticClass:"promocodes-view__category-panel-header"},[s("button",{staticClass:"promocodes-view__category-panel-btn",on:{click:function(s){return t.onToggleIsOpen(e.brands)}}},[t._v("\n                                        Бренды:\n                                    ")]),t._v("\n                                     "),s("v-svg",{class:{"icon--rotate-deg180":e.brands.isOpen},attrs:{name:"arrow-down",width:"16",height:"16"}})],1),t._v(" "),e.brands.isOpen?s("ul",{staticClass:"promocodes-view__category-panel-list"},t._l(e.brands.items,(function(e){return s("li",{key:e.id},[t._v("\n                                        - "+t._s(e.name)+"\n                                    ")])})),0):t._e()]):e.categories&&e.categories.items.length>0?s("div",{staticClass:"promocodes-view__category-panel"},[s("div",{staticClass:"promocodes-view__category-panel-header"},[s("button",{staticClass:"promocodes-view__category-panel-btn",on:{click:function(s){return t.onToggleIsOpen(e.categories)}}},[t._v("\n                                        Категории:\n                                    ")]),t._v("\n                                     "),s("v-svg",{attrs:{name:"arrow-down",width:"16",height:"16"}})],1),t._v(" "),e.categories.isOpen?s("ul",{staticClass:"promocodes-view__category-panel-list"},t._l(e.categories.items,(function(e){return s("li",{key:e.id},[t._v("\n                                        - "+t._s(e.name)+"\n                                    ")])})),0):t._e()]):e.offers?t._l(Object.keys(e.offers),(function(o){return s("div",{key:o,staticClass:"promocodes-view__category-panel"},[s("div",{staticClass:"promocodes-view__category-panel-header"},[s("button",{staticClass:"promocodes-view__category-panel-btn",on:{click:function(s){return t.onToggleIsOpen(e.offers[o])}}},[t._v("\n                                        "+t._s(o)+":\n                                    ")]),t._v("\n                                     "),s("v-svg",{class:{"icon--rotate-deg180":e.offers[o].isOpen},attrs:{name:"arrow-down",width:"16",height:"16"}})],1),t._v(" "),e.offers[o].isOpen?s("ul",{staticClass:"promocodes-view__category-panel-list"},t._l(e.offers[o].items,(function(e){return s("li",{key:e.name},[t._v("\n                                        - "+t._s(e.name)+"\n                                    ")])})),0):t._e()])})):t._e()],2)])})),0)],1)]),t._v(" "),t.isTabletLg?s("ul",{staticClass:"promocodes-view__list"},t._l(t.promocodes,(function(e){return s("li",{key:e.id,staticClass:"container container--tablet-lg promocodes-view__list-item"},[s("info-row",{staticClass:"promocodes-view__list-item-row",attrs:{name:"Промокод"}},[t._v("\n                    "+t._s(e.code)+"  \n                    "),s("button",{staticClass:"promocodes-view__table-btn",on:{click:function(s){return t.onCopyCode(s,e.code)}}},[s("v-svg",{attrs:{name:"copy",width:"16",height:"16"}})],1)]),t._v(" "),s("info-row",{staticClass:"promocodes-view__list-item-row",attrs:{name:"Срок действия"}},[!e.endDate&&e.startDate?[t._v("c")]:t._e(),t._v("\n                    "+t._s(e.startDate)+"\n                    "),e.startDate&&e.endDate?[t._v("–")]:t._e(),t._v(" "),!e.startDate&&e.endDate?[t._v("по")]:t._e(),t._v("\n                    "+t._s(e.endDate)+"\n                ")],2),t._v(" "),s("info-row",{staticClass:"promocodes-view__list-item-row",attrs:{name:"Скидка",value:e.discount}}),t._v(" "),s("info-row",{staticClass:"promocodes-view__list-item-row",attrs:{name:"Категория товаров"}},[e.type!==t.promocodeType.PRODUCT?[t._v("Все товары")]:e.brands&&e.brands.items.length>0?s("div",{staticClass:"promocodes-view__category-panel"},[s("div",{staticClass:"promocodes-view__category-panel-header"},[s("button",{staticClass:"promocodes-view__category-panel-btn",on:{click:function(s){return t.onToggleIsOpen(e.brands)}}},[t._v("\n                                Бренды:\n                            ")]),t._v("\n                             "),s("v-svg",{class:{"icon--rotate-deg180":e.brands.isOpen},attrs:{name:"arrow-down",width:"16",height:"16"}})],1),t._v(" "),e.brands.isOpen?s("ul",{staticClass:"promocodes-view__category-panel-list"},t._l(e.brands.items,(function(e){return s("li",{key:e.id},[t._v("- "+t._s(e.name))])})),0):t._e()]):e.categories&&e.categories.items.length>0?s("div",{staticClass:"promocodes-view__category-panel"},[s("div",{staticClass:"promocodes-view__category-panel-header"},[s("button",{staticClass:"promocodes-view__category-panel-btn",on:{click:function(s){return t.onToggleIsOpen(e.categories)}}},[t._v("\n                                Категории:\n                            ")]),t._v("\n                             "),s("v-svg",{attrs:{name:"arrow-down",width:"16",height:"16"}})],1),t._v(" "),e.categories.isOpen?s("ul",{staticClass:"promocodes-view__category-panel-list"},t._l(e.categories.items,(function(e){return s("li",{key:e.id},[t._v("\n                                - "+t._s(e.name)+"\n                            ")])})),0):t._e()]):e.offers?t._l(Object.keys(e.offers),(function(o){return s("div",{key:o,staticClass:"promocodes-view__category-panel"},[s("div",{staticClass:"promocodes-view__category-panel-header"},[s("button",{staticClass:"promocodes-view__category-panel-btn",on:{click:function(s){return t.onToggleIsOpen(e.offers[o])}}},[t._v("\n                                "+t._s(o)+":\n                            ")]),t._v("\n                             "),s("v-svg",{class:{"icon--rotate-deg180":e.offers[o].isOpen},attrs:{name:"arrow-down",width:"16",height:"16"}})],1),t._v(" "),e.offers[o].isOpen?s("ul",{staticClass:"promocodes-view__category-panel-list"},t._l(e.offers[o].items,(function(e){return s("li",{key:e.name},[t._v("\n                                - "+t._s(e.name)+"\n                            ")])})),0):t._e()])})):t._e()],2)],1)})),0):t._e()]:s("div",{staticClass:"promocodes-view__attention"},[s("v-svg",{staticClass:"promocodes-view__attention-icon",attrs:{name:"info-middle",width:"24",height:"24"}}),t._v(" "),t._m(2),t._v(" "),s("v-link",{staticClass:"btn btn--outline promocodes-view__attention-btn",attrs:{tag:"button",to:{name:"Messages"}}},[t._v("Запрос промокода")])],1)],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("colgroup",[e("col",{attrs:{width:"25%"}}),this._v(" "),e("col",{attrs:{width:"25%"}}),this._v(" "),e("col",{attrs:{width:"15%"}}),this._v(" "),e("col",{attrs:{width:"35%"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"promocodes-view__table-head"},[e("tr",{staticClass:"promocodes-view__table-tr promocodes-view__table-tr--header"},[e("th",{staticClass:"promocodes-view__table-th"},[this._v("Промокод")]),this._v(" "),e("th",{staticClass:"promocodes-view__table-th"},[this._v("Срок действия")]),this._v(" "),e("th",{staticClass:"promocodes-view__table-th"},[this._v("Скидка")]),this._v(" "),e("th",{staticClass:"promocodes-view__table-th"},[this._v("Категория товаров")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"promocodes-view__attention-text"},[this._v("\n            У вас пока нет активных промо-кодов."),e("br"),this._v("\n            Воспользуйтесь функцией «Запросить промо-код» для привлечения аудитории к определенным продуктам или\n            категориям товаров.\n        ")])}],!1,null,null,null);e.default=T.exports},Uh29:function(t,e,s){}}]);