(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"0Bec":function(e,t,r){},fPNc:function(e,t,r){"use strict";r.r(t);var o=r("i2Ud"),i=r("+gqB"),a=r("pFko"),n=r("NDiG"),s=r("/Q9p"),c=r("6AGh"),l=r("obii"),u=r("zfPd"),d=r("L2JU"),v=r("3eXy"),f=r("Cv2f"),p=r("xm1V"),h=r("LCOE"),g=r("55Sm"),b=r("jDKC"),_=r("QmAe"),w=r("4mC1"),m=r("2JJK"),C=r("RiBg");r("+in6"),r("0Bec");function y(e,t,r,o,i,a,n){try{var s=e[a](n),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D={name:"favorites",components:{VButton:o.a,VPagination:i.a,VSelect:a.a,VSvg:n.a,CatalogProductCard:s.a,ShowMoreButton:c.a,Breadcrumbs:l.a,BreadcrumbItem:u.a},data:function(){var e=[{id:1,title:"Сначала подороже",field:C.a.PRICE,direction:m.sortDirections.DESC},{id:2,title:"Сначала подешевле",field:C.a.PRICE,direction:m.sortDirections.ASC}];return{sortValue:e[0],sortOptions:e,showMore:!1}},computed:P(P(P({},Object(d.d)(f.f,[f.b,f.c,f.d,f.e,f.a])),Object(d.c)(f.f,[p.c])),{},{isTablet:function(){return this.$mq.tablet},productName:function(){return Object(_.j)(this.favoritesAll.length,["продукт","продукта","продуктов"])}}),watch:{sortValue:function(e,t){e!==t&&this.$router.replace({path:this.$route.path,query:{orderField:e.field,orderDirection:e.direction}})}},methods:P(P(P({},Object(d.b)(f.f,[h.e,h.g,h.h,h.c])),Object(d.b)(g.b,[b.a])),{},{onShowMore:function(){this.showMore=!0,this.$router.replace({path:this.$route.path,query:P(P({},this.$route.query),{},{page:this[f.a]+1})})},onPageChanged:function(e){this.showMore=!1,this.$router.push({path:this.$route.path,query:P(P({},this.$route.query),{},{page:e})})},onToggleFavorite:function(e){var t=e.productId;this[h.h](t)},onPreview:function(e){this[b.a]({name:m.modalName.general.QUICK_VIEW,open:!0,state:{code:e}})},onAddToCart:function(e){var t=e.id,r=e.stock,o=e.type;this[b.a]({name:m.modalName.general.ADD_TO_CART,open:!0,state:{offerId:t,storeId:r.storeId,type:o}})},onClearFavorites:function(){this[h.c]()},setSortValue:function(e,t){this.sortValue=this.sortOptions.find((function(r){return r.field===e&&r.direction===t}))||this.sortOptions[0]}}),beforeRouteEnter:function(e,t,r){var o=e.fullPath,i=e.query,a=i.page,n=void 0===a?w.b:a,s=i.orderField,c=void 0===s?C.a.PRICE:s,l=i.orderDirection,u=void 0===l?m.sortDirections.DESC:l;v.$store.state[f.f].loadPath;v.$progress.start(),v.$store.dispatch("".concat(f.f,"/").concat(h.e),{page:n,orderField:c,orderDirection:u}).then((function(e){v.$store.dispatch("".concat(f.f,"/").concat(h.g),o),r((function(e){e.setSortValue(c,u),v.$progress.finish()}))})).catch((function(e){if(e&&!0===e.isCancel)return!0;r((function(e){v.$progress.fail()}))}))},beforeRouteUpdate:function(e,t,r){var o,i=this;return(o=regeneratorRuntime.mark((function t(){var o,a,n,s,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.query,a=o.page,n=void 0===a?w.b:a,s=o.orderField,c=void 0===s?C.a.PRICE:s,l=o.orderDirection,u=void 0===l?m.sortDirections.DESC:l,t.prev=1,i.$progress.start(),t.next=5,i[h.e]({page:n,orderField:c,orderDirection:u,showMore:i.showMore});case 5:i.setSortValue(c,u),i.$progress.finish(),r(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),i.$progress.fail(),r(!1);case 14:i.showMore=!1;case 15:case"end":return t.stop()}}),t,null,[[1,10]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=o.apply(e,t);function n(e){y(a,r,i,n,s,"next",e)}function s(e){y(a,r,i,n,s,"throw",e)}n(void 0)}))})()}},$=r("KHd+"),k=Object($.a)(D,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section favorites-view"},[r("div",{staticClass:"container"},[r("breadcrumbs",{staticClass:"favorites-view__breadcrumbs"},[r("breadcrumb-item",{key:"main",attrs:{to:"/"}},[e.isTablet?r("v-svg",{attrs:{name:"home",width:"10",height:"10"}}):r("span",[e._v("Главная")])],1),e._v(" "),r("breadcrumb-item",{key:"Favorites",attrs:{to:e.$route.fullPath}},[e._v("\n                Избранное\n            ")])],1)],1),e._v(" "),r("section",{staticClass:"section favorites-view__section"},[r("div",{staticClass:"container favorites-view__header"},[r("h1",{staticClass:"favorites-view__header-hl"},[e._v("\n                Избранное\n                "),e.favoritesAll.length>0?r("span",{staticClass:"favorites-view__header-counter"},[e._v("\n                    "+e._s(e.favoritesAll.length)+"\n                    "+e._s(e.productName)+"\n                ")]):e._e()]),e._v(" "),e.favorites.length>0?r("div",{staticClass:"favorites-view__filters"},[r("v-button",{staticClass:"btn--transparent favorites-view__filters-btn",on:{click:e.onClearFavorites}},[r("v-svg",{staticClass:"favorites-view__filters-icon",attrs:{name:"cross",width:"24",height:"24"}}),e._v("\n                    Очистить все\n                ")],1),e._v(" "),r("v-select",{staticClass:"favorites-view__filters-sort",attrs:{label:"title","track-by":"id",options:e.sortOptions,searchable:!1,"allow-empty":!1,"show-labels":!1},model:{value:e.sortValue,callback:function(t){e.sortValue=t},expression:"sortValue"}})],1):e._e()]),e._v(" "),e.favorites.length>0?r("div",{staticClass:"container favorites-view__section-container"},[r("ul",{staticClass:"favorites-view__list"},e._l(e.favorites,(function(t){return r("catalog-product-card",{key:t.id,staticClass:"favorites-view__list-item",attrs:{"offer-id":t.id,"product-id":t.productId,name:t.name,type:t.type,href:"/catalog/"+t.categoryCodes[t.categoryCodes.length-1]+"/"+t.code,image:t.image,price:t.price,"old-price":t.oldPrice,badges:t.badges,rating:t.rating,"show-buy-btn":t.stock.qty>0},on:{"add-item":function(r){return e.onAddToCart(t)},preview:function(r){return e.onPreview(t.code)},"toggle-favorite-item":function(r){return e.onToggleFavorite(t)}}})})),1)]):r("p",{staticClass:"container"},[e._v("Ничего не найдено")]),e._v(" "),e.pagesCount>1?r("div",{staticClass:"container favorites-view__main-controls"},[e.activePage<e.pagesCount?r("show-more-button",{attrs:{"btn-class":"btn--outline favorites-view__main-controls-btn","preloader-class":"favorites-view__preloader","show-preloader":e.showMore},on:{click:e.onShowMore}},[e._v("\n                Показать ещё\n            ")]):e._e(),e._v(" "),r("v-pagination",{attrs:{value:e.activePage,"page-count":e.pagesCount},on:{input:e.onPageChanged}})],1):e._e()])])}),[],!1,null,null,null);t.default=k.exports}}]);