(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{LUyO:function(e,t,r){"use strict";r.r(t);var a=r("NDiG"),s=r("7cXU"),i=r("i2Ud"),o=r("KQVR"),n=r("YNzt"),l=r("45Ux"),c=r("PZpB"),d=r("XJM6"),u=r("jYNS"),m=(r("gB8C"),r("kTJR"),{name:"order-masterclass-card",components:{VSvg:a.a,VLink:s.a,VPicture:u.a,Price:n.a},props:{name:{type:String,required:!0},href:{type:String},type:{type:String,required:!0},image:{type:[String,Object]},date:{type:[String,Date]},author:{type:String},price:{type:Object},oldPrice:{type:Object},count:{type:Number,default:1},isSmall:{type:Boolean,default:!1}},computed:{isTablet:function(){return this.$mq.tablet}}}),v=r("KHd+"),p=Object(v.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"order-masterclass-card",class:{"order-masterclass-card--small":e.isSmall}},[r("router-link",{staticClass:"order-masterclass-card__img",attrs:{to:e.href}},[e.image?r("v-picture",[e._t("default")],2):r("v-svg",{attrs:{id:"order-masterclass-card-empty",name:"logo",width:"48",height:"48"}})],1),e._v(" "),r("div",{staticClass:"order-masterclass-card__body"},[r("v-link",{staticClass:"order-masterclass-card__body-name",attrs:{to:e.href}},[e._v(e._s(e.name))]),e._v(" "),r("div",{staticClass:"order-masterclass-card__body-count"},[e._v("\n            "+e._s(e.count)+"\n        ")]),e._v(" "),r("div",{staticClass:"order-masterclass-card__body-prices"},[r("price",e._b({staticClass:"text-bold order-masterclass-card__body-price"},"price",e.price,!1)),e._v(" "),r("price",e._b({directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"oldPrice"}],staticClass:"text-grey text-strike order-masterclass-card__body-price order-masterclass-card__body-price--old"},"price",e.oldPrice,!1))],1),e._v(" "),r("div",{staticClass:"text-grey text-sm order-masterclass-card__body-info"},[r("div",[e._v(e._s(e.date))]),e._v(" "),r("div",[e._v(e._s(e.author))])])],1)],1)}),[],!1,null,null,null).exports,_=r("3eXy"),f=r("L2JU"),h=r("Q2AE"),g=r("rBTT"),w=r("JM0x"),b=r("5GyW"),y=r("4kxs"),k=r("8TZ/"),C=r("0CxO");function P(e,t,r,a){return t?e+function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:", ";return t?"".concat(e).concat(r):e}(t,r,a):e}var j,N=r("P1RU"),O=r("DpYB"),x=r("zVjp"),D=r("tCqp");r("PnIt"),r("SRJT");function S(e,t,r,a,s,i,o){try{var n=e[i](o),l=n.value}catch(e){return void r(e)}n.done?t(l):Promise.resolve(l).then(a,s)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(a,s){var i=e.apply(t,r);function o(e){S(i,a,s,o,n,"next",e)}function n(e){S(i,a,s,o,n,"throw",e)}o(void 0)}))}}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $="".concat(g.NAME,"/").concat(b.c);function M(e,t,r,a){e[w.a]([{name:e.$t("profile.routes.Orders"),to:{name:"Orders"}},{name:e.$t("profile.format.order",{id:a}),to:{name:t,params:r}}])}var U={name:"order-details",components:{VSvg:a.a,VLink:s.a,VButton:i.a,VInput:o.a,Price:n.a,InfoPanel:c.a,InfoRow:l.a,PackageProductCard:d.a,OrderMasterclassCard:p},data:function(){return{isDisabled:!1,masterClasses:[{id:1781,type:"masterclass",count:1,p:{id:1632,name:"Лакшери воркшоп про шампуни",ticketTypeName:"VIP",speakers:[{id:20,firstName:"Болеслав",middleName:"Андреевич",lastName:"Ковалёв",phone:"+78783722504",email:"evgenij.soloveva@semenova.ru",profession:"Штурман",avatar:{id:10725,sourceExt:"jpg"},instagram:"https://www.instagram.com/evgenij.soloveva",facebook:null,linkedin:null},{id:21,firstName:"Святослав",middleName:"Львович",lastName:"Зыков",phone:"+77658644460",email:"wsavina@rambler.ru",profession:"Штурман",avatar:{id:10726,sourceExt:"jpg"},instagram:"https://www.instagram.com/wsavina",facebook:null,linkedin:null},{id:24,firstName:"Даниил",middleName:"Максимович",lastName:"Юдин",phone:"+74889544611",email:"maria48@inbox.ru",profession:"Бестиарий (гладиатор)",avatar:{id:10729,sourceExt:"jpg"},instagram:"https://www.instagram.com/maria48",facebook:null,linkedin:null}],code:"laksheri_vorkshop_pro_shampuni_2",image:{id:10730,sourceExt:"jpg"},price:{value:14829,currency:"RUB"},oldPrice:{value:15057,currency:"RUB"},bonus:0,nearestDate:"2020-07-23",nearestTimeFrom:"12:00:00",nearestPlaceName:"Сухонский двор",qty:14,qtyOccupied:9,active:!0,url:"/masterclasses/laksheri_vorkshop_pro_shampuni_2",author:"Болеслав Ковалёв, Штурман",dateTime:"23 июля, 12:00",desktopImg:{webp:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10730/144/96/webp",orig:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10730/144/96/orig"},defaultImg:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10730/144/96/orig"}},{id:1821,type:"masterclass",count:1,p:{id:1672,name:"Бьюти лекция о стрижке",ticketTypeName:"Pro",speakers:[{id:20,firstName:"Болеслав",middleName:"Андреевич",lastName:"Ковалёв",phone:"+78783722504",email:"evgenij.soloveva@semenova.ru",profession:"Штурман",avatar:{id:10725,sourceExt:"jpg"},instagram:"https://www.instagram.com/evgenij.soloveva",facebook:null,linkedin:null},{id:21,firstName:"Святослав",middleName:"Львович",lastName:"Зыков",phone:"+77658644460",email:"wsavina@rambler.ru",profession:"Штурман",avatar:{id:10726,sourceExt:"jpg"},instagram:"https://www.instagram.com/wsavina",facebook:null,linkedin:null},{id:23,firstName:"Радислав",middleName:"Романович",lastName:"Миронов",phone:"+70115872600",email:"cpetrova@odincova.ru",profession:"Фотограф",avatar:{id:10728,sourceExt:"jpg"},instagram:"https://www.instagram.com/cpetrova",facebook:null,linkedin:null}],code:"byuti_lekciya_o_strizhke_1",image:{id:10752,sourceExt:"jpg"},price:{value:16894,currency:"RUB"},oldPrice:{value:17122,currency:"RUB"},bonus:0,nearestDate:"2020-07-20",nearestTimeFrom:"16:00:00",nearestPlaceName:"Подвал достоевского",qty:17,qtyOccupied:17,active:!0,url:"/masterclasses/byuti_lekciya_o_strizhke_1",author:"Болеслав Ковалёв, Штурман",dateTime:"20 июля, 16:00",desktopImg:{webp:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10752/144/96/webp",orig:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10752/144/96/orig"},defaultImg:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10752/144/96/orig"}},{id:1822,type:"masterclass",count:1,p:{id:1674,name:"Бьюти лекция о стрижке",ticketTypeName:"VIP+",speakers:[{id:20,firstName:"Болеслав",middleName:"Андреевич",lastName:"Ковалёв",phone:"+78783722504",email:"evgenij.soloveva@semenova.ru",profession:"Штурман",avatar:{id:10725,sourceExt:"jpg"},instagram:"https://www.instagram.com/evgenij.soloveva",facebook:null,linkedin:null},{id:21,firstName:"Святослав",middleName:"Львович",lastName:"Зыков",phone:"+77658644460",email:"wsavina@rambler.ru",profession:"Штурман",avatar:{id:10726,sourceExt:"jpg"},instagram:"https://www.instagram.com/wsavina",facebook:null,linkedin:null},{id:23,firstName:"Радислав",middleName:"Романович",lastName:"Миронов",phone:"+70115872600",email:"cpetrova@odincova.ru",profession:"Фотограф",avatar:{id:10728,sourceExt:"jpg"},instagram:"https://www.instagram.com/cpetrova",facebook:null,linkedin:null}],code:"byuti_lekciya_o_strizhke_1",image:{id:10752,sourceExt:"jpg"},price:{value:34016,currency:"RUB"},oldPrice:{value:34244,currency:"RUB"},bonus:0,nearestDate:"2020-07-20",nearestTimeFrom:"16:00:00",nearestPlaceName:"Подвал достоевского",qty:10,qtyOccupied:2,active:!0,url:"/masterclasses/byuti_lekciya_o_strizhke_1",author:"Болеслав Ковалёв, Штурман",dateTime:"20 июля, 16:00",desktopImg:{webp:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10752/144/96/webp",orig:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10752/144/96/orig"},defaultImg:"http://local.ibt-mas.greensight.ru:8080/files/compressed/10752/144/96/orig"}}]}},computed:E(E(E({},Object(f.d)([h.g])),Object(f.d)($,(j={},T(j,b.d,(function(e){return e[b.f][b.d]||{}})),T(j,b.b,(function(e){return e[b.f][b.b]||[]})),j))),{},{canPay:function(){var e=this[b.d],t=e.payment_status,r=void 0===t?3:t,a=e.payments,s=void 0===a?[]:a;return r===O.c.NOT_PAID&&0!==s.length},orderStatusClass:function(){return Object(N.c)(this.order.status,this.order.canceled)},deliveryMethod:function(){var e=this[b.b];if(1===e.length){var t=e[0].delivery_method;return this.formatDeliveryMethod(t)}},deliveryMethodId:function(){var e=this[b.b];if(1===e.length)return e[0].delivery_method},deliveryDate:function(){var e=this[b.b];if(1===e.length){var t=e[0].delivery_at;return this.formatDate(t)}},deliveryAddress:function(){var e=this[b.b];if(1===e.length)return this.formatAddress(e[0])},deliveryPoint:function(){var e=this[b.b];if(1===e.length)return e[0].point},orderStatus:function(){var e=this[b.d].status;return this.$t("orderStatus.".concat(e))},backUrl:function(){return{name:"Orders"}},isTablet:function(){return this.$mq.tablet}}),methods:E(E(E(E({},Object(f.b)(g.NAME,[w.a])),Object(f.b)($,[y.c,y.f,y.d,y.e])),Object(f.b)(k.c,[C.k])),{},{onContinuePayment:function(e){var t=this;return I(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a="".concat(document.location.origin,"/thank-you"),r.next=3,t[y.d]({id:e,backUrl:a});case 3:s=r.sent,document.location.href=s;case 5:case"end":return r.stop()}}),r)})))()},onRepeatOrder:function(e){var t=this;return I(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.isDisabled=!0,r.next=4,t[y.e](e);case 4:return r.next=6,t[C.k]();case 6:t.$router.push({path:"/cart"}),t.isDisabled=!1,r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),t.isDisabled=!1;case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},getDeliveryStatusClass:function(e){return Object(N.a)(e)},formatDeliveryStatus:function(e){return this.$t("deliveryStatus.".concat(e))},formatAddress:function(e){var t=e.delivery_address,r=e.point;return t&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.area,r=e.city,a=(e.flat,e.block),s=(e.floor,e.house),i=(e.porch,e.region),o=e.street,n="";return n=P(n,i),n=P(n,t),r!==i&&(n=P(n,r)),n=P(n,o),n=P(n,s,a||!1),n=P(n,a,!1)}(t)||r.address.address_string},formatDate:function(e){if("string"==typeof e)return new Date(e.split(" ")[0]).toLocaleDateString(this[h.g],x.b)},formatPackageCount:function(e){return this.$t("profile.format.packageCount",{n:e})},formatDeliveryMethod:function(e){return this.$t("deliveryMethod.".concat(e))}}),beforeRouteEnter:function(e,t,r){var a=e.fullPath,s=e.name,i=e.params,o=_.$store.state[g.NAME][b.c],n=o.loadPath,l=o.orderDetails;n===a?r((function(e){return M(e,s,i,l.order.number)})):(_.$progress.start(),_.$store.dispatch("".concat($,"/").concat(y.c),i.orderId).then((function(e){var t=e.number;_.$store.dispatch("".concat($,"/").concat(y.f),a),r((function(e){_.$progress.finish(),M(e,s,i,t)}))})).catch((function(e){return r((function(e){_.$progress.fail(),M(e,s,i)}))})))},beforeRouteUpdate:function(e,t,r){var a=this,s=e.name,i=e.params;this.$progress.start(),this[y.c](i.orderId).then((function(e){var t=e.number;a.$progress.finish(),M(a,s,i,t)})).catch((function(e){a.$progress.fail(),M(a,s,i)})),r()},beforeRouteLeave:function(e,t,r){this[w.a]([]),r()},beforeMount:function(){this.deliveryMethods=D.e}},q=Object(v.a)(U,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section order-details-view"},[r("div",{staticClass:"container container--tablet-lg"},[r("v-link",{staticClass:"order-details-view__back-link",attrs:{to:e.backUrl}},[r("v-svg",{attrs:{modifier:"icon--rotate-deg90",name:"arrow-small",width:"24",height:"24"}}),e._v(" Назад ко всем\n            заказам\n        ")],1),e._v(" "),r("h2",{staticClass:"order-details-view__hl"},[e._v(e._s(e.$t("profile.format.order",{id:e.order.number})))]),e._v(" "),r("div",{staticClass:"order-details-view__details"},[r("div",{staticClass:"order-details-view__details-info"},[r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Сумма"}},[r("price",e._b({staticClass:"text-medium"},"price",e.order.price,!1))],1),e._v(" "),e.order.delivery_price?r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Доставка"}},[r("price",e._b({staticClass:"text-medium"},"price",e.order.delivery_price,!1))],1):e._e(),e._v(" "),r("info-row",{staticClass:"order-details-view__details-row",class:e.orderStatusClass,attrs:{name:"Статус заказа",value:e.orderStatus}}),e._v(" "),e.deliveryMethod?r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Способ доставки",value:e.deliveryMethod}}):e._e(),e._v(" "),r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Дата заказа",value:e.formatDate(e.order.created_at)}}),e._v(" "),e.deliveryDate?r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Дата доставки",value:e.deliveryDate}}):e._e(),e._v(" "),e.deliveryPoint&&e.deliveryMethodId===e.deliveryMethods.PICKUP?[r("br"),e._v(" "),r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Наименование ПВЗ",value:e.deliveryPoint.name}}),e._v(" "),r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Телефон",value:e.deliveryPoint.phone}}),e._v(" "),e.deliveryPoint.schedule?r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Время работы"}},e._l(e.deliveryPoint.schedule,(function(t,a){return r("div",{key:t.id},[e._v("\n                            "+e._s(t.title)+"\n                            "+e._s(t.time)),a!==e.deliveryPoint.schedule.length-1?[e._v(", ")]:e._e()],2)})),0):e._e()]:e._e(),e._v(" "),e.deliveryAddress?r("info-row",{staticClass:"order-details-view__details-row",attrs:{name:"Адрес доставки",value:e.deliveryAddress}}):e._e()],2),e._v(" "),r("div",{staticClass:"order-details-view__details-controls"},[e.canPay?e._l(e.order.payments,(function(t){return r("v-button",{key:t.id,staticClass:"order-details-view__details-controls-btn",attrs:{disabled:e.isDisabled},on:{click:function(r){return e.onContinuePayment(e.order.id,t.id)}}},[e._v("\n                        Оплатить заказ\n                    ")])})):e._e(),e._v(" "),r("v-button",{staticClass:"btn--outline order-details-view__details-controls-btn",attrs:{disabled:e.isDisabled},on:{click:function(t){return t.stopPropagation(),e.onRepeatOrder(e.order.id)}}},[e._v("Повторить заказ")])],2)])],1),e._v(" "),e._l(e.deliveries,(function(t){return r("info-panel",{key:t.number,staticClass:"order-details-view__panel",attrs:{header:"Доставка №"+t.number}},[r("div",{staticClass:"container container--tablet-lg"},[e.deliveries.length>1?[r("info-row",{staticClass:"order-details-view__panel-row",attrs:{name:"Способ доставки",value:e.formatDeliveryMethod(t.delivery_method)}}),e._v(" "),r("info-row",{staticClass:"order-details-view__panel-row",attrs:{name:"Дата доставки",value:e.formatDate(t.delivery_at)}}),e._v(" "),r("info-row",{staticClass:"order-details-view__panel-row",class:e.getDeliveryStatusClass(t.status),attrs:{name:"Статус доставки",value:e.formatDeliveryStatus(t.status)}}),e._v(" "),t.point&&t.delivery_method===e.deliveryMethods.PICKUP?[r("br"),e._v(" "),r("info-row",{staticClass:"order-details-view__panel-row",attrs:{name:"Наименование ПВЗ",value:t.point.name}}),e._v(" "),r("info-row",{staticClass:"order-details-view__panel-row",attrs:{name:"Телефон",value:t.point.phone}}),e._v(" "),t.point.schedule?r("info-row",{staticClass:"order-details-view__panel-row",attrs:{name:"Время работы"}},e._l(t.point.schedule,(function(a,s){return r("div",{key:a.id},[e._v("\n                            "+e._s(a.title)+"\n                            "+e._s(a.time)),s!==t.point.schedule.length-1?[e._v(", ")]:e._e()],2)})),0):e._e()]:e._e(),e._v(" "),r("info-row",{staticClass:"order-details-view__panel-row",attrs:{name:"Адрес доставки",value:e.formatAddress(t)}})]:e._e(),e._v(" "),t.package_count?r("info-row",{staticClass:"order-details-view__panel-row",attrs:{name:"Количество коробок",value:e.formatPackageCount(t.package_count)}}):e._e(),e._v(" "),r("ul",{staticClass:"order-details-view__panel-list"},e._l(t.products,(function(e){return r("package-product-card",{key:e.id,staticClass:"order-details-view__panel-item",attrs:{name:e.name,image:e.image,price:e.price,"old-price":e.cost,count:e.qty}})})),1)],2)])})),e._v(" "),r("info-panel",{staticClass:"order-details-view__panel",attrs:{header:"Билеты"}},[r("div",{staticClass:"container container--tablet-lg"},[r("ul",{staticClass:"order-details-view__panel-list"},e._l(e.masterClasses,(function(t){var a=t.p,s=t.count;return r("order-masterclass-card",{key:a.id,staticClass:"order-details-view__panel-item",attrs:{type:"masterclass",name:a.name,image:a.image,price:a.price,"old-price":a.oldPrice,date:a.dateTime,author:a.author,count:s,href:a.url,"is-small":e.isTablet}},[r("source",{attrs:{"data-srcset":a.desktopImg.webp,type:"image/webp"}}),e._v(" "),r("source",{attrs:{"data-srcset":a.desktopImg.orig}}),e._v(" "),r("img",{staticClass:"blur-up lazyload v-picture__img",attrs:{"data-src":a.defaultImg,alt:""}})])})),1)])])],2)}),[],!1,null,null,null);t.default=q.exports},SRJT:function(e,t,r){},kTJR:function(e,t,r){}}]);