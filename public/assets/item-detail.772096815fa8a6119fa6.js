(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{LSCl:function(t,e,s){},S13u:function(t,e,s){"use strict";s.r(e);s("qBsp");var n={name:"spinner",props:["show"],serverCacheKey:function(t){return t.show}},i=s("KHd+"),r=Object(i.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",[e("svg",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"spinner",class:{show:this.show},attrs:{width:"44px",height:"44px",viewBox:"0 0 44 44"}},[e("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])}),[],!1,null,null,null).exports,o=s("i2Ud"),a=(s("LSCl"),{name:"comment",components:{VButton:o.a},props:["id"],data:function(){return{open:!0}},computed:{comment:function(){return this.$store.state.item_list.items[this.id]}},methods:{pluralize:function(t){return t+(1===t?" reply":" replies")}}}),c=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.comment?s("li",{staticClass:"comment"},[s("div",{staticClass:"by"},[s("router-link",{attrs:{to:"/user/"+t.comment.by}},[t._v(t._s(t.comment.by))]),t._v("\n        "+t._s(t._f("timeAgo")(t.comment.time))+" ago\n    ")],1),t._v(" "),s("div",{staticClass:"text",domProps:{innerHTML:t._s(t.comment.text)}}),t._v(" "),t.comment.kids&&t.comment.kids.length?s("v-button",{staticClass:"toggle",class:{open:t.open},on:{click:function(e){t.open=!t.open}}},[t._v("\n        "+t._s(t.open?"[-]":"[+] "+t.pluralize(t.comment.kids.length)+" collapsed")+"\n    ")]):t._e(),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"comment-children"},t._l(t.comment.kids,(function(t){return s("comment",{key:t,attrs:{id:t}})})),1)],1):t._e()}),[],!1,null,null,null).exports,m=s("qY4L"),u=s("BZIu");s("cNR2");var l={name:"item-detail",components:{Spinner:r,Comment:c},data:function(){return{loading:!0}},computed:{item:function(){return this.$store.state.item_list?this.$store.state.item_list.items[this.$route.params.id]:null}},beforeRouteEnter:function(t,e,s){!!u.$store._modulesNamespaceMap["".concat(m.a.name,"/")]||u.$store.registerModule(m.a.name,m.a,{preserveState:!!u.$store.state.item_list}),u.$progress.start(),u.$store.state.item_list.items[t.params.id]?s((function(t){return u.$progress.finish()})):u.$store.dispatch("".concat(m.a.name,"/FETCH_ITEMS"),{ids:[t.params.id]}).then((function(){s((function(t){return u.$progress.finish()}))}))},beforeRouteUpdate:function(t,e,s){var n=this;this.$store.state.item_list.items[t.params.id]?s():(this.$progress.start(),this.fetchItems().then((function(){n.$progress.finish(),s()})))},serverPrefetch:function(){return this.$store.registerModule(m.a.name,m.a),this.fetchItems()},beforeMount:function(){this.fetchComments()},title:function(){return this.item?this.item.title:null},watch:{item:"fetchComments"},methods:{fetchItems:function(){return this.$store.dispatch("".concat(m.a.name,"/FETCH_ITEMS"),{ids:[this.$route.params.id]})},fetchComments:function(){var t=this;this.item&&this.item.kids&&(this.loading=!0,function t(e,s){if(s&&s.kids)return e.dispatch("".concat(m.a.name,"/FETCH_ITEMS"),{ids:s.kids}).then((function(){return Promise.all(s.kids.map((function(s){return t(e,e.state.item_list.items[s])})))}))}(this.$store,this.item).then((function(){t.loading=!1})))}}},h=Object(i.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.item?s("section",{staticClass:"section item-view"},[s("div",{staticClass:"container"},[t.item?[s("div",{staticClass:"item-view-header"},[s("a",{attrs:{href:t.item.url,target:"_blank"}},[s("h1",[t._v(t._s(t.item.title))])]),t._v(" "),t.item.url?s("span",{staticClass:"host"},[t._v(" ("+t._s(t._f("host")(t.item.url))+") ")]):t._e(),t._v(" "),s("p",{staticClass:"meta"},[t._v("\n                    "+t._s(t.item.score)+" points | by "),s("router-link",{attrs:{to:"/user/"+t.item.by}},[t._v(t._s(t.item.by))]),t._v("\n                    "+t._s(t._f("timeAgo")(t.item.time))+" ago\n                ")],1)]),t._v(" "),s("div",{staticClass:"item-view-comments"},[s("p",{staticClass:"item-view-comments-header"},[t._v("\n                    "+t._s(t.item.kids?t.item.descendants+" comments":"No comments yet.")+"\n                    "),s("spinner",{attrs:{show:t.loading}})],1),t._v(" "),t.loading?t._e():s("ul",{staticClass:"comment-children"},t._l(t.item.kids,(function(t){return s("comment",{key:t,attrs:{id:t}})})),1)])]:t._e()],2)]):t._e()}),[],!1,null,null,null);e.default=h.exports},cNR2:function(t,e,s){},qBsp:function(t,e,s){},qY4L:function(t,e,s){"use strict";var n=s("Nlzp"),i={FETCH_LIST_DATA:function(t,e){var s=t.commit,i=t.dispatch,r=e.type;return s("SET_ACTIVE_TYPE",{type:r}),Object(n.a)(r).then((function(t){return s("SET_LIST",{type:r,ids:t})})).then((function(){return i("ENSURE_ACTIVE_ITEMS")}))},ENSURE_ACTIVE_ITEMS:function(t){return(0,t.dispatch)("FETCH_ITEMS",{ids:t.getters.activeIds})},FETCH_ITEMS:function(t,e){var s=t.commit,i=t.state,r=e.ids,o=Date.now();return(r=r.filter((function(t){var e=i.items[t];return!e||o-e.__lastUpdated>18e4}))).length?Object(n.b)(r).then((function(t){return s("SET_ITEMS",{items:t})})):Promise.resolve()},FETCH_USER:function(t,e){var s=t.state,i=t.dispatch,r=e.id;return s.users[r]?Promise.resolve(s.users[r]):Object(n.c)(r).then((function(t){return i("SET_USER",{id:r,user:t})}))},SET_USER:function(t,e){var s=t.commit,i=t.state,r=e.id;return i.users[r]?Promise.resolve(i.users[r]):Object(n.c)(r).then((function(t){return s("SET_USER",{id:r,user:t})}))}},r=s("Kw5r"),o={SET_ACTIVE_TYPE:function(t,e){var s=e.type;t.activeType=s},SET_LIST:function(t,e){var s=e.type,n=e.ids;t.lists[s]=n},SET_ITEMS:function(t,e){e.items.forEach((function(e){e&&r.default.set(t.items,e.id,e)}))},SET_USER:function(t,e){var s=e.id,n=e.user;r.default.set(t.users,s,n||!1)}},a={activeIds:function(t,e,s){var n=t.activeType,i=t.itemsPerPage,r=t.lists;if(!n)return[];var o=Number(s.route.params.page)||1,a=(o-1)*i,c=o*i;return r[n].slice(a,c)},activeItems:function(t,e){return e.activeIds.map((function(e){return t.items[e]})).filter((function(t){return t}))}};e.a={name:"item_list",namespaced:!0,state:{activeType:null,itemsPerPage:20,items:{},users:{},lists:{top:[],new:[],show:[],ask:[],job:[]}},actions:i,mutations:o,getters:a}}}]);