(window.webpackJsonp=window.webpackJsonp||[]).push([["create-list-view"],{462:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return o});var r=n(470),i=n(77),s=function(){return n.e("item-list").then(n.bind(null,534))},c=function(t){return t.charAt(0).toUpperCase()+t.slice(1)};function o(t){return{name:"".concat(t,"-stories-view"),serverPrefetch:function(){return this.$store.registerModule("item_list",r.a),this.$store.dispatch("item_list/FETCH_LIST_DATA",{type:t})},beforeRouteEnter:function(e,n,s){!!i.$store._modulesNamespaceMap["".concat(r.a.name,"/")]||i.$store.registerModule(r.a.name,r.a,{preserveState:!!i.$store.state.item_list}),i.$progress.start(),i.$store.dispatch("item_list/FETCH_LIST_DATA",{type:t}).then(function(){s(function(){return i.$progress.finish()})})},title:c(t),render:function(e){return e(s,{props:{type:t}})}}}},468:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return u}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var r=n(469),i=n(77),s=!!t.env.DEBUG_API,c=Object(r.a)({version:"/v0",config:{databaseURL:"https://hacker-news.firebaseio.com"}});function o(t){s&&i.$logger.info("fetching ".concat(t,"..."));var e=c.cachedItems;return e&&e.has(t)?(s&&i.$logger.info("cache hit for ".concat(t,".")),Promise.resolve(e.get(t))):new Promise(function(n,r){c.child(t).once("value",function(r){var c=r.val();c&&(c.__lastUpdated=Date.now()),e&&e.set(t,c),s&&i.$logger.info("fetched ".concat(t,".")),n(c)},r)})}function u(t){return c.cachedIds&&c.cachedIds[t]?Promise.resolve(c.cachedIds[t]):o("".concat(t,"stories"))}function a(t){return Promise.all(t.map(function(t){return function(t){return o("item/".concat(t))}(t)}))}function f(t){return o("user/".concat(t))}function d(t,e){var n=!0,r=c.child("".concat(t,"stories")),i=function(t){n?n=!1:e(t.val())};return r.on("value",i),function(){r.off("value",i)}}c.onServer&&function t(){a((c.cachedIds.top||[]).slice(0,30));setTimeout(t,9e5)}()}).call(this,n(120))},469:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(472),i=n.n(r);n(474);function s(t){var e=t.config,n=t.version;return i.a.initializeApp(e),i.a.database().ref(n)}},470:function(t,e,n){"use strict";var r=n(468),i={FETCH_LIST_DATA:function(t,e){var n=t.commit,i=t.dispatch,s=e.type;return n("SET_ACTIVE_TYPE",{type:s}),Object(r.a)(s).then(function(t){return n("SET_LIST",{type:s,ids:t})}).then(function(){return i("ENSURE_ACTIVE_ITEMS")})},ENSURE_ACTIVE_ITEMS:function(t){return(0,t.dispatch)("FETCH_ITEMS",{ids:t.getters.activeIds})},FETCH_ITEMS:function(t,e){var n=t.commit,i=t.state,s=e.ids,c=Date.now();return(s=s.filter(function(t){var e=i.items[t];return!e||c-e.__lastUpdated>18e4})).length?Object(r.b)(s).then(function(t){return n("SET_ITEMS",{items:t})}):Promise.resolve()},FETCH_USER:function(t,e){var n=t.state,i=t.dispatch,s=e.id;return n.users[s]?Promise.resolve(n.users[s]):Object(r.c)(s).then(function(t){return i("SET_USER",{id:s,user:t})})},SET_USER:function(t,e){var n=t.commit,i=t.state,s=e.id;return i.users[s]?Promise.resolve(i.users[s]):Object(r.c)(s).then(function(t){return n("SET_USER",{id:s,user:t})})}},s=n(12),c={SET_ACTIVE_TYPE:function(t,e){var n=e.type;t.activeType=n},SET_LIST:function(t,e){var n=e.type,r=e.ids;t.lists[n]=r},SET_ITEMS:function(t,e){e.items.forEach(function(e){e&&s.default.set(t.items,e.id,e)})},SET_USER:function(t,e){var n=e.id,r=e.user;s.default.set(t.users,n,r||!1)}},o={activeIds:function(t,e,n){var r=t.activeType,i=t.itemsPerPage,s=t.lists;if(!r)return[];var c=Number(n.route.params.page)||1,o=(c-1)*i,u=c*i;return s[r].slice(o,u)},activeItems:function(t,e){return e.activeIds.map(function(e){return t.items[e]}).filter(function(t){return t})}};e.a={name:"item_list",namespaced:!0,state:{activeType:null,itemsPerPage:20,items:{},users:{},lists:{top:[],new:[],show:[],ask:[],job:[]}},actions:i,mutations:c,getters:o}}}]);