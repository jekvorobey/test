(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"8C+g":function(e,t,n){"use strict";n.r(t);var r,a=n("NDiG"),i=n("i2Ud"),o=(n("o3vK"),n("+gqB")),c=(n("nuHk"),n("pFko")),s=n("0OV/"),u=n("/Q9p"),l=n("BZIu"),d=n("Nlzp"),f={SET_ITEMS:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{items:[],range:0},n=t.items,r=t.range;e.items=n||[],e.range=r||0},SET_PARAMS:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id,r=t.code;e.categoryId=n,e.categoryCode=r},SET_CATEGORIES:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.categories=t}};function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var v,g,b,_=(p(r={},"FETCH_CATEGORIES",(function(e){var t=e.commit;return Object(d.d)().then((function(e){return t("SET_CATEGORIES",e)})).catch((function(e){return l.$logger.error("FETCH_CATEGORIES error: ".concat(e)),[]}))})),p(r,"FETCH_ITEMS",(function(e,t){var n=e.commit;return Object(d.f)(t).then((function(e){n("SET_ITEMS",e),n("SET_PARAMS",t)})).catch((function(e){return l.$logger.error("FETCH_ITEMS error: ".concat(e)),[]}))})),p(r,"FETCH_CATALOG_DATA",(v=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,e.next=3,Promise.all([r("FETCH_CATEGORIES")]);case 3:return e.abrupt("return",r("FETCH_ITEMS",n));case 4:case"end":return e.stop()}}),e)})),g=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=v.apply(e,t);function i(e){m(a,n,r,i,o,"next",e)}function o(e){m(a,n,r,i,o,"throw",e)}i(void 0)}))},function(e,t){return g.apply(this,arguments)})),r);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y,C=/from_\d*_to_\d*/,w=/\d+/g,E=(h(b={},"activePage",(function(e,t,n){var r=n.route;return r.query.page?Number(r.query.page):1})),h(b,"pagesCount",(function(e){return Math.ceil(e.range/9)})),h(b,"activeCategory",(function(e,t,n){var r=n.route.path;return function e(t,n){if(t)for(var r=null,a=null,i=0;i<t.length;i++){if((r=t[i]).code===n)return r;if(a=e(r.items,n))return a}return null}(e.categories,r.split("/").slice(2,3)[0])})),h(b,"filterSegments",(function(e,t,n){for(var r={},a=n.route.path.split("/").slice(4),i=0;i<a.length;i++){var o=a[i],c=o.split("-")[0];if(C.test(o)){var s=o.match(w);r[c]=s.map((function(e){return+e}))}else r[c]||(r[c]={}),r[c][o]=o}return r})),h(b,"activeTags",(function(e,t){for(var n=[],r=e.filters.filter((function(e){return"range"!==e.type})),a=t.filterSegments,i=0;i<r.length;i++)for(var o=r[i],c=0;c<o.items.length;c++){var s=o.items[c];a[o.name]&&a[o.name][s.code]&&n.push(s)}return n})),b);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={name:"brand",namespaced:!0,state:(y={},T(y,"categoryId",null),T(y,"categoryCode",null),T(y,"categories",[]),T(y,"items",[]),T(y,"range",0),T(y,"filters",[{id:1,title:"Цена р.",name:"price",type:"range",max:1e3,min:0},{id:2,title:"Бренды",name:"brand",type:"check",items:[{id:1,name:"L’Oreal Paris",code:"brand-loreal"},{id:2,name:"Maybelline",code:"brand-maybelline"},{id:3,name:"Pupa",code:"brand-pupa"}]},{id:3,title:"Средства",name:"tool",type:"check",values:[],items:[{id:1,name:"Жидкая помада для губ",code:"tool-zhidkaya_pomada_dlya_gub"},{id:2,name:"Помада для губ",code:"tool-pomada_dlya_gub"},{id:3,name:"Гигиеническая помада для губ",code:"tool-gigienicheskaya_pomada_dlya_gub"}]},{id:4,title:"Эффекты",name:"effect",type:"radio",items:[{id:1,name:"Глянцевая",code:"effect-glyancevaya"},{id:2,name:"Матовая",code:"effect-matovaya"},{id:3,name:"Перламутровая",code:"effect-perlamutrovaya"}]}]),y),actions:_,mutations:f,getters:E},A=n("L2JU"),P=n("sEfC"),S=n.n(P);n("4eDr"),n("Fkbr");function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){x(i,r,a,o,c,"next",e)}function c(e){x(i,r,a,o,c,"throw",e)}o(void 0)}))}}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R,H,D="".concat(O.name,"/").concat("FETCH_CATALOG_DATA"),M=0,G={name:"brand",components:{VSvg:a.a,VButton:i.a,VSelect:c.a,VPagination:o.a,CatalogFilter:s.a,CatalogProductCard:u.a},data:function(){var e=["Сначала подороже"];return{sortValue:e[0],sortOptions:e}},computed:$({},Object(A.c)(O.name,["activeTags","activeCategory","activePage","pagesCount"]),{},Object(A.d)(O.name,["items"]),{},Object(A.d)("route",{brandCode:function(e){return e.params.brandCode},code:function(e){return e.params.code}})),methods:$({},Object(A.b)(O.name,["FETCH_ITEMS","FETCH_CATALOG_DATA"]),{onBeforeEnterItems:function(e){e.dataset.index=M,M+=1,e.style.opacity=0},itemAnimation:function(e,t){return new Promise((function(n,r){try{setTimeout((function(){requestAnimationFrame((function(){e.style.opacity=1,n()}))}),t)}catch(e){r(e)}}))},onEnterItems:(H=I(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=100*t.dataset.index,e.next=3,this.itemAnimation(t,r);case 3:n();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return H.apply(this,arguments)}),onAfterEnterItems:function(e){delete e.dataset.index,M=0},onLeaveItems:function(e,t){requestAnimationFrame((function(){e.style.opacity=0,t()}))},onClickDeleteTag:function(e){var t=this.$route.path.split("/").slice(4);if(t.includes(e)){var n=t.indexOf(e);-1!==n&&t.splice(n,1);var r=t.length>0?"/brand/".concat(this.brandCode,"/").concat(this.code,"/filters"):"/brand/".concat(this.brandCode,"/").concat(this.code);this.$router.replace({path:r.concat.apply(r,k(t.map((function(e){return"/".concat(e)}))))})}}}),beforeRouteEnter:(R=I(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.params.code,!!l.$store._modulesNamespaceMap["".concat(O.name,"/")]||l.$store.registerModule(O.name,O,{preserveState:!!l.$store.state.brand}),l.$store.state.brand.categoryCode!==a){e.next=8;break}r(),e.next=19;break;case 8:return e.prev=8,l.$progress.start(),e.next=12,l.$store.dispatch(D,{code:a});case 12:r((function(e){return l.$progress.finish()})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),l.$progress.fail(),l.$logger.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),function(e,t,n){return R.apply(this,arguments)}),beforeRouteUpdate:function(e,t,n){this.debounce_fetchCatalog(e,t),n()},beforeMount:function(){var e=this;this.debounce_fetchCatalog=S()(function(){var t=I(regeneratorRuntime.mark((function t(n,r){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.$store.state.brand.categoryCode,i=n.params.code,e.$progress.start(),a===i){t.next=9;break}return t.next=7,e.FETCH_CATALOG_DATA({code:i});case 7:t.next=11;break;case 9:return t.next=11,e.FETCH_ITEMS({code:i});case 11:e.$progress.finish(),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),l.$logger.error("debounce_fetchCatalog",t.t0),e.$progress.fail();case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}(),500)}},L=n("KHd+");n.d(t,"DISPATCH_FETCH_CATALOG_DATA",(function(){return D}));var V=Object(L.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section brand-view"},[e._m(0),e._v(" "),n("section",{staticClass:"section brand-view__header"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"brand-view__header-hl"},[e._v(e._s(e.activeCategory?e.activeCategory.name:"Каталог"))]),e._v(" "),n("p",{staticClass:"text-grey brand-view__header-text"},[e._v("489 товаров")])])]),e._v(" "),n("section",{staticClass:"section"},[n("div",{staticClass:"container brand-view__grid"},[n("div",{staticClass:"brand-view__side-panel"},[n("catalog-filter",{staticClass:"brand-view__side-panel-filters"})],1),e._v(" "),n("div",{staticClass:"brand-view__main"},[n("transition-group",{staticClass:"brand-view__main-tags",attrs:{tag:"ul",name:"tag-item"}},e._l(e.activeTags,(function(t,r){return n("li",{key:t.code,staticClass:"brand-view__main-tags-item",attrs:{"data-index":r}},[e._v("\n                        "+e._s(t.name)+" \n                        "),n("button",{staticClass:"brand-view__main-tags-delete-btn",on:{click:function(n){return e.onClickDeleteTag(t.code)}}},[n("v-svg",{attrs:{name:"cross-small",width:"24",height:"24"}})],1)])})),0),e._v(" "),n("v-select",{staticClass:"brand-view__main-sort",attrs:{options:e.sortOptions,searchable:!1,allowEmpty:!1},model:{value:e.sortValue,callback:function(t){e.sortValue=t},expression:"sortValue"}}),e._v(" "),n("transition-group",{staticClass:"brand-view__main-grid",attrs:{tag:"ul",name:"catalog-item"},on:{"before-enter":e.onBeforeEnterItems,enter:e.onEnterItems,"after-enter":e.onAfterEnterItems,leave:e.onLeaveItems}},e._l(e.items,(function(e){return n("li",{key:e.id,staticClass:"brand-view__main-grid-item"},[n("catalog-product-card",{staticClass:"brand-view__main-grid-card",attrs:{"product-id":e.id,name:e.name,href:e.href,image:e.image,price:e.price,"old-price":e.oldPrice,tags:e.tags,rating:e.rating}})],1)})),0),e._v(" "),e.pagesCount>1?n("div",{staticClass:"brand-view__main-controls"},[e.activePage<e.pagesCount?n("v-button",{staticClass:"btn--outline brand-view__main-controls-btn",attrs:{to:{path:e.$route.path,query:{page:e.activePage+1}}}},[e._v("\n                        Показать ещё\n                    ")]):e._e(),e._v(" "),n("v-pagination",{attrs:{value:e.activePage,"page-count":e.pagesCount},on:{input:function(t){return e.$router.push({path:e.$route.path,query:{page:t}})}}})],1):e._e()],1)])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("ul",{staticClass:"section brand-view__breadcrumbs"},[t("li",[this._v("Губная помада")])])])}],!1,null,null,null);t.default=V.exports},Fkbr:function(e,t,n){}}]);