(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"79GB":function(e,t,i){"use strict";var r=i("Kcka");i.n(r).a},EClc:function(e,t,i){},Kcka:function(e,t,i){},LeXT:function(e,t,i){},cZfP:function(e,t,i){},rOdi:function(e,t,i){"use strict";i.r(t);var r=i("i2Ud"),o=i("obii"),n=i("zfPd"),a=i("2JJK"),s=i("Q2AE"),c=(i("+in6"),i("NWTo"),i("EClc"),i("cZfP"),i("ze5i")),l=i("SFGR"),d=i("RJPN"),u=i("QmAe"),v=(i("LeXT"),{name:"card-design-tag",props:{preview:{type:String},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{innerColor:function(){var e=this.color;return"#".concat(e)},innerStyle:function(){return{backgroundImage:"url("+this.preview+")"}},buttonStyle:function(){var e=this.innerColor;return{borderColor:this.selected?e:null}},isLightColor:function(){var e=this.innerColor;return Object(u.j)(e)}}}),p=i("KHd+"),_=Object(p.a)(v,(function(){var e,t,i=this.$createElement,r=this._self._c||i;return r("button",this._g({staticClass:"card-design-tag",class:[(e={},e["card-design-tag--selected"]=this.selected,e),(t={},t["card-design-tag--light"]=this.isLightColor,t)],style:this.buttonStyle,attrs:{disabled:this.disabled}},this.$listeners),[r("div",{staticClass:"card-design-tag__square",style:this.innerStyle})])}),[],!1,null,null,null).exports,m=i("Y+Aq"),f=i("L2JU"),h=i("W6hq");function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var w,C={name:"recently-viewed-panel",components:{HistoryPanel:i("bEOZ").a},computed:y(y({},Object(f.d)([s.i])),{},{items:function(){var e=this[s.i]||[];return e.map((function(e){var t=e.code,i=e.categoryCodes,r=i&&i[i.length-1];return y(y({},e),{},{url:r&&Object(h.j)(r,t)})}))}}),methods:y({},Object(f.b)([m.b])),beforeMount:function(){this[m.b]()}},O=Object(p.a)(C,(function(){var e=this.$createElement,t=this._self._c||e;return this.items.length?t("section",{staticClass:"section product-view__section product-view__history"},[t("div",{staticClass:"container product-view__history-container"},[t("h2",{staticClass:"container container--tablet-lg product-view__section-hl product-view__history-hl"},[this._v("\n            "+this._s(this.$t("product.title.history"))+"\n        ")]),this._v(" "),t("history-panel",{staticClass:"product-view__history-panel",attrs:{items:this.items}})],1)]):this._e()}),[],!1,null,null,null).exports,T=i("YSwA"),k=i("/Q9p"),P=i("55Sm"),D=i("jDKC"),j=i("Cvmm"),S=i("MJWm"),E=i("Cv2f"),x=i("LCOE"),L=i("nfjx");function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function N(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach((function(t){$(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var A={spaceBetween:24,slidesPerView:4,grabCursor:!0,autoHeight:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"bullets"},breakpoints:(w={},$(w,a.breakpoints.tabletLg-1,{slidesPerView:2.5,spaceBetween:24,slidesOffsetBefore:24,slidesOffsetAfter:24}),$(w,a.breakpoints.tablet-1,{slidesPerView:2,spaceBetween:12,slidesOffsetBefore:0,slidesOffsetAfter:0}),w)},I={name:"featured-products",components:{VButton:r.a,VSlider:T.a,CatalogProductCard:k.a},mixins:[L.a],computed:N(N({},Object(f.d)(j.b,[j.a])),{},{isTabletLg:function(){return this.$mq.tabletLg},sliderOptions:function(){return A}}),methods:N(N(N(N({},Object(f.b)(P.b,[D.a])),Object(f.b)(j.b,[S.a])),Object(f.b)(E.f,[x.h])),{},{onToggleFavorite:function(e){var t=e.productId;this[x.h](t)},onAddToCart:function(e){var t=e.code,i=e.type,r=e.stock,o=e.id;e.variantGroups?this.onPreview(t):this[D.a]({name:a.modalName.general.ADD_TO_CART,open:!0,state:{offerId:o,storeId:r&&r.storeId,type:i}})},onPreview:function(e){this[D.a]({name:a.modalName.general.QUICK_VIEW,open:!0,state:{code:e}})}}),beforeMount:function(){this[S.a]()}},X=Object(p.a)(I,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"section product-view__section product-view__like"},[i("div",{staticClass:"container product-view__like-container"},[i("h2",{staticClass:"product-view__section-hl product-view__like-hl"},[e._v(e._s(e.$t("product.title.like")))]),e._v(" "),i("v-slider",{staticClass:"product-view__like-slider",attrs:{name:"also-like",options:e.sliderOptions}},e._l(e.featuredProducts,(function(t){return i("catalog-product-card",{key:t.id,staticClass:"swiper-slide not-found-view__featured-card",attrs:{"offer-id":t.id,"product-id":t.productId,type:t.type,name:t.name,href:"/catalog/"+t.categoryCodes[t.categoryCodes.length-1]+"/"+t.code,image:t.image,price:t.price,"old-price":t.oldPrice,badges:t.badges,rating:t.rating,"show-buy-btn":t.stock.qty>0},on:{"add-item":function(i){return e.onAddToCart(t)},preview:function(i){return e.onPreview(t.code)},"toggle-favorite-item":function(i){return e.onToggleFavorite(t)}}})})),1)],1)])}),[],!1,null,null,null).exports,F=i("2CS5"),q=i("YNzt"),B=i("X0tV"),M=i("3eXy"),R=i("dMOp"),K=i("a6oV"),G=i("3C5o"),U=i("pFko"),H=i("KQVR"),J=i("Sryx"),Q=i("o3vK"),W=i("vZFW"),Y=i("0CxO"),Z=i("8TZ/"),z=(i("tNi2"),i("b/zg")),ee=i.n(z),te=i("GyY8");function ie(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return re(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function oe(e,t,i,r,o,n,a){try{var s=e[n](a),c=s.value}catch(e){return void i(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function ae(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(i),!0).forEach((function(t){se(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function se(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ce=a.modalName.TICKET_EDIT;var le={name:ce,components:{CardDesignTag:_,VButton:r.a,VSpinner:R.a,GeneralModal:K.a,VCounter:G.a,VSelect:U.a,VInput:H.a,VInputMask:J.a,VCheck:Q.a,VDatepicker:W.a,Price:q.a},props:{designCode:{type:[String,Number],required:!0},nominalId:{type:[String,Number],required:!0},preview:{type:String,required:!0},price:{type:Number,required:!0}},data:function(){return{isLoading:!1,isShowDatePicker:!1,order:{qty:1,is_to_self:!1,is_anonymous:!1,terms_accepted:!0,comment:"",from_name:"",from_email:"",from_phone:"",to_name:"",to_email:"",to_phone:"",deliveryDate:this.isoDate(new Date),deliveryTime:{}},maskOptions:ae({},te.g),personFrom:{activeTab:"email"},personTo:{activeTab:"email"},deliveryTimeOptions:this.shortTimeList(),todayLabel:"Сейчас"}},computed:ae(ae({},Object(f.d)(P.b,{isOpen:function(e){return e[P.a][a.modalName.cart.CLEAR_CART]&&e[P.a][a.modalName.cart.CLEAR_CART].open},modalState:function(e){return e[P.a][ce]&&e[P.a][ce].state||{}}})),{},{orderSum:function(){return this.order.qty*this.price},isTablet:function(){return this.$mq.tablet},datepickerLocale:function(){return ee.a.ru},minDate:function(){return this.isoDate(new Date)},minOtherDate:function(){return this.isoDate(Object(u.a)(new Date,4))},dateOptions:function(){var e=[],t=new Date;e.push({label:this.todayLabel,value:this.isoDate(t)});for(var i=0;i<3;i++)t=Object(u.a)(t,1),e.push({label:this.uiDate(t),value:this.isoDate(t)});return e.push({label:this.order.deliveryDate>=this.minOtherDate?this.uiDate(new Date(this.order.deliveryDate)):"Другая дата",value:null}),e},valid:function(){return this.order.terms_accepted&&this.isCommentValid(this.order.comment)&&(this.order.is_to_self||this.isNameValid(this.order.to_name)&&this.isTabValid(this.personTo.activeTab,this.order["to_"+this.personTo.activeTab])||(this.order.is_to_self||this.isNameValid(this.order.to_name)&&this.isTabValid(this.personTo.activeTab,this.order["to_"+this.personTo.activeTab]))&&(this.order.is_anonymous||this.isNameValid(this.order.from_name)&&this.isTabValid(this.personFrom.activeTab,this.order["from_"+this.personFrom.activeTab])))},errorNameTo:function(){return this.order.is_to_self||!this.order.to_name||this.isNameValid(this.order.to_name)?null:"Имя не должно быть пустым"},errorNameFrom:function(){return this.order.is_anonymous||!this.order.from_name||this.isNameValid(this.order.from_name)?null:"Имя не должно быть пустым"},errorEmailTo:function(){return this.order.is_to_self||!this.order.to_email||this.isTabValid("email",this.order.to_email)?null:this.$t("validation.errors.email")},errorEmailFrom:function(){return this.order.is_anonymous||!this.order.from_email||this.isTabValid("email",this.order.from_email)?null:this.$t("validation.errors.email")},errorPhoneTo:function(){return this.order.is_to_self||!this.order.to_phone||this.isTabValid("phone",this.order.to_phone)?null:"Формат +7 XXX XXX-XX-XX"},errorPhoneFrom:function(){return this.order.is_anonymous||!this.order.from_phone||this.isTabValid("phone",this.order.from_phone)?null:"Формат +7 XXX XXX-XX-XX"}}),methods:ae(ae(ae({},Object(f.b)(P.b,[D.a])),Object(f.b)(Z.c,[Y.g])),{},{isCommentValid:function(e){return!0},isNameValid:function(e){return e.trim().length>0},isPhoneValid:function(e){return/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(e.trim())},isEmailValid:function(e){return/^(.+)@(.+){1,}\.(.+){2,}$/.test(e.trim())},isTabValid:function(e,t){switch(e){case"email":return this.isEmailValid(t);case"phone":return this.isPhoneValid(t)}return t.length>0},isoDate:function(e){return Object(u.d)(e).split(".").reverse().join("-")},uiDate:function(e){return["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"][e.getDay()]+"<br/>"+Object(u.d)(e).substr(0,5)},isDeliveryDateOptionSelected:function(e){return this.isShowDatePicker?null===e:null!==e?e===this.order.deliveryDate:this.order.deliveryDate>=this.minOtherDate},onDeliveryDateClick:function(e){this.isShowDatePicker=null===e,null!==e&&(this.order.deliveryDate=e)},onDeliveryDateSelected:function(e){this.order.deliveryDate=e[0],this.isShowDatePicker=!1},submitOrder:function(){var e,t=ae(ae({},this.order),{},{nominal_id:this.nominalId,design_id:this.designCode,delivery_at:this.order.deliveryDate+" "+(this.order.deliveryTime.code||"00:00:00")});delete t.deliveryDate,delete t.deliveryTime,(e=t,M.$http.post("/v1/certificate/buy",e)).then((function(e){e&&e.paymentUrl&&(document.location.href=e.paymentUrl)}))},onClose:function(){this[D.a]({name:ce,open:!1})},onClearCart:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cartType,t.isLoading=!0,e.next=4,t[Y.g](i);case 4:t.isLoading=!1,t.onClose();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(r,o){var n=e.apply(t,i);function a(e){oe(n,r,o,a,s,"next",e)}function s(e){oe(n,r,o,a,s,"throw",e)}a(void 0)}))})()},minutesNow:function(){var e=new Date;return"0".concat(e.getHours()).slice(-2)+":"+"0".concat(e.getMinutes()).slice(-2)},dateNow:function(){return this.isoDate(new Date)},fullTimeList:function(){var e=[];return ie(Array(24).keys()).forEach((function(t){var i=t>9?t:"0"+t;e.push({code:i+":00:00",label:i+":00"})})),e},shortTimeList:function(){var e=this.minutesNow();return this.fullTimeList().filter((function(t){return t.label>e}))}}),watch:{"order.deliveryTime":function(e,t){var i=t&&t.code||null,r=e&&e.code||null;if(i!==r){var o=this.order.deliveryDate===this.dateNow();null===r?(this.todayLabel="Сейчас",this.order.deliveryDate=this.dateNow(),this.deliveryTimeOptions=this.shortTimeList(),this.order.deliveryTime={}):o&&(this.todayLabel="Сегодня",this.deliveryTimeOptions=this.shortTimeList(),this.order.deliveryTime=this.deliveryTimeOptions.find((function(e){return e.code===r}))||{})}},"order.deliveryDate":function(e,t){if(e!==t)if(e===this.dateNow())this.deliveryTimeOptions=this.shortTimeList(),this.order.deliveryTime={},this.todayLabel="Сейчас";else{this.deliveryTimeOptions=this.fullTimeList();var i=this.order.deliveryTime.code||"10:00:00";this.order.deliveryTime=this.deliveryTimeOptions.find((function(e){return e.code===i}))||{},this.todayLabel="Сейчас"}}}},de=Object(p.a)(le,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("general-modal",{staticClass:"gift-card-modal",attrs:{type:"sm","is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[i("div",{staticClass:"gift-card-modal__body"},[i("h2",[e._v("Заполните данные для получения сертификата")]),e._v(" "),i("div",{staticClass:"gift-card-modal__top"},[i("div",{staticClass:"gift-card-modal__title"},[i("div",{staticClass:"gift-card-modal__preview"},[i("card-design-tag",{staticClass:"product-view__header-detail-options-item",attrs:{preview:e.preview,selected:!0}})],1),e._v(" "),i("div",{staticClass:"gift-card-modal__title-text"},[e._v("Электронный подарочный сертификат")])]),e._v(" "),i("div",{staticClass:"gift-card-modal__price"},[i("div",{staticClass:"gift-card-modal__amount"},[i("v-counter",{attrs:{min:"1",max:"200"},model:{value:e.order.qty,callback:function(t){e.$set(e.order,"qty",t)},expression:"order.qty"}})],1),e._v(" "),i("div",{staticClass:"gift-card-modal__price-value"},[i("price",{attrs:{value:e.orderSum,currency:"RUB"}})],1)])]),e._v(" "),i("div",{staticClass:"gift-card-modal__splitter"}),e._v(" "),i("div",{staticClass:"gift-card-modal__delivery"},[i("div",{staticClass:"gift-card-modal__delivery-date"},[i("div",{staticClass:"gift-card-modal__input-title"},[e._v("Когда доставить")]),e._v(" "),i("div",{staticClass:"gift-card-modal__delivery-date-input"},[i("div",{staticClass:"delivery-date-input"},e._l(e.dateOptions,(function(t){return i("div",{key:"do"+t.value,staticClass:"delivery-date-input__item",class:{"delivery-date-input__item--active":e.isDeliveryDateOptionSelected(t.value)},on:{click:function(i){return e.onDeliveryDateClick(t.value)}}},[i("div",{domProps:{innerHTML:e._s(t.label)}})])})),0)]),e._v(" "),e.isShowDatePicker?i("div",{staticClass:"gift-card-modal__datepicker"},[i("v-datepicker",{attrs:{value:[e.order.deliveryDate],inline:"","allow-input":!1,"min-date":e.minDate,locale:e.datepickerLocale},on:{input:e.onDeliveryDateSelected}})],1):e._e()]),e._v(" "),i("div",{staticClass:"gift-card-modal__delivery-time"},[i("div",{staticClass:"gift-card-modal__input-title"},[e._v("Время доставки")]),e._v(" "),i("div",{staticClass:"gift-card-modal__delivery-time-input"},[i("v-select",{attrs:{options:e.deliveryTimeOptions,searchable:!1,label:"label"},scopedSlots:e._u([{key:"error",fn:function(t){var r=t.error;return[i("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[r?i("div",{key:r},[e._v(e._s(r))]):e._e()])]}}]),model:{value:e.order.deliveryTime,callback:function(t){e.$set(e.order,"deliveryTime",t)},expression:"order.deliveryTime"}})],1)])]),e._v(" "),i("div",{staticClass:"gift-card-modal__textarea"},[i("v-input",{attrs:{tag:"textarea",placeholder:"Текст поздравления"},model:{value:e.order.comment,callback:function(t){e.$set(e.order,"comment",t)},expression:"order.comment"}},[e._v("\n                    Ваше поздравление получателю\n                ")])],1),e._v(" "),i("div",{staticClass:"gift-card-modal__person"},[i("div",{staticClass:"gift-card-modal__person-input"},[i("v-input",{attrs:{placeholder:"Имя",disabled:e.order.is_to_self,error:e.errorNameTo},scopedSlots:e._u([{key:"error",fn:function(t){var r=t.error;return[i("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[r?i("div",{key:r},[e._v(e._s(r))]):e._e()])]}}]),model:{value:e.order.to_name,callback:function(t){e.$set(e.order,"to_name",t)},expression:"order.to_name"}},[e._v("\n                        Кому\n                        ")])],1),e._v(" "),i("div",{staticClass:"gift-card-modal__person-input"},[i("div",{staticClass:"gift-card-modal__input-title"},[i("span",{staticClass:"gift-card-modal__contact-tab-title",class:{"gift-card-modal__contact-tab-title--active":"email"===e.personTo.activeTab},on:{click:function(t){e.personTo.activeTab="email"}}},[e._v("\n                            Email\n                        ")]),e._v("\n                        /\n                        "),i("span",{staticClass:"gift-card-modal__contact-tab-title",class:{"gift-card-modal__contact-tab-title--active":"phone"===e.personTo.activeTab},on:{click:function(t){e.personTo.activeTab="phone"}}},[e._v("\n                            Телефон\n                        ")])]),e._v(" "),"email"===e.personTo.activeTab?i("v-input",{attrs:{placeholder:"Email",disabled:e.order.is_to_self,error:e.errorEmailTo},scopedSlots:e._u([{key:"error",fn:function(t){var r=t.error;return[i("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[r?i("div",{key:r},[e._v(e._s(r))]):e._e()])]}}],null,!1,3034400235),model:{value:e.order.to_email,callback:function(t){e.$set(e.order,"to_email",t)},expression:"order.to_email"}}):e._e(),e._v(" "),"phone"===e.personTo.activeTab?i("v-input-mask",{attrs:{placeholder:"Телефон",options:e.maskOptions,disabled:e.order.is_to_self,error:e.errorPhoneTo},scopedSlots:e._u([{key:"error",fn:function(t){var r=t.error;return[i("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[r?i("div",{key:r},[e._v(e._s(r))]):e._e()])]}}],null,!1,3034400235),model:{value:e.order.to_phone,callback:function(t){e.$set(e.order,"to_phone",t)},expression:"order.to_phone"}}):e._e()],1)]),e._v(" "),i("v-check",{attrs:{id:"self",name:"self",value:"1"},model:{value:e.order.is_to_self,callback:function(t){e.$set(e.order,"is_to_self",t)},expression:"order.is_to_self"}},[e._v("Отправить себе")]),e._v(" "),i("div",{staticClass:"gift-card-modal__person gift-card-modal__person--to"},[i("div",{staticClass:"gift-card-modal__person-input"},[i("v-input",{attrs:{placeholder:"Имя",disabled:e.order.is_to_self||e.order.is_anonymous,error:e.errorNameFrom},scopedSlots:e._u([{key:"error",fn:function(t){var r=t.error;return[i("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[r?i("div",{key:r},[e._v(e._s(r))]):e._e()])]}}]),model:{value:e.order.from_name,callback:function(t){e.$set(e.order,"from_name",t)},expression:"order.from_name"}},[e._v("\n                        От кого\n                        ")])],1),e._v(" "),i("div",{staticClass:"gift-card-modal__person-input"},[i("div",{staticClass:"gift-card-modal__input-title"},[i("span",{staticClass:"gift-card-modal__contact-tab-title",class:{"gift-card-modal__contact-tab-title--active":"email"===e.personFrom.activeTab},on:{click:function(t){e.personFrom.activeTab="email"}}},[e._v("\n                            Email\n                        ")]),e._v("\n                        /\n                        "),i("span",{staticClass:"gift-card-modal__contact-tab-title",class:{"gift-card-modal__contact-tab-title--active":"phone"===e.personFrom.activeTab},on:{click:function(t){e.personFrom.activeTab="phone"}}},[e._v("\n                            Телефон\n                        ")])]),e._v(" "),"email"===e.personFrom.activeTab?i("v-input",{attrs:{placeholder:"Email",disabled:e.order.is_to_self||e.order.is_anonymous,error:e.errorEmailFrom},scopedSlots:e._u([{key:"error",fn:function(t){var r=t.error;return[i("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[r?i("div",{key:r},[e._v(e._s(r))]):e._e()])]}}],null,!1,3034400235),model:{value:e.order.from_email,callback:function(t){e.$set(e.order,"from_email",t)},expression:"order.from_email"}}):e._e(),e._v(" "),"phone"===e.personFrom.activeTab?i("v-input-mask",{attrs:{placeholder:"Телефон",options:e.maskOptions,disabled:e.order.is_to_self||e.order.is_anonymous,error:e.errorPhoneFrom},scopedSlots:e._u([{key:"error",fn:function(t){var r=t.error;return[i("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[r?i("div",{key:r},[e._v(e._s(r))]):e._e()])]}}],null,!1,3034400235),model:{value:e.order.from_phone,callback:function(t){e.$set(e.order,"from_phone",t)},expression:"order.from_phone"}}):e._e()],1)]),e._v(" "),i("v-check",{attrs:{id:"anonymous",name:"anonymous",value:"1",disabled:e.order.is_to_self},model:{value:e.order.is_anonymous,callback:function(t){e.$set(e.order,"is_anonymous",t)},expression:"order.is_anonymous"}},[e._v("Отправить анонимно")]),e._v(" "),i("v-check",{attrs:{id:"termsAccepted",name:"termsAccepted",value:"1"},model:{value:e.order.terms_accepted,callback:function(t){e.$set(e.order,"terms_accepted",t)},expression:"order.terms_accepted"}},[e._v("Я согласен с "),i("a",{attrs:{href:"/agreements/public-offer/",target:"_blank"}},[e._v("условиями оферты")]),e._v(" и "),i("a",{attrs:{href:"/agreements/personal-policy/",target:"_blank"}},[e._v("политикой конфиденциальности")])])],1),e._v(" "),i("div",{staticClass:"gift-card-modal__submit"},[i("v-button",{staticClass:"gift-card-modal__submit-btn",attrs:{disabled:e.isLoading||!e.valid},on:{click:function(t){return e.submitOrder()}}},[e._v("\n                Перейти к оплате\n            ")]),e._v(" "),i("v-spinner",{attrs:{show:e.isLoading,width:"30",height:"30"}})],1)]},proxy:!0}])})}),[],!1,null,null,null).exports,ue=i("fhPv"),ve=i("YPqg");function pe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function _e(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(i),!0).forEach((function(t){me(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var fe={name:"GiftCard",components:{VButton:r.a,Breadcrumbs:o.a,BreadcrumbItem:n.a,VSticky:c.a,ProductDetailPanel:l.a,ProductOptionPanel:d.a,CardDesignTag:_,ProductOptionTag:F.a,Price:q.a,GiftCardModal:de,ReviewsPanel:B.a,RecentlyViewedProducts:O,FeaturedProducts:X},data:function(){return{rules:"",description:"",nominals:[],nominal:{price:0},design:{preview:""},card:{title:"Электронный подарочный сертификат",vendorCode:"",nominals:[],designs:[]},socialSharing:{},isLoading:!1,reviewData:{type:"certificate",code:"1c",canAdd:!0},buyPersonAmount:0}},computed:_e(_e(_e(_e({},Object(f.d)([s.j])),Object(f.d)(P.b,{isModalOpen:function(e){return e[P.a][a.modalName.TICKET_EDIT]&&e[P.a][a.modalName.TICKET_EDIT].open}})),Object(f.d)(ve.c,[ve.b])),{},{productType:function(){return ue.a.CERTIFICATE},isTablet:function(){return this.$mq.tablet},isTabletLg:function(){return this.$mq.tabletLg},buyPersonText:function(){if(0===this.buyPersonAmount)return"Пока никто не купил товар";var e=this.declOfNum(this.buyPersonAmount,["человек","человека","человек"]),t=this.buyPersonAmount>1?"купили":"купил";return this.buyPersonAmount+" "+e+" уже "+t+" этот товар"},cardTitle:function(){var e=this.nominal.price?", "+Object(u.m)(this.nominal.price)+" ₽":"";return this.card.title+e},reviewsCount:function(){return this.$refs.reviewPanel?this.$refs.reviewPanel.range:0},rating:function(){return this.$refs.reviewPanel?this.$refs.reviewPanel.rating:0}}),methods:_e(_e({},Object(f.b)(P.b,[D.a])),{},{onNominalSelect:function(e){this.nominal=e,-1===e.designs.map((function(e){return e.id})).indexOf(this.design.id)&&this.onDesignSelect(e.designs[0]||{preview:""})},onDesignSelect:function(e){this.design=e},openShowGiftCardModal:function(){this[ve.b]?this[D.a]({name:a.modalName.TICKET_EDIT,open:!0,state:{}}):this[D.a]({name:a.modalName.general.AUTH,open:!0,state:{activeTab:a.authMode.LOGIN}})},onScrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;window.scrollTo({top:e.offsetTop+t,behavior:"smooth"})},declOfNum:function(e,t){return t[e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2]}}),beforeMount:function(){var e=this;M.$http.get("/v1/certificate/dictionary").then((function(t){e.rules=t.content.rules,e.description=t.content.description,e.nominals=t.nominals,e.nominal=t.nominals[0],e.design=t.nominals[0].designs[0]||{preview:""},e.buyPersonAmount=t.buyPersonAmount||0}))}},he=(i("79GB"),Object(p.a)(fe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"section product-view",class:{"product-view--scroll":e.scroll}},[i("breadcrumbs",{staticClass:"container university-view__breadcrumbs"},[i("breadcrumb-item",{key:"main",attrs:{to:"/"}},[e.isTablet?i("v-svg",{attrs:{name:"home",width:"10",height:"10"}}):i("span",[e._v("Главная")])],1),e._v(" "),i("breadcrumb-item",{key:"no-main",attrs:{to:"/giftcard"}},[e._v("Подарочные сертификаты")])],1),e._v(" "),i("section",{staticClass:"section"},[i("div",{staticClass:"container product-view__header"},[i("v-sticky",{staticClass:"product-view__header-sticky",scopedSlots:e._u([{key:"sticky",fn:function(){return[i("div",{staticClass:"product-view__header-container"},[i("div",{staticClass:"product-view__header-gallery"},[i("div",{staticClass:"product-view__header-gallery-item product-view__header-gallery-item--empty"},[i("div",{staticClass:"gift-card-view"},[e.design.preview?i("div",{staticClass:"gift-card-view__card"},[i("div",{staticClass:"gift-card-view__image"},[i("img",{attrs:{src:e.design.preview,alt:"certificate"}})]),e._v(" "),i("div",{staticClass:"gift-card-view__price"},[i("price",{attrs:{value:e.nominal.price,currency:"RUB"}})],1)]):e._e()])])])])]},proxy:!0}])}),e._v(" "),i("v-sticky",{staticClass:"product-view__header-detail",scopedSlots:e._u([{key:"sticky",fn:function(){return[i("product-detail-panel",{staticClass:"product-view__header-detail-info gift-card-header-detail",attrs:{title:e.cardTitle,"reviews-count":e.reviewsCount,"vendor-code":e.card.vendorCode,rating:e.rating},on:{"rating-click":function(t){return e.onScrollTo(e.$refs.reviews,e.isTabletLg?e.isTablet?-24:-48:64)}}}),e._v(" "),i("product-option-panel",{staticClass:"product-view__header-detail-section product-view__header-detail-options",attrs:{header:"Выберите номинал карты"}},[i("div",{staticClass:"product-view__header-detail-options-tags"},e._l(e.nominals,(function(t){return i("product-option-tag",{key:"pot"+t.id,staticClass:"product-view__header-detail-options-item",attrs:{selected:e.nominal.id===t.id},on:{click:function(i){return e.onNominalSelect(t)}}},[i("price",{attrs:{value:t.price,currency:"RUB"}})],1)})),1)]),e._v(" "),i("product-option-panel",{staticClass:"product-view__header-detail-section product-view__header-detail-options",attrs:{header:"Выберите дизайн"}},[i("div",{staticClass:"product-view__header-detail-options-colors"},e._l(e.nominal.designs,(function(t){return i("card-design-tag",{key:"cdt-"+t.id,staticClass:"product-view__header-detail-options-item",attrs:{code:t.id,preview:t.preview,selected:e.design.id===t.id},on:{click:function(i){return e.onDesignSelect(t)}}})})),1)]),e._v(" "),i("div",{staticClass:"product-cart-panel"},[i("div",{staticClass:"product-cart-panel__controls product-cart-panel__controls--card"},[i("v-button",{staticClass:"product-cart-panel__btn product-cart-panel__controls-btn",attrs:{disabled:e.isLoading},on:{click:function(t){return e.openShowGiftCardModal()}}},[e._v("\n                                Купить\n                            ")]),e._v(" "),i("div",{staticClass:"product-cart-panel__info-prices"},[i("price",{staticClass:"text-bold product-cart-panel__info-current",attrs:{value:e.nominal.price,currency:"RUB"}})],1)],1)]),e._v(" "),i("div",{staticClass:"product-view__header-detail-section"},[i("p",{domProps:{innerHTML:e._s(e.rules)}})])]},proxy:!0}])})],1)]),e._v(" "),i("section",{staticClass:"section product-view__section"},[i("div",{staticClass:"container product-view__socials"},[i("div",{staticClass:"product-view__socials-inner"},[i("div",{staticClass:"product-view__socials-statistics"},[i("div",[i("v-svg",{attrs:{name:"cart-empty",width:"24",height:"24"}})],1),e._v(" "),i("div",[i("div",[e._v(e._s(e.buyPersonText))]),e._v(" "),i("div",{staticClass:"text-grey"},[e._v("за последние 2 месяца")])])]),e._v(" "),i("div",{staticClass:"product-view__socials-share"},[i("span",{staticClass:"text-bold"},[e._v("Поделиться")]),e._v(" \n\n                    "),i("social-sharing",e._b({inlineTemplate:{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{style:{display:"flex"}},[t("network",{staticClass:"network",attrs:{network:"vk"}},[t("v-svg",{attrs:{name:"vkontakte-bw",width:"24",height:"24"}})],1),this._v(" "),t("network",{staticClass:"network",attrs:{network:"facebook"}},[t("v-svg",{attrs:{name:"facebook-bw",width:"24",height:"24"}})],1)],1)},staticRenderFns:[]}},"social-sharing",e.socialSharing,!1))],1)])])]),e._v(" "),e.description?i("section",{staticClass:"section product-view__section product-view__info"},[i("div",{staticClass:"container product-view__info-container"},[i("div",{staticClass:"hook",attrs:{id:"description"}}),e._v(" "),e.description?i("div",{staticClass:"product-view__info-part product-view__info-part--50"},[i("div",{staticClass:"product-view__info-header"},[i("h2",{staticClass:"product-view__section-hl"},[e._v(e._s(e.$t("product.title.description")))]),e._v(" "),i("p",{staticClass:"product-view__info-text",domProps:{innerHTML:e._s(e.description)}})])]):e._e()])]):e._e(),e._v(" "),i("section",{ref:"reviews",staticClass:"section product-view__section product-view__reviews",attrs:{id:"reviews"}},[i("div",{staticClass:"container"},[i("reviews-panel",e._b({ref:"reviewPanel",staticClass:"product-view__reviews-panel"},"reviews-panel",e.reviewData,!1))],1)]),e._v(" "),i("featured-products"),e._v(" "),i("recently-viewed-products"),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.isModalOpen?i("gift-card-modal",{attrs:{"design-code":e.design.id,"nominal-id":e.nominal.id,preview:e.design.preview,price:e.nominal.price}}):e._e()],1)],1)}),[],!1,null,"006ee995",null));t.default=he.exports},tNi2:function(e,t,i){}}]);