(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"+jTb":function(e,t,n){},"9KNI":function(e,t,n){},DHLn:function(e,t,n){"use strict";n.r(t);var a,o=n("NDiG"),s=n("7cXU"),r=n("KQVR"),c=n("i2Ud"),i=n("ze5i"),u=n("o3vK"),l=n("dMOp"),d=n("4BeY"),p=n.n(d),h=n("IaFt"),m=n.n(h),f=new p.a({id:"icon-check-small",use:"icon-check-small-usage",viewBox:"0 0 10 8",content:'<symbol viewBox="0 0 10 8" fill="none" xmlns="http://www.w3.org/2000/svg" id="icon-check-small">\n    <path d="M1 4.5L4 7L9 1" stroke="#141116" />\n</symbol>'}),v=(m.a.add(f),n("9KNI"),{name:"checkout-option-card",components:{VSvg:o.a,VLink:s.a},props:{readonly:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},btnText:{type:String,default:"Изменить"}},methods:{onCardClick:function(){this.$emit("cardClick")},onBtnClick:function(){this.$emit("btnClick")}}}),_=n("KHd+"),y=Object(_.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"checkout-option-card",class:{"checkout-option-card--selected":e.selected},on:{click:e.onCardClick}},[n("div",{staticClass:"checkout-option-card__left"},[e._t("default")],2),e._v(" "),n("div",{staticClass:"checkout-option-card__right"},[n("v-svg",{attrs:{name:"check-small",width:"24",height:"24"}}),e._v(" "),e.readonly?e._e():n("v-link",{staticClass:"checkout-option-card__right-link",attrs:{tag:"button"},on:{click:function(t){return t.stopPropagation(),e.onBtnClick(t)}}},[e._v("\n            "+e._s(e.btnText)+"\n        ")])],1)])}),[],!1,null,null,null).exports,k=n("jYNS"),b=n("OvCi"),g=(n("OmJt"),{name:"checkout-product-card",components:{VSvg:o.a,VLink:s.a,VPicture:k.a},props:{name:{type:String,required:!0},image:{type:[String,Object]}},methods:{generateSourcePath:function(e,t,n,a){return Object(b.a)(e,t,n,a)}}}),C=Object(_.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"checkout-product-card"},[n("router-link",{staticClass:"checkout-product-card__img",attrs:{to:"/catalog"}},[e.image&&e.image.id?n("v-picture",{attrs:{image:e.image,alt:""},scopedSlots:e._u([{key:"source",fn:function(t){var a=t.image;t.lazy;return[n("source",{attrs:{"data-srcset":e.generateSourcePath(56,56,a.id,"webp"),type:"image/webp"}})]}},{key:"fallback",fn:function(t){var a=t.image,o=(t.lazy,t.alt);return[n("img",{staticClass:"blur-up lazyload v-picture__img",attrs:{"data-src":e.generateSourcePath(56,56,a.id,a.sourceExt),alt:o}})]}}],null,!1,1125443553)}):n("v-svg",{attrs:{id:"checkout-product-card-empty",name:"logo",width:"48",height:"48"}})],1),e._v("\n    "+e._s(e.name)+"\n")],1)}),[],!1,null,null,null).exports,D=n("vZFW"),S=n("a6oV"),O=n("L2JU"),E=n("AlLH");function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I,T=(M(a={},"availableBonus",(function(e){return e.checkoutData.availableBonus})),M(a,"recipients",(function(e){return e.checkoutData.recipients||[]})),M(a,"addresses",(function(e){return e.checkoutData.addresses||[]})),M(a,"pickupPoints",(function(e){return e.checkoutData.pickupPoints||[]})),M(a,"receiveMethods",(function(e){return e.checkoutData.receiveMethods||[]})),M(a,"paymentMethods",(function(e){return e.checkoutData.paymentMethods||[]})),M(a,"confirmationTypes",(function(e){return e.checkoutData.confirmationTypes||[]})),M(a,"deliveryTypes",(function(e){return e.checkoutData.deliveryTypes||[]})),M(a,"checkoutInput",(function(e){return e.checkoutData.input||{}})),M(a,"deliveryMethods",(function(e,t){var n=e.checkoutData.receiveMethods.find((function(e){return e.id===t.selectedReceiveMethodID}));return n?n.methods:[]})),M(a,"selectedReceiveMethodID",(function(e){return e.checkoutData.input.receiveMethodID})),M(a,"selectedDeliveryMethodID",(function(e){return e.checkoutData.input.deliveryMethodID})),M(a,"selectedPaymentMethodID",(function(e){return e.checkoutData.input.paymentMethodID})),M(a,"selectedConfirmationTypeID",(function(e){return e.checkoutData.input.confirmationTypeID})),M(a,"selectedRecipient",(function(e){return e.checkoutData.input.recipient})),M(a,"selectedAddress",(function(e){return e.checkoutData.input.address})),M(a,"selectedPickupPoint",(function(e){return e.checkoutData.input.pickupPoint})),M(a,"selectedDeliveryType",(function(e){return e.checkoutData.input.deliveryType})),M(a,"bonus",(function(e){return e.checkoutData.input.bonus})),M(a,"promocode",(function(e){return e.checkoutData.input.promocode})),M(a,"subscribe",(function(e){return!!e.checkoutData.input.subscribe})),M(a,"agreement",(function(e){return!!e.checkoutData.input.agreement})),M(a,"certificates",(function(e){return e.checkoutData.input.certificates||[]})),M(a,"summary",(function(e){return e.checkoutData.summary})),M(a,"checkoutStatus",(function(e){return e.checkoutStatus||{}})),M(a,"receiveMethodStatus",(function(e){return e.checkoutStatus.receiveMethodStatus||E.requestStatus.SUCCESS})),M(a,"addressStatus",(function(e){return e.checkoutStatus.addressStatus||E.requestStatus.SUCCESS})),M(a,"bonusStatus",(function(e){return e.checkoutStatus.bonusStatus||E.requestStatus.SUCCESS})),M(a,"certificateStatus",(function(e){return e.checkoutStatus.certificateStatus||E.requestStatus.SUCCESS})),M(a,"promocodeStatus",(function(e){return e.checkoutStatus.promocodeStatus||E.requestStatus.SUCCESS})),a),w=n("BZIu");function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P,A="SET_DATA",N="SET_STATUS",x=(j(I={},N,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.checkoutStatus[t.name]=t.value})),j(I,"SET_TYPE",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.checkoutType=t})),j(I,A,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.checkoutData=t})),j(I,"SET_AGREEMENT",(function(e,t){e.checkoutData.input.agreement=t})),j(I,"SET_SUBSCRIBE",(function(e,t){e.checkoutData.input.subscribe=t})),j(I,"SET_RECIPIENT",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.checkoutData.input.recipient=t})),j(I,"SET_DELIVERY_TYPE",(function(e,t){e.checkoutData.input.deliveryType=t})),j(I,"SET_CONFIRMATION_TYPE",(function(e,t){e.checkoutData.input.confirmationTypeID=t})),j(I,"CHANGE_CHUNK_DATE",(function(e,t){var n=t.id,a=t.selectedDate,o=e.checkoutData.input.deliveryType.items.find((function(e){return e.id===n}));o&&(o.selectedDate=a)})),j(I,"ADD_ADDRESS",(function(e,t){e.checkoutData.addresses.push(t)})),I),R=n("Nlzp");function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $,z,U=(L(P={},"CHANGE_CITY",(function(e,t){var n=e.commit,a=e.state;return n(N,{name:"receiveMethodStatus",value:E.requestStatus.PENDING}),Object(R.e)({city:t,data:a.checkoutData}).then((function(e){n(N,{name:"receiveMethodStatus",value:E.requestStatus.SUCCESS}),n(A,e)})).catch((function(e){n(N,{name:"receiveMethodStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("CHANGE_CITY"," ").concat(e))}))})),L(P,"SET_RECEIVE_METHOD",(function(e,t){var n=e.commit,a=e.state;return n(N,{name:"receiveMethodStatus",value:E.requestStatus.PENDING}),Object(R.z)({method:t,data:a.checkoutData}).then((function(e){n(N,{name:"receiveMethodStatus",value:E.requestStatus.SUCCESS}),n(A,e)})).catch((function(e){n(N,{name:"receiveMethodStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("SET_RECEIVE_METHOD"," ").concat(e))}))})),L(P,"SET_ADDRESS",(function(e,t){var n=e.commit,a=e.state;return n(N,{name:"addressStatus",value:E.requestStatus.PENDING}),Object(R.x)({address:t,data:a.checkoutData}).then((function(e){n(N,{name:"addressStatus",value:E.requestStatus.SUCCESS}),n(A,e)})).catch((function(e){n(N,{name:"addressStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("SET_ADDRESS"," ").concat(e))}))})),L(P,"SET_PICKUP_POINT",(function(e,t){var n=e.commit,a=e.state;return n(N,{name:"addressStatus",value:E.requestStatus.PENDING}),Object(R.y)({pickupPoint:t,data:a.checkoutData}).then((function(e){n(N,{name:"addressStatus",value:E.requestStatus.SUCCESS}),n(A,e)})).catch((function(e){n(N,{name:"addressStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("SET_PICKUP_POINT"," ").concat(e))}))})),L(P,"ADD_BONUS",(function(e,t){var n=e.commit,a=e.state;return n(N,{name:"bonusStatus",value:E.requestStatus.PENDING}),Object(R.a)({bonus:t,data:a.checkoutData}).then((function(e){n(N,{name:"bonusStatus",value:E.requestStatus.SUCCESS}),n(A,e)})).catch((function(e){n(N,{name:"bonusStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("ADD_BONUS"," ").concat(e))}))})),L(P,"DELETE_BONUS",(function(e){var t=e.commit,n=e.state;return t(N,{name:"bonusStatus",value:E.requestStatus.PENDING}),Object(R.h)({data:n.checkoutData}).then((function(e){t(N,{name:"bonusStatus",value:E.requestStatus.SUCCESS}),t(A,e)})).catch((function(e){t(N,{name:"bonusStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("DELETE_BONUS"," ").concat(e))}))})),L(P,"ADD_CERTIFICATE",(function(e,t){var n=e.commit,a=e.state;return n(N,{name:"certificateStatus",value:E.requestStatus.PENDING}),Object(R.c)({code:t,data:a.checkoutData}).then((function(e){n(N,{name:"certificateStatus",value:E.requestStatus.SUCCESS}),n(A,e)})).catch((function(e){n(N,{name:"certificateStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("ADD_CERTIFICATE"," ").concat(e))}))})),L(P,"DELETE_CERTIFICATE",(function(e,t){var n=e.commit,a=e.state;return n(N,{name:"certificateStatus",value:E.requestStatus.PENDING}),Object(R.j)({code:t,data:a.checkoutData}).then((function(e){n(N,{name:"certificateStatus",value:E.requestStatus.SUCCESS}),n(A,e)})).catch((function(e){n(N,{name:"certificateStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("DELETE_CERTIFICATE"," ").concat(e))}))})),L(P,"ADD_PROMOCODE",(function(e,t){var n=e.commit,a=e.state;return n(N,{name:"promocodeStatus",value:E.requestStatus.PENDING}),Object(R.d)({promocode:t,data:a.checkoutData}).then((function(e){n(N,{name:"promocodeStatus",value:E.requestStatus.SUCCESS}),n(A,e)})).catch((function(e){n(N,{name:"promocodeStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("ADD_PROMOCODE"," ").concat(e))}))})),L(P,"DELETE_PROMOCODE",(function(e){var t=e.commit,n=e.state;return t(N,{name:"promocodeStatus",value:E.requestStatus.PENDING}),Object(R.k)({data:n.checkoutData}).then((function(e){t(N,{name:"promocodeStatus",value:E.requestStatus.SUCCESS}),t(A,e)})).catch((function(e){t(N,{name:"promocodeStatus",value:E.requestStatus.ERROR}),w.$logger.error("".concat("DELETE_PROMOCODE"," ").concat(e))}))})),L(P,"ADD_ADDRESS",(function(e,t){var n=e.dispatch;return(0,e.commit)("ADD_ADDRESS",t),n("SET_ADDRESS",t)})),L(P,"SET_CONFIRMATION_TYPE",(function(e,t){(0,e.commit)("SET_CONFIRMATION_TYPE",t)})),L(P,"SET_AGREEMENT",(function(e,t){(0,e.commit)("SET_AGREEMENT",t)})),L(P,"SET_SUBSCRIBE",(function(e,t){(0,e.commit)("SET_SUBSCRIBE",t)})),L(P,"SET_RECIPIENT",(function(e,t){(0,e.commit)("SET_RECIPIENT",t)})),L(P,"SET_DELIVERY_TYPE",(function(e,t){(0,e.commit)("SET_DELIVERY_TYPE",t)})),L(P,"CHANGE_CHUNK_DATE",(function(e,t){(0,e.commit)("CHANGE_CHUNK_DATE",t)})),L(P,"COMMIT_DATA",(function(e){var t=e.state;return Object(R.g)({data:t.checkoutData}).then((function(e){return e})).catch((function(e){return w.$logger.error("".concat("COMMIT_DATA"," ").concat(e))}))})),L(P,"FETCH_CHECKOUT_DATA",(function(e,t){var n=e.commit;return Object(R.q)(t).then((function(e){n("SET_TYPE",t),n(A,e)})).catch((function(e){return w.$logger.error("".concat("FETCH_CHECKOUT_DATA"," ").concat(e))}))})),P);function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B="checkout",V={name:B,namespaced:!0,state:(z={},q(z,"checkoutStatus",($={},q($,"receiveMethodStatus",E.requestStatus.SUCCESS),q($,"bonusStatus",E.requestStatus.SUCCESS),q($,"certificateStatus",E.requestStatus.SUCCESS),q($,"promocodeStatus",E.requestStatus.SUCCESS),q($,"addressStatus",E.requestStatus.SUCCESS),$)),q(z,"checkoutData",{}),q(z,"checkoutType",null),z),actions:U,mutations:x,getters:T},H=n("55Sm"),F=n("jDKC");n("+jTb");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z={name:"checkout-date-modal",components:{VButton:c.a,VDatepicker:D.a,GeneralModal:S.a},data:function(){return{selectedDate:null,availableDates:[]}},computed:Y({},Object(O.d)(["locale"]),{},Object(O.d)(H.b,{isOpen:function(e){return e[H.a]["checkout-date-modal"]&&e[H.a]["checkout-date-modal"].open},state:function(e){return e[H.a]["checkout-date-modal"]&&e[H.a]["checkout-date-modal"].state||{}}}),{maxDate:function(){return this.availableDates.length>0?this.availableDates[this.availableDates.length-1]:null},minDate:function(){return this.availableDates.length>0?this.availableDates[0]:null},isTablet:function(){return this.$mq.tablet}}),methods:Y({},Object(O.b)(H.b,[F.a]),{onSelectPoint:function(e){this.onClose()},onChanged:function(){this.$emit("changed",Y({},this.state,{selectedDate:this.selectedDate})),this.onClose()},onClose:function(){this.$emit("close"),this.CHANGE_MODAL_STATE({name:"checkout-date-modal",open:!1})}}),watch:{state:function(e){this.availableDates=this.state.availableDates,this.selectedDate=this.state.selectedDate}},created:function(){this.availableDates=this.state.availableDates||[],this.selectedDate=this.state.selectedDate||[]}},K=Object(_.a)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isOpen?n("general-modal",{staticClass:"checkout-date-modal",attrs:{header:"Дата доставки","is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[n("h3",{staticClass:"checkout-date-modal__hl"},[e._v("Дата доставки")]),e._v(" "),n("div",{staticClass:"container checkout-date-modal__datepicker"},[n("v-datepicker",{attrs:{mode:"single",enable:e.availableDates,locale:e.locale,maxDate:e.maxDate,minDate:e.minDate,"date-format":"Y-m-d",inline:""},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1),e._v(" "),n("div",{staticClass:"checkout-date-modal__submit"},[n("v-button",{staticClass:"checkout-date-modal__submit-btn",on:{click:e.onChanged}},[e._v("Подтвердить доставку")])],1)]},proxy:!0}],null,!1,2347796187)}):e._e()}),[],!1,null,null,null).exports,W=n("Kw5r");function J(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function X(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ne(e){return(e.icon.color||"blue")+(e.icon.glyph?te(e.icon.glyph):e.icon.content?"Stretchy":"")}function ae(e){return e.map((function(e){return Array.isArray(e)?ae(e):+e}))}function oe(e,t){var n=[];return function e(t,a){if(t===a)return!0;if(t instanceof Date&&a instanceof Date)return+t==+a;if("object"!==ee(t)||"object"!==ee(a))return!1;if(function(e,t){for(var a=n.length;a--;)if(!(n[a][0]!==e&&n[a][0]!==t||n[a][1]!==t&&n[a][1]!==e))return!0;return!1}(t,a))return!0;n.push([t,a]);var o=Object.keys(t),s=o.length;if(Object.keys(a).length!==s)return!1;for(;s--;)if(!e(t[o[s]],a[o[s]]))return!1;return!0}(e,t)}var se=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={},this.ymapReady=!1,this.scriptIsNotAttached=!0}var t,n,a;return t=e,(n=[{key:"$on",value:function(e,t){var n=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){n.events[e]=n.events[e].filter((function(e){return t!==e}))}}},{key:"$off",value:function(e,t){this.events[e]||(this.events[e]=[]);var n=this.events[e].indexOf(t);-1!==n&&this.events[e].splice(n,1)}},{key:"$emit",value:function(e,t){var n=this.events[e];n&&n.forEach((function(e){return e(t)}))}}])&&J(t.prototype,n),a&&J(t,a),e}()),re=["fullscreenControl","geolocationControl","routeEditor","rulerControl","searchControl","trafficControl","typeSelector","zoomControl","routePanelControl"];function ce(e){return 0===e.filter((function(e){return![].concat(re,["default"]).includes(e)})).length}function ie(e,t){var n=te(e);if(!t)return n;switch(n){case"Placemark":return"Point";case"Polyline":return"LineString";default:return n}}function ue(e,t){var n,a,o=t?{type:"Feature",id:e.properties.markerId,geometry:{type:e.markerType,coordinates:e.coords},properties:e.properties,options:e.options}:new ymaps[e.markerType](e.coords,e.properties,e.options);return o.clusterName=e.clusterName,t||(n=e.callbacks,a=o,n&&"object"===ee(n)&&Object.keys(n).forEach((function(e){a.events.add(e,n[e])}))),o}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var a=document.createElement("SCRIPT"),o=e.apiKey,s=void 0===o?"":o,r=e.lang,c=void 0===r?"ru_RU":r,i=e.version,u=void 0===i?"2.1":i,l=e.coordorder,d=void 0===l?"latlong":l,p=e.debug,h=void 0!==p&&p?"debug":"release",m="lang=".concat(c).concat(s&&"&apikey=".concat(s),"&mode=").concat(h,"&coordorder=").concat(d),f="https://api-maps.yandex.ru/".concat(u,"/?").concat(m);a.setAttribute("src",f),a.setAttribute("async",""),a.setAttribute("defer",""),document.body.appendChild(a),se.scriptIsNotAttached=!1,a.onload=function(){se.ymapReady=!0,se.$emit("scriptIsLoaded"),t()},a.onerror=n}))}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=se,me={pluginOptions:{},provide:function(){var e,t,n=this,a=[],o=[];return{addMarker:function(e){o.push(e),t&&clearTimeout(t),t=setTimeout((function(){n.setMarkers(o),o=[]}),10)},deleteMarker:function(t){n.myMap.geoObjects&&(a.push(t),e&&clearTimeout(e),e=setTimeout((function(){return n.deleteMarkers(a)}),10))},rerender:null,compareValues:function(e){var a=e.newVal,s=e.oldVal,r=e.id;oe(a,s)||(o.push(r),t&&clearTimeout(t),t=setTimeout((function(){n.setMarkers(o),o=[]}),10))}}},data:function(){return{ymapId:"yandexMap".concat(Math.round(1e5*Math.random())),myMap:{},style:this.ymapClass?"":"width: 100%; height: 100%;"}},props:{coords:{type:Array,validator:function(e){return!e.filter((function(e){return Number.isNaN(e)})).length},required:!0},zoom:{validator:function(e){return!Number.isNaN(e)},default:18},clusterOptions:{type:Object,default:function(){return{}}},clusterCallbacks:{type:Object,default:function(){return{}}},behaviors:{type:Array,default:function(){return["default"]}},controls:{type:Array,default:function(){return["default"]},validator:function(e){return ce(e)}},detailedControls:{type:Object,validator:function(e){return ce(Object.keys(e))}},scrollZoom:{type:Boolean,default:!0},zoomControl:Object,mapType:{type:String,default:"map",validator:function(e){return["map","satellite","hybrid"].includes(e)}},placemarks:{type:Array,default:function(){return[]}},useObjectManager:{type:Boolean,default:!1},objectManagerClusterize:{type:Boolean,default:!0},ymapClass:String,initWithoutMarkers:{type:Boolean,default:!0},debug:{type:Boolean,default:!1},settings:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}},showAllMarkers:Boolean},computed:{coordinates:function(){return this.coords.map((function(e){return+e}))}},methods:{getMarkersFromSlots:function(e){return this.$slots.default?this.$slots.default.map((function(t){var n=t.componentOptions&&t.componentOptions.propsData;if(n&&(!e||e.includes(n.markerId))){var a={};if(n.balloonTemplate)a={balloonContentLayout:ymaps.templateLayoutFactory.createClass(n.balloonTemplate)};var o={markerId:n.markerId,markerType:n.markerType||"placemark",coords:ae(n.coords),hintContent:n.hintContent,markerFill:n.markerFill,circleRadius:+n.circleRadius,clusterName:n.clusterName,markerStroke:n.markerStroke,balloon:n.balloon,callbacks:n.callbacks,properties:n.properties,options:n.options,balloonOptions:a};return n.icon&&["default#image","default#imageWithContent"].includes(n.icon.layout)?(o.iconContent=n.icon.content,o.iconLayout=n.icon.layout,o.iconImageHref=n.icon.imageHref,o.iconImageSize=n.icon.imageSize,o.iconImageOffset=n.icon.imageOffset,o.iconContentOffset=n.icon.contentOffset,n.icon.contentLayout&&"string"==typeof n.icon.contentLayout&&(o.iconContentLayout=ymaps.templateLayoutFactory.createClass(n.icon.contentLayout))):o.icon=n.icon,o}})).filter((function(e){return e&&e.markerType})):[]},createMarkers:function(e){var t=this,n=[],a=this.getMarkersFromSlots(e);e&&this.deleteMarkers(e);for(var o=0;o<a.length;o++){var s=a[o],r=ie(s.markerType,this.useObjectManager),c={hintContent:s.hintContent,iconContent:s.icon?s.icon.content:s.iconContent,markerId:s.markerId},i=s.balloon?{balloonContentHeader:s.balloon.header,balloonContentBody:s.balloon.body,balloonContentFooter:s.balloon.footer}:{},u=Object.assign(c,i,s.properties),l=s.iconLayout?{iconLayout:s.iconLayout,iconImageHref:s.iconImageHref,iconImageSize:s.iconImageSize,iconImageOffset:s.iconImageOffset,iconContentOffset:s.iconContentOffset,iconContentLayout:s.iconContentLayout}:{preset:s.icon&&"islands#".concat(ne(s),"Icon")},d=s.markerStroke?{strokeColor:s.markerStroke.color||"0066ffff",strokeOpacity:parseFloat(s.markerStroke.opacity)>=0?parseFloat(s.markerStroke.opacity):1,strokeStyle:s.markerStroke.style,strokeWidth:parseFloat(s.markerStroke.width)>=0?parseFloat(s.markerStroke.width):1}:{},p=s.markerFill?{fill:s.markerFill.enabled||!0,fillColor:s.markerFill.color||"0066ff99",fillOpacity:parseFloat(s.markerFill.opacity)>=0?parseFloat(s.markerFill.opacity):1,fillImageHref:s.markerFill.imageHref||""}:{},h=Object.assign(l,d,p,s.balloonOptions,s.options);"Circle"===r&&(s.coords=[s.coords,s.circleRadius]);var m=ue({properties:u,options:h,markerType:r,coords:s.coords,clusterName:s.clusterName,callbacks:s.callbacks},this.useObjectManager);n.push(m)}return this.placemarks&&this.placemarks.forEach((function(e){var a=e.markerType,o=void 0===a?"Placemark":a,s=e.properties,r=e.options,c=void 0===r?{}:r,i=e.coords,u=e.clusterName,l=e.callbacks,d=e.balloonTemplate,p=ie(o,t.useObjectManager);if(d){var h=ymaps.templateLayoutFactory.createClass(d);c.balloonContentLayout=h}var m=ue({properties:s,options:c,markerType:p,coords:i,clusterName:u,callbacks:l},t.useObjectManager);n.push(m)})),n},setMarkers:function(e){var t={options:this.clusterOptions,callbacks:this.clusterCallbacks,map:this.myMap,useObjectManager:this.useObjectManager,objectManagerClusterize:this.objectManagerClusterize};!function(e,t){var n=t.options,a=t.callbacks,o=t.map,s=t.useObjectManager,r=t.objectManagerClusterize,c={},i=[];if(e.forEach((function(e){e.clusterName?c[e.clusterName]=c[e.clusterName]?[].concat(X(c[e.clusterName]),[e]):[e]:i.push(e)})),Object.keys(c).forEach((function(e){var t=n[e]||{},i=a[e]||{},u=t.layout||"\n      <div>{{ properties.balloonContentHeader }}</div>\n      <div>{{ properties.balloonContentBody }}</div>\n      <div>{{ properties.balloonContentFooter }}</div>\n    ";t.clusterBalloonItemContentLayout=ymaps.templateLayoutFactory.createClass(u);var l=t.clusterLayout?ymaps.templateLayoutFactory.createClass(t.clusterLayout):t.clusterBalloonContentLayout||"cluster#balloonTwoColumns";t.clusterBalloonContentLayout=l;var d=t.clusterIconContentLayout;if(t.clusterIconContentLayout=d&&ymaps.templateLayoutFactory.createClass(d),s){var p=new ymaps.ObjectManager(Object.assign({clusterize:r},t));Object.keys(i).forEach((function(e){p.clusters.events.add(e,i[e])})),p.add(c[e]),o.geoObjects.add(p)}else{var h=new ymaps.Clusterer(t);Object.keys(i).forEach((function(e){h.events.add(e,i[e])})),t.createCluster&&(h.createCluster=t.createCluster),h.add(c[e]),o.geoObjects.add(h)}})),i.length){var u=s?new ymaps.ObjectManager({clusterize:!1}):new ymaps.GeoObjectCollection;i.forEach((function(e){return u.add(e)})),o.geoObjects.add(u)}}(this.createMarkers(e),t),e&&this.$emit("markers-was-change",e)},deleteMarkers:function(e){var t=this;this.myMap&&(this.myMap.geoObjects.each((function(n){var a=[];if(t.useObjectManager)n.remove(e);else{var o,s=function(t){var n=t.properties.get("markerId");e.includes(n)&&a.push(t)};if(n.each)n.each(s),o=n.getLength();else{var r=n.getGeoObjects();r.forEach(s),o=r.length}0===o||o===a.length?t.myMap.geoObjects.remove(n):a.length&&a.forEach((function(e){return n.remove(e)}))}})),this.$emit("markers-was-delete",e))},init:function(){var e=this;if(window.ymaps&&ymaps.GeoObjectCollection&&(this.initWithoutMarkers||this.$slots.default||this.placemarks.length)){if(this.$emit("map-initialization-started"),this.myMap=new ymaps.Map(this.ymapId,{center:this.coordinates,zoom:+this.zoom,behaviors:this.behaviors,controls:this.controls,type:"yandex#".concat(this.mapType)},this.options),this.myMap.events.add("click",this.onMapClick),this.zoomControl&&(this.myMap.controls.remove("zoomControl"),this.myMap.controls.add(new ymaps.control.ZoomControl(this.zoomControl))),this.detailedControls)Object.keys(this.detailedControls).forEach((function(t){e.myMap.controls.remove(t),e.myMap.controls.add(t,e.detailedControls[t])}));!1===this.scrollZoom&&this.myMap.behaviors.disable("scrollZoom"),this.setMarkers(),this.showAllMarkers&&this.myMap.setBounds(this.myMap.geoObjects.getBounds()),this.$emit("map-was-initialized",this.myMap)}},onMapClick:function(e){this.$emit("click",e)}},watch:{coordinates:function(e){this.myMap.panTo&&this.myMap.panTo(e)},placemarks:function(){window.ymaps&&(this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.setMarkers())},zoom:function(){this.myMap.setZoom(this.zoom)}},render:function(e){return e("section",{class:"ymap-container",ref:"mapContainer"},[e("div",{attrs:{id:this.ymapId,class:this.ymapClass,style:this.style}}),e("div",{ref:"markersContainer",attrs:{class:"ymap-markers"}},[this.$slots.default])])},mounted:function(){var e=this;if(this.$attrs["map-link"]||this.$attrs.mapLink)throw new Error("Vue-yandex-maps: Attribute mapLink is not supported. Use settings.");this.mapObserver=new MutationObserver((function(){e.myMap.container.fitToViewport()}));var t=this.$refs.mapContainer;if(this.mapObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!1}),he.scriptIsNotAttached){var n=this.debug;le(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.$options.pluginOptions,{},this.settings,{debug:n}))}if(he.ymapReady)ymaps.ready(this.init);else{var a=function(){return ymaps.ready(e.init)};he.$on("scriptIsLoaded",a),this.$on("hook:beforeDestroy",(function(){return he.$off("scriptIsLoaded",a)}))}},beforeDestroy:function(){this.mapObserver.disconnect(),this.myMap.geoObjects.removeAll(),this.myMap.events.remove("click",this.onMapClick),this.myMap.destroy()},destroyed:function(){this.mapObserver=null,this.myMap=null}},fe=["placemark","polyline","rectangle","polygon","circle"],ve=[],_e={inject:["addMarker","deleteMarker","rerender","compareValues"],props:{coords:{type:Array,required:!0,validator:function(e){return!e.filter((function(e){return Number.isNaN(e)})).length}},hintContent:String,icon:Object,balloon:Object,markerType:{type:String,validator:function(e){return fe.includes(e.toLowerCase())},default:"placemark"},markerFill:Object,markerStroke:Object,clusterName:[String,Number],circleRadius:{validator:function(e){return!Number.isNaN(e)},default:1e3},callbacks:Object,balloonTemplate:String,markerId:{type:[String,Number],required:!0},properties:Object,options:Object},render:function(){},mounted:function(){var e=this;this.$parent._isMounted&&this.addMarker(this.markerId),Object.keys(this.$props).forEach((function(t){ve.push(e.$watch(t,(function(t,n){return e.compareValues({newVal:t,oldVal:n,id:e.markerId})})))}))},beforeDestroy:function(){ve.forEach((function(e){return e()})),this.deleteMarker(this.markerId)}};me.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};me.pluginOptions=t,e.component("yandex-map",me),e.component("ymap-marker",_e)};var ye=me;if("undefined"!=typeof window){W.default.use(ye,{apiKey:"46c69919-a571-416e-8198-189ed26c6a79",lang:"ru_RU",coordorder:"latlong",version:"2.1"})}var ke=n("sEfC"),be=n.n(ke),ge=(n("tfXw"),{name:"v-suggestion",inheritAttributes:!0,props:{options:{type:Object,default:{}},onInputChange:{type:Function,required:!0},onItemSelected:{type:Function},selectedItem:{},value:{type:String,default:""},sync:{type:Boolean,default:!0},keyField:{type:String},selectedValuePath:{type:[String,Function],default:null},error:String},data:function(){return{extendedOptions:Object.assign({},{debounce:0,placeholder:"",inputClass:"input"},this.options),query:this.value,lastSetQuery:null,items:[],activeItemIndex:-1,showItems:!1,internalSelectedItem:this.selectedItem}},watch:{query:function(e,t){e!==this.lastSetQuery?(this.onQueryChanged(e),this.$emit("input",e)):this.lastSetQuery=null},value:function(e,t){this.setInputQuery(e)},selectedItem:function(e){this.internalSelectedItem=e,this.onItemSelectedDefault(this.internalSelectedItem),this.internalSelectedItem||this.onQueryChanged("")}},methods:{onItemSelectedDefault:function(e){var t="";e instanceof String?t=e:this.selectedValuePath instanceof String?t=e&&e[this.selectedValuePath]:this.selectedValuePath instanceof Function&&(t=e&&this.selectedValuePath(e)),this.$emit("input",t),this.setInputQuery(t),this.showItems=!1},hideItems:function(){var e=this;setTimeout((function(){e.showItems=!1,e.sync&&e.onItemSelectedDefault(e.internalSelectedItem)}),300)},showResults:function(){this.showItems=!0},setInputQuery:function(e){this.lastSetQuery=e,this.query=e},onKeyDown:function(e){switch(this.$emit("keyDown",e.keyCode),e.keyCode){case 40:this.highlightItem("down"),e.preventDefault();break;case 38:this.highlightItem("up"),e.preventDefault();break;case 13:this.selectItem(),e.preventDefault();break;case 27:this.showItems=!1,e.preventDefault();break;default:return!0}},selectItem:function(e){var t=null;if(void 0===e){if(-1===this.activeItemIndex)return;t=this.items[this.activeItemIndex]}else t=this.items[e];t&&(this.internalSelectedItem=t,this.$emit("selected",this.internalSelectedItem),this.onItemSelectedDefault(this.internalSelectedItem),this.showItems=!1)},highlightItem:function(e){var t=this;if(0!==this.items.length){var n=this.items.findIndex((function(e,n){return n===t.activeItemIndex}));-1===n?n="down"===e?0:this.items.length-1:(this.activeIndexItem=0,"down"===e?(n+=1)===this.items.length&&(n=0):(n-=1)<0&&(n=this.items.length-1)),this.activeItemIndex=n;var a=this.$refs.item[this.activeItemIndex];a&&a.scrollIntoView()}},setItems:function(e){this.items=e,this.activeItemIndex=-1,this.showItems=!0},onQueryChanged:function(e){var t=this,n=this.onInputChange(e);this.items=[],void 0!==n&&"boolean"!=typeof n&&null!==n&&(n instanceof Array?this.setItems(n):"function"==typeof n.then&&n.then((function(e){return t.setItems(e)})))},onSuggestionClick:function(){var e=this;this.showItems=!0,this.$nextTick((function(){return e.$refs.input.focus()}))}},beforeMount:function(){this.onItemSelectedDefault(this.internalSelectedItem),0!==this.extendedOptions.debounce&&(this.onQueryChanged=be()(this.onQueryChanged,this.extendedOptions.debounce))}}),Ce=Object(_.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-suggestions"},[n("label",{staticClass:"v-suggestions__label"},[e._t("default")],2),e._v(" "),n("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"v-suggestions-input",class:e.extendedOptions.inputClass,attrs:{type:"text",autocomplete:"false",placeholder:e.extendedOptions.placeholder},domProps:{value:e.query},on:{keydown:e.onKeyDown,blur:e.hideItems,focus:function(t){e.showItems=!0},input:function(t){t.target.composing||(e.query=t.target.value)}}},"input",e.$attrs,!1)),e._v(" "),n("div",{staticClass:"error-message error",attrs:{role:"alert"}},[e._t("error",[e._v("\n            "+e._s(e.error)+"\n        ")],{error:e.error})],2),e._v(" "),e.items&&e.items.length>0&&!0===e.showItems?n("div",{staticClass:"suggestions",on:{mousedown:function(e){e.preventDefault()}}},[n("ul",{staticClass:"items"},e._l(e.items,(function(t,a){return n("li",{key:t[e.keyField]||a,ref:"item",refInFor:!0,staticClass:"item",class:{"is-active":a===e.activeItemIndex},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.selectItem(a)}}},[e._t("item",[e._v("\n                    "+e._s(t)+"\n                ")],{item:t})],2)})),0)]):e._e()])}),[],!1,null,null,null).exports,De=n("SqwP"),Se=n("J3J1"),Oe=n("9roy"),Ee=n("SesW"),Me="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNTU2NiAyMy44MzA4QzEyLjIxOTggMjQuMDU2NCAxMS43Nzk2IDI0LjA1NiAxMS40NDI5IDIzLjgzMDRMMTEuNDQgMjMuODI4NUwxMS40MzM0IDIzLjgyNEwxMS40MTA1IDIzLjgwODVDMTEuMzkxMSAyMy43OTUyIDExLjM2MzMgMjMuNzc2MSAxMS4zMjc4IDIzLjc1MTVDMTEuMjU2OCAyMy43MDIxIDExLjE1NDggMjMuNjMwMSAxMS4wMjYyIDIzLjUzNjhDMTAuNzY5IDIzLjM1MDMgMTAuNDA0OSAyMy4wNzgxIDkuOTY5NTIgMjIuNzMwMkM5LjEwMDI1IDIyLjAzNTcgNy45Mzg1OCAyMS4wMzI4IDYuNzczNTIgMTkuODAxMUM0LjQ4NDkyIDE3LjM4MTcgMiAxMy44ODc3IDIgMTBDMiA0LjQ3NzE1IDYuNDc3MTUgMi40MTQxMWUtMDcgMTIgMEMxNy41MjI5IC0yLjQxNDExZS0wNyAyMiA0LjQ3NzE1IDIyIDEwQzIyIDEzLjg4NzcgMTkuNTE1MSAxNy4zODE3IDE3LjIyNjUgMTkuODAxMUMxNi4wNjE0IDIxLjAzMjggMTQuODk5OCAyMi4wMzU3IDE0LjAzMDUgMjIuNzMwMkMxMy41OTUxIDIzLjA3ODEgMTMuMjMxIDIzLjM1MDMgMTIuOTczOCAyMy41MzY4QzEyLjg0NTIgMjMuNjMwMSAxMi43NDMyIDIzLjcwMjEgMTIuNjcyMiAyMy43NTE1QzEyLjYzNjcgMjMuNzc2MSAxMi42MDg5IDIzLjc5NTIgMTIuNTg5NSAyMy44MDg1TDEyLjU2NjYgMjMuODI0TDEyLjU2IDIzLjgyODVMMTIuNTU3OSAyMy44Mjk5TDEyLjU1NjYgMjMuODMwOFpNOCAxMEM4IDcuNzkwODYgOS43OTA4NiA2IDEyIDZDMTQuMjA5MSA2IDE2IDcuNzkwODYgMTYgMTBDMTYgMTIuMjA5MSAxNC4yMDkxIDE0IDEyIDE0QzkuNzkwODYgMTQgOCAxMi4yMDkxIDggMTBaIiBmaWxsPSIjMTQxMTE2Ii8+Cjwvc3ZnPgo=";n("vyCa");function Ie(e,t,n,a,o,s,r){try{var c=e[s](r),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(a,o)}function Te(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var s=e.apply(t,n);function r(e){Ie(s,a,o,r,c,"next",e)}function c(e){Ie(s,a,o,r,c,"throw",e)}r(void 0)}))}}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae,Ne,xe,Re,Le,$e,ze={name:"checkout-address-modal",mixins:[Ee.a],components:{VButton:c.a,VInput:r.a,VSuggestion:Ce,GeneralModal:S.a},validations:{selectedAddress:{required:Ee.e},address:{post_index:{required:Ee.e},flat:{required:Ee.e},floor:{required:Ee.e},porch:{required:Ee.e}}},data:function(){return{zoom:15,address:{country_code:"",post_index:"",region:"",region_guid:"",area:"",area_guid:"",city:"",city_guid:"",street:"",house:"",block:"",flat:"",floor:"",porch:"",intercom:"",comment:""},selectedAddress:null,options:{debounce:500},showMap:!1,markerIcon:{layout:"default#image",imageHref:Me,imageSize:[24,24],imageOffset:[0,0]}}},computed:je({},Object(O.d)(H.b,{modalState:function(e){return e[H.a]["checkout-address-modal"]&&e[H.a]["checkout-address-modal"].state||{}}}),{},Object(O.d)(De.a,[De.b]),{},Object(O.c)(De.a,[Se.a]),{isTablet:function(){return this.$mq.tablet},coords:function(){return this.selectedAddressCoords?this.selectedAddressCoords:this.selectedCityCoords},selectedAddressCoords:function(){return this.selectedAddress&&this.selectedAddress.data.geo_lat&&this.selectedAddress.data.geo_lon?[Number(this.selectedAddress.data.geo_lat),Number(this.selectedAddress.data.geo_lon)]:null}}),methods:je({},Object(O.b)(H.b,[F.a]),{},Object(O.b)(De.a,[Oe.a]),{findAddress:function(e,t,n,a){var o,s={value:e};switch(e){case E.suggestionTypes.REGION:o={value:E.suggestionTypes.AREA};break;case E.suggestionTypes.CITY:o={value:E.suggestionTypes.SETTLEMENT};break;case E.suggestionTypes.HOUSE:break;default:o={value:e}}return w.$dadata.post("/suggestions/api/4_1/rs/suggest/address",{query:t,count:n,locations:a,from_bound:s,to_bound:o})},onCitySelected:($e=Te(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.findAddress(E.suggestionTypes.CITY,t.unrestricted_value,1);case 3:n=e.sent,a=n.suggestions,this[Oe.a](a[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return $e.apply(this,arguments)}),onCityInputChange:(Le=Te(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.findAddress(E.suggestionTypes.CITY,t||this.selectedCity.value,20);case 3:return n=e.sent,a=n.suggestions,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return Le.apply(this,arguments)}),onAddressSelected:(Re=Te(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.findAddress(E.suggestionTypes.HOUSE,t.unrestricted_value,1);case 3:n=e.sent,a=n.suggestions,this.selectedAddress=a[0],e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),this.selectedAddress=null;case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return Re.apply(this,arguments)}),onAddressInputChange:(xe=Te(regeneratorRuntime.mark((function e(){var t,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",e.prev=1,e.next=4,this.findAddress(E.suggestionTypes.HOUSE,t,20,[{city_fias_id:this.selectedCity.data.city_fias_id}]);case 4:return n=e.sent,a=n.suggestions,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return xe.apply(this,arguments)}),onMapClick:(Ne=Te(regeneratorRuntime.mark((function e(t){var n,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get("coords"),e.next=3,w.$dadata.post("/suggestions/api/4_1/rs/geolocate/address",{lat:n[0],lon:n[1],radius_meters:1e3});case 3:a=e.sent,o=a.suggestions,s=o.find((function(e){return e.data.house})),this.selectedAddress=s;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return Ne.apply(this,arguments)}),formatAddress:function(e){return"".concat(e.data.street_with_type||e.data.city_district_with_type||e.data.settlement_with_type||""," ").concat(e.data.house_type," ").concat(e.data.house," ").concat(e.data.block?"".concat(e.data.block_type," ").concat(e.data.block):"")},selectedFormatAddress:function(e){return"".concat(e.data.street_with_type||e.data.settlement_with_type||""," ").concat(e.data.house_type," ").concat(e.data.house," ").concat(e.data.block?"".concat(e.data.block_type," ").concat(e.data.block):"")},onSubmit:function(){if(this.$v.$touch(),!this.$v.$invalid){var e=Object.assign({},this.address);console.log(e,this.address),this.$emit("addressSubmit",e),this.CHANGE_MODAL_STATE({name:"checkout-address-modal",open:!1,state:{}})}},onClose:function(){this.CHANGE_MODAL_STATE({name:"checkout-address-modal",open:!1,state:{}})},init:(Ae=Te(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.showMap=!0,!this.modalState.address){e.next=10;break}return e.next=4,this.findAddress(E.suggestionTypes.HOUSE,this.modalState.address.description,1,[{city_fias_id:this.selectedCity.data.city_fias_id}]);case 4:t=e.sent,n=t.suggestions,this.selectedAddress=n[0],this.selectedAddress&&(this.zoom=17),e.next=11;break;case 10:this.zoom=15;case 11:case"end":return e.stop()}}),e,this)}))),function(){return Ae.apply(this,arguments)})}),watch:{selectedCity:function(e){this.selectedAddress=null,this.postalCode=null},selectedAddress:function(e){e?(this.address.country_code=e.data.country_iso_code,this.address.post_index=e.data.postal_code,this.address.region=e.data.region_with_type||e.data.region,this.address.region_guid=e.data.region_fias_id,this.address.area=e.data.area_with_type||e.data.area,this.address.area_guid=e.data.area_fias_id,this.address.city=e.data.city_with_type||e.data.city,this.address.city_guid=e.data.city_fias_id,this.address.street=e.data.street_with_type||e.data.street,this.address.house=e.data.house_type?"".concat(e.data.house_type," ").concat(e.data.house):e.data.house,this.address.block=e.data.block_type?"".concat(e.data.block_type," ").concat(e.data.block):e.data.block):(this.address.country_code="",this.address.post_index="",this.address.region="",this.address.region_guid="",this.address.area="",this.address.area_guid="",this.address.city="",this.address.city_guid="",this.address.street="",this.address.house="",this.address.block=""),console.log(this.address)}},beforeMount:function(){},mounted:function(){var e=this;setTimeout((function(){return e.showMap=!0}),300)}},Ue=Object(_.a)(ze,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("general-modal",{staticClass:"checkout-address-modal",attrs:{"is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"checkout-address-modal__map"},[e.showMap&&!e.isTablet?n("yandex-map",{attrs:{zoom:e.zoom,coords:e.coords,controls:[],options:{yandexMapDisablePoiInteractivity:!0},showAllMarkers:""},on:{click:e.onMapClick}},[e.selectedAddress?n("ymap-marker",{attrs:{"marker-id":"marker-id",coords:e.coords,icon:e.markerIcon}}):e._e()],1):e._e()],1),e._v(" "),n("div",{staticClass:"checkout-address-modal__form"},[n("div",{staticClass:"checkout-address-modal__form-header"},[n("h3",{staticClass:"checkout-address-modal__form-header-hl"},[e._v("Адрес доставки")]),e._v(" "),n("span",{staticClass:"text-grey text-sm"},[e._v("Укажите на карте или введите вручную")])]),e._v(" "),n("div",{staticClass:"checkout-address-modal__form-row"},[n("v-suggestion",{staticClass:"checkout-address-modal__form-column",attrs:{selectedItem:e.selectedCity,options:e.options,onInputChange:e.onCityInputChange,selectedValuePath:function(e){return e.value}},on:{selected:function(t){return e.onCitySelected(t)}},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[e._v("\n                        "+e._s(n.value)+"\n                    ")]}}])},[e._v("\n                    Ваш населенный пункт\n                    ")]),e._v(" "),n("v-input",{staticClass:"checkout-address-modal__form-column checkout-address-modal__form-column--30",attrs:{type:"number",maxlength:"6",min:"1"},model:{value:e.address.post_index,callback:function(t){e.$set(e.address,"post_index",t)},expression:"address.post_index"}},[e._v("\n                    Индекс\n                ")])],1),e._v(" "),n("div",{staticClass:"checkout-address-modal__form-row"},[n("v-suggestion",{staticClass:"checkout-address-modal__form-column",attrs:{selectedItem:e.selectedAddress,options:e.options,onInputChange:e.onAddressInputChange,selectedValuePath:e.selectedFormatAddress},on:{selected:function(t){return e.onAddressSelected(t)}},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[e._v("\n                        "+e._s(e.formatAddress(n))+"\n                    ")]}}])},[e._v("\n                    Улица, дом, корпус\n                    ")]),e._v(" "),n("v-input",{staticClass:"checkout-address-modal__form-column checkout-address-modal__form-column--30",attrs:{type:"number",min:"1"},model:{value:e.address.flat,callback:function(t){e.$set(e.address,"flat",t)},expression:"address.flat"}},[e._v("\n                    Квартира/офис\n                ")])],1),e._v(" "),n("div",{staticClass:"checkout-address-modal__form-row"},[n("v-input",{staticClass:"checkout-address-modal__form-column checkout-address-modal__form-column--30",attrs:{type:"number",min:"1"},model:{value:e.address.floor,callback:function(t){e.$set(e.address,"floor",t)},expression:"address.floor"}},[e._v("\n                    Этаж\n                ")]),e._v(" "),n("v-input",{staticClass:"checkout-address-modal__form-column checkout-address-modal__form-column--30",attrs:{type:"number",min:"1"},model:{value:e.address.porch,callback:function(t){e.$set(e.address,"porch",t)},expression:"address.porch"}},[e._v("\n                    Подъезд\n                ")]),e._v(" "),n("v-input",{staticClass:"checkout-address-modal__form-column checkout-address-modal__form-column--30",attrs:{min:"1"},model:{value:e.address.intercom,callback:function(t){e.$set(e.address,"intercom",t)},expression:"address.intercom"}},[e._v("\n                    Домофон\n                ")])],1),e._v(" "),n("v-input",{attrs:{tag:"textarea",rows:"3",maxHeight:"100"},model:{value:e.address.comment,callback:function(t){e.$set(e.address,"comment",t)},expression:"address.comment"}},[e._v("\n                Комментарий курьеру\n            ")]),e._v(" "),n("div",[n("v-button",{staticClass:"checkout-address-modal__form-submit",on:{click:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e._v("\n                    Привезти сюда\n                ")])],1)],1)]},proxy:!0}])})}),[],!1,null,null,null).exports,qe=n("pFko");n("NCbh");function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe={name:"checkout-pickup-point-modal",components:{VButton:c.a,VSelect:qe.a,CheckoutOptionCard:y,GeneralModal:S.a},data:function(){return{selectedDeliveryMethod:null,showMap:!1,coords:[55.755814,37.617635],markerIcon:{layout:"default#image",imageHref:Me,imageSize:[24,24],imageOffset:[0,0]}}},computed:Ve({},Object(O.c)(B,["pickupPoints","deliveryMethods","selectedDeliveryMethodID"]),{},Object(O.d)(H.b,{isOpen:function(e){return e[H.a]["checkout-pickup-point-modal"]&&e[H.a]["checkout-pickup-point-modal"].isOpen}}),{filteredPickupPoints:function(){var e=this;return this.pickupPoints.filter((function(t){return!e.selectedDeliveryMethod||t.methodID===e.selectedDeliveryMethod.id}))},isTablet:function(){return this.$mq.tablet}}),methods:Ve({},Object(O.b)(H.b,[F.a]),{},Object(O.b)(B,["SET_PICKUP_POINT"]),{onSelectPoint:function(e){this.SET_PICKUP_POINT(e),this.onClose()},onClose:function(){this.selectedDeliveryMethod=null,this.CHANGE_MODAL_STATE({name:"checkout-pickup-point-modal",open:!1})}}),mounted:function(){var e=this;setTimeout((function(){return e.showMap=!0}),400)}},Ge=Object(_.a)(Fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("general-modal",{staticClass:"checkout-pickup-point-modal",attrs:{"is-scroll-locked":!1,"is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"checkout-pickup-point-modal__map"},[e.showMap&&!e.isTablet?n("yandex-map",{attrs:{zoom:11,coords:e.coords,controls:[],showAllMarkers:""}},e._l(e.filteredPickupPoints,(function(t){return n("ymap-marker",{key:t.id+"-"+t.methodID,attrs:{"marker-id":"marker-"+t.id,coords:t.map.coords,icon:e.markerIcon}})})),1):e._e()],1),e._v(" "),n("div",{staticClass:"checkout-pickup-point-modal__filter"},[n("div",{staticClass:"container checkout-pickup-point-modal__filter-header"},[n("h3",{staticClass:"checkout-pickup-point-modal__filter-header-hl"},[e._v("Выбор пункта выдачи")]),e._v(" "),n("div",{staticClass:"checkout-pickup-point-modal__filter-header-controls"},[n("v-select",{attrs:{placeholder:"Станция метро",options:[]}}),e._v(" "),n("v-select",{attrs:{placeholder:"Тип пункта выдачи","track-by":"id",label:"title",options:e.deliveryMethods,searchable:!1},model:{value:e.selectedDeliveryMethod,callback:function(t){e.selectedDeliveryMethod=t},expression:"selectedDeliveryMethod"}})],1)]),e._v(" "),n("ul",{directives:[{name:"scroll-lock",rawName:"v-scroll-lock",value:e.isOpen,expression:"isOpen"}],staticClass:"checkout-pickup-point-modal__filter-list"},e._l(e.filteredPickupPoints,(function(t){return n("checkout-option-card",{key:t.id,staticClass:"checkout-pickup-point-modal__filter-list-item",attrs:{readonly:""},on:{cardClick:function(n){return e.onSelectPoint(t)}}},[n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))]),e._v(" "),n("p",[e._v(e._s(t.name))]),e._v(" "),n("p",{staticClass:"text-grey text-sm"},[e._v(e._s(t.startDate))])])})),1)])]},proxy:!0}])})}),[],!1,null,null,null).exports;n("Pe8P");function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke={name:"checkout-address-panel",components:{VButton:c.a},data:function(){return{showMap:!1,coords:[55.755814,37.617635],markerIcon:{layout:"default#image",imageHref:Me,imageSize:[24,24],imageOffset:[0,0]}}},computed:Qe({},Object(O.c)(B,["selectedPickupPoint"])),methods:Qe({},Object(O.b)(H.b,[F.a])),mounted:function(){var e=this;setTimeout((function(){return e.showMap=!0}),400)}},We=Object(_.a)(Ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkout-address-panel"},[e.selectedPickupPoint?n("div",{staticClass:"checkout-address-panel__address"},[n("div",{staticClass:"checkout-address-panel__address-info"},[n("div",{staticClass:"checkout-address-panel__address-info-main"},[n("h3",{staticClass:"checkout-address-panel__address-info-main-hl"},[e._v(e._s(e.selectedPickupPoint.title))]),e._v(" "),n("div",[e._v(e._s(e.selectedPickupPoint.name))]),e._v(" "),n("div",[e._v(e._s(e.selectedPickupPoint.phone))])]),e._v(" "),n("div",{staticClass:"checkout-address-panel__address-info-schedule"},[e._v("\n                "+e._s(e.selectedPickupPoint.startDate)+"\n                "),n("ul",{staticClass:"checkout-address-panel__address-info-schedule-list"},e._l(e.selectedPickupPoint.schedule,(function(t){return n("li",{key:t.id,staticClass:"checkout-address-panel__address-info-schedule-item"},[n("div",[e._v(e._s(t.title))]),e._v(" "),n("div",[e._v(e._s(t.time))])])})),0)])]),e._v(" "),n("div",{staticClass:"checkout-address-panel__address-desc"},[n("div",{staticClass:"text-bold"},[e._v("\n                Как добраться\n            ")]),e._v("\n            "+e._s(e.selectedPickupPoint.description)+"\n        ")]),e._v(" "),n("div",{staticClass:"checkout-address-panel__address-payment"},[n("div",{staticClass:"text-bold"},[e._v("\n                Принимаются к оплате\n            ")]),e._v("\n            "+e._s(e.selectedPickupPoint.payment)+"\n        ")]),e._v(" "),n("div",{staticClass:"checkout-address-panel__address-map"},[e.showMap?n("yandex-map",{attrs:{coords:e.selectedPickupPoint.map.coords,zoom:13,controls:[]}},[n("ymap-marker",{key:"selected-point-"+e.selectedPickupPoint.id,attrs:{"marker-id":"selected-point-"+e.selectedPickupPoint.id,coords:e.selectedPickupPoint.map.coords,icon:e.markerIcon}})],1):e._e()],1)]):n("div",{staticClass:"checkout-address-panel__choice"},[n("h3",[e._v("Выберите пункт выдачи заказов")]),e._v(" "),n("v-button",{staticClass:"btn--outline",on:{click:function(t){return e.$emit("changeAddress")}}},[e._v("\n            Выбрать\n        ")])],1)])}),[],!1,null,null,null).exports,Je=(n("BkRI"),n("Y+p1")),Xe=n.n(Je),et=n("suXn"),tt=new p.a({id:"icon-bonus",use:"icon-bonus-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="icon-bonus">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.2115 6.5H7.45831L7.0287 8.66369H11.54L11.3207 9.77877H6.8206L6.39099 11.9425H10.8834L9.58951 18.5H12.4529C15.1534 18.5 17.5 16.6203 17.5 14.1394C17.5 12.0818 15.8433 10.3914 13.7078 9.91369L13.9544 8.66369H16.8162L17.2115 6.5ZM12.4321 16.3363L13.2733 12.0482C14.3962 12.3466 15.1229 13.2211 15.1229 14.1394C15.1229 15.2766 14.0024 16.3363 12.4529 16.3363H12.4321Z" />\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 12C-2.89694e-07 5.37258 5.37258 2.89694e-07 12 0C18.6274 -2.89694e-07 24 5.37258 24 12C24 18.6274 18.6274 24 12 24C5.37259 24 2.89694e-07 18.6274 0 12ZM12 2C6.47716 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5229 22 12C22 6.47716 17.5229 2 12 2Z" />\n</symbol>'});m.a.add(tt),n("d3HE"),n("JUPh"),n("lK0d"),n("fIfu"),n("eZRa"),n("GW+4"),n("k1X8");function nt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){st(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){return ot({},e,{selectedDate:new Date(e.selectedDate),availableDates:e.availableDates.map((function(e){return new Date(e)}))})}function ct(e){var t=e.items;return ot({},e,{items:Object(et.orderBy)(t.map(rt),["selectedDate"],["asc"])})}var it={name:"checkout-product-panel",components:{VSvg:o.a,VLink:s.a,VButton:c.a,VInput:r.a,VCheck:u.a,VSpinner:l.a,CheckoutProductCard:C,CheckoutOptionCard:y,CheckoutDateModal:K,CheckoutAddressModal:Ue,CheckoutPickupPointModal:Ge,CheckoutAddressPanel:We},data:function(){return{bonusAmount:null,certificateCode:null}},computed:ot({},Object(O.d)(["locale"]),{},Object(O.d)(H.b,{isPickupPointModalOpen:function(e){return e[H.a][Ge.name]&&e[H.a][Ge.name].open},isDateModalOpen:function(e){return e[H.a][K.name]&&e[H.a][K.name].open},isAddressModalOpen:function(e){return e[H.a][Ue.name]&&e[H.a][Ue.name].open}}),{},Object(O.c)(B,["availableBonus","recipients","selectedRecipient","receiveMethods","selectedReceiveMethodID","paymentMethods","selectedPaymentMethodID","confirmationTypes","selectedConfirmationTypeID","addresses","selectedAddress","selectedPickupPoint","deliveryTypes","selectedDeliveryType","bonus","certificates","agreement","subscribe","promocode","addressStatus","bonusStatus","certificateStatus","promocodeStatus","receiveMethodStatus"]),{computedDeliveryTypes:function(){return this.deliveryTypes.map(ct)},computedSelectedDeliveryType:function(){return ct(this.selectedDeliveryType)},isReceiveMethodPending:function(){return this.receiveMethodStatus===E.requestStatus.PENDING},isAddressPending:function(){return this.addressStatus===E.requestStatus.PENDING},isBonusPending:function(){return this.bonusStatus===E.requestStatus.PENDING},isCertificatePending:function(){return this.certificateStatus===E.requestStatus.PENDING},isPromocodePending:function(){return this.promocodeStatus===E.requestStatus.PENDING},showPanels:function(){return this.isDelivery?this.selectedAddress:this.selectedPickupPoint},isTablet:function(){return this.$mq.tablet},isDelivery:function(){var e=this.selectedReceiveMethodID;return e===E.receiveMethods.DELIVERY||e===E.receiveMethods.EXPRESS}}),methods:ot({},Object(O.b)(B,["CHANGE_CHUNK_DATE","SET_RECIPIENT","SET_RECEIVE_METHOD","SET_DELIVERY_TYPE","SET_AGREEMENT","SET_SUBSCRIBE","SET_CONFIRMATION_TYPE","SET_ADDRESS","ADD_ADDRESS","ADD_BONUS","DELETE_BONUS","ADD_CERTIFICATE","DELETE_CERTIFICATE","ADD_PROMOCODE","DELETE_PROMOCODE"]),{},Object(O.b)(H.b,[F.a]),{generateChunkNote:function(e){return new Date(e.selectedDate).toLocaleDateString(this.locale,{month:"long",day:"numeric"})},generatePackageNote:function(e){var t=this,n={month:"long",day:"numeric"};if(e.typeID===E.deliveryTypes.CONSOLIDATION){var a=new Date(e.items[0].selectedDate);return"Доставим всё ".concat(a.toLocaleDateString(this.locale,n))}return Array.from(new Set(e.items.map((function(e){return e.selectedDate})))).reduce((function(e,a,o){return e+"".concat(o>0?", ":" ").concat(new Date(a).toLocaleDateString(t.locale,n))}),"Доставим")},onSetDeliveryType:function(e){var t=this.deliveryTypes&&this.deliveryTypes.find((function(t){return t.id===e}));this.SET_DELIVERY_TYPE(t)},onDateChanged:function(e){this.CHANGE_CHUNK_DATE({id:e.id,selectedDate:e.selectedDate[0]})},onChangeDate:function(e){var t=this.selectedDeliveryType.items.find((function(t){return t.id===e})),n={id:t.id,selectedDate:[t.selectedDate],availableDates:nt(t.availableDates)};this[F.a]({name:"checkout-date-modal",open:!0,state:n})},isEqualAddress:function(e,t){return Xe()(e,t)},onChangePickupPoint:function(){this[F.a]({name:Ge.name,open:!0})},onChangeAddress:function(e){this[F.a]({name:Ue.name,open:!0,state:{address:e}})},onAddAddress:function(){this[F.a]({name:Ue.name,open:!0})},onAddressSubmit:function(e){this.ADD_ADDRESS(e)},onAddRecipient:function(){this[F.a]({name:"checkout-recipient-modal",open:!0})}})},ut=Object(_.a)(it,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkout-product-panel"},[n("div",{staticClass:"checkout-product-panel__item"},[e._m(0),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.recipients,(function(t){return n("checkout-option-card",{key:t.id,staticClass:"checkout-product-panel__item-card",attrs:{selected:t.id===e.selectedRecipient.id},on:{cardClick:function(n){return e.SET_RECIPIENT(t)}}},[n("p",[e._v(e._s(t.name))]),e._v(" "),n("p",[e._v(e._s(t.email))]),e._v(" "),n("p",[e._v(e._s(t.phone))])])})),1),e._v(" "),n("v-link",{staticClass:"checkout-product-panel__item-header-link",attrs:{tag:"button"},on:{click:e.onAddRecipient}},[n("v-svg",{attrs:{name:"plus",width:"24",height:"24"}}),e._v(" Добавить нового получателя\n        ")],1)],1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--receive-method"},[n("div",{staticClass:"checkout-product-panel__item-header"},[n("h2",{staticClass:"checkout-product-panel__item-header-hl"},[e._v("\n                Способ получения "),n("v-spinner",{attrs:{width:"24",height:"24",show:e.isReceiveMethodPending}})],1)]),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.receiveMethods,(function(t){return n("checkout-option-card",{key:t.id,staticClass:"checkout-product-panel__item-card",attrs:{selected:t.id===e.selectedReceiveMethodID,readonly:""},on:{cardClick:function(n){return e.SET_RECEIVE_METHOD(t)}}},[n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))]),e._v(" "),n("p",[e._v(e._s(t.price))]),e._v(" "),n("p",{staticClass:"text-grey text-sm"},[e._v(e._s(t.description))])])})),1)]),e._v(" "),n("div",{staticClass:"checkout-product-panel__item"},[n("div",{staticClass:"checkout-product-panel__item-header"},[n("h2",{staticClass:"checkout-product-panel__item-header-hl"},[e._v("\n                "+e._s(e.isDelivery?"Адрес доставки":"Пункт самовывоза")+" \n                "),n("v-spinner",{attrs:{width:"24",height:"24",show:e.isAddressPending}})],1)]),e._v(" "),n("transition",{attrs:{name:"fade-in"}},[e.isDelivery?n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.addresses,(function(t){return n("checkout-option-card",{key:t.region_guid+"-"+t.city_guid+"-"+t.house,staticClass:"checkout-product-panel__item-card",attrs:{selected:e.selectedAddress&&e.isEqualAddress(e.selectedAddress,t)},on:{cardClick:function(n){return e.SET_ADDRESS(t)},btnClick:function(n){return e.onChangeAddress(t)}}},[e._v("\n                    "+e._s(t.city+", "+(t.street?t.street+", ":"")+t.house)+"\n                ")])})),1):n("checkout-address-panel",{on:{changeAddress:e.onChangePickupPoint}})],1),e._v(" "),e.isDelivery?n("v-link",{staticClass:"checkout-product-panel__item-header-link",attrs:{tag:"button"},on:{click:e.onAddAddress}},[n("v-svg",{attrs:{name:"plus",width:"24",height:"24"}}),e._v(" Добавить новый адрес\n        ")],1):e.selectedPickupPoint?n("v-link",{staticClass:"checkout-product-panel__item-header-link",attrs:{tag:"button"},on:{click:e.onChangePickupPoint}},[n("v-svg",{attrs:{name:"pin",width:"16",height:"16"}}),e._v("  Выбрать другой\n        ")],1):e._e()],1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--delivery"},[e._m(1),e._v(" "),n("transition",{attrs:{name:"fade-in",mode:"out-in"}},[e.showPanels?n("div",{key:"not-empty"},[e.computedDeliveryTypes&&e.computedDeliveryTypes.length>1?n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.computedDeliveryTypes,(function(t){return n("checkout-option-card",{key:"delivery-type-"+t.id+"-"+t.methodID,staticClass:"checkout-product-panel__item-card",attrs:{selected:t.id===e.selectedDeliveryType.id,readonly:""},on:{cardClick:function(n){return e.onSetDeliveryType(t.id)}}},[n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))]),e._v(" "),n("p",[e._v(e._s(t.description))]),e._v(" "),n("p",{staticClass:"text-grey text-sm"},[e._v(e._s(e.generatePackageNote(t)))])])})),1):e._e(),e._v(" "),e.selectedDeliveryType?n("transition-group",{attrs:{tag:"ul",name:"chunk-item"}},e._l(e.computedSelectedDeliveryType.items,(function(t){return n("li",{key:t.id,staticClass:"checkout-product-panel__item checkout-product-panel__item--child"},[n("div",{staticClass:"checkout-product-panel__item-header"},[n("h3",{staticClass:"checkout-product-panel__item-header-hl"},[e._v("\n                                "+e._s(e.generateChunkNote(t))+"\n                            ")]),e._v(" "),t.availableDates&&t.availableDates.length>1?n("v-link",{staticClass:"checkout-product-panel__item-header-link",attrs:{tag:"button"},on:{click:function(n){return e.onChangeDate(t.id)}}},[n("v-svg",{attrs:{name:"edit",width:"16",height:"16"}}),e._v(" "),e.isTablet?e._e():[e._v("\n                                      Изменить дату\n                                ")]],2):e._e()],1),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(t.items,(function(e){return n("checkout-product-card",{key:e.id,staticClass:"checkout-product-panel__item-card",attrs:{name:e.name,image:e.image}})})),1)])})),0):e._e()],1):n("div",{key:"empty",staticClass:"checkout-product-panel__item-empty"},[n("h3",{staticClass:"text-bold"},[e._v("Выберите адрес")])])])],1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--payment"},[e._m(2),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.paymentMethods,(function(t){return n("checkout-option-card",{key:t.id,staticClass:"checkout-product-panel__item-card",attrs:{selected:t.id===e.selectedPaymentMethodID,readonly:""}},[n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))]),e._v(" "),n("br"),e._v(" "),"card"===t.type?n("div",{staticClass:"checkout-product-panel__item-payment"},[n("v-svg",{attrs:{name:"visa",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"mastercard",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"mir",width:"40",height:"24"}})],1):e._e()])})),1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--child checkout-product-panel__item--bonus"},[n("div",{staticClass:"checkout-product-panel__item-header"},[n("h3",{staticClass:"checkout-product-panel__item-header-hl"},[n("v-svg",{attrs:{name:"bonus",width:"24",height:"24"}}),e._v(" Оплата бонусами \n                    "),n("v-spinner",{attrs:{width:"24",height:"24",show:e.isBonusPending}})],1)]),e._v(" "),e.bonus?n("div",{staticClass:"checkout-product-panel__item-card"},[n("span",[e._v("\n                    Будет использовано "+e._s(e.bonus)+" бонусных баллов \n                    "),n("span",{staticClass:"text-grey"},[e._v("(1 бонус = 1 рубль)")])]),e._v(" "),n("v-link",{staticClass:"checkout-product-panel__item-card-link",attrs:{tag:"button"},on:{click:e.DELETE_BONUS}},[e._v("\n                    Отменить\n                ")])],1):n("div",{staticClass:"checkout-product-panel__item-controls"},[e.availableBonus>0?[n("v-input",{staticClass:"checkout-product-panel__item-controls-input",attrs:{type:"number",min:"1",max:e.availableBonus,placeholder:"Сколько бонусов использовать?"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.ADD_BONUS(e.bonusAmount))}},model:{value:e.bonusAmount,callback:function(t){e.bonusAmount=t},expression:"bonusAmount"}}),e._v(" "),n("v-button",{staticClass:"btn--outline checkout-product-panel__item-controls-btn",attrs:{disabled:!e.bonusAmount},on:{click:function(t){return e.ADD_BONUS(e.bonusAmount)}}},[e._v("\n                        Применить\n                    ")])]:e._e(),e._v(" "),n("span",{staticClass:"checkout-product-panel__item-controls-text"},[e._v("\n                    На вашем счёте: \n                    "),n("strong",{staticClass:"text-bold"},[e._v(e._s(e.availableBonus)+" бонусов")]),e._v(" "),n("br",{directives:[{name:"show",rawName:"v-show",value:e.isTablet,expression:"isTablet"}]}),e._v(" "),n("span",{staticClass:"text-grey"},[e._v("(1 бонус = 1 рубль)")])])],2)]),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--child checkout-product-panel__item--sertificate"},[n("div",{staticClass:"checkout-product-panel__item-header"},[n("h3",{staticClass:"checkout-product-panel__item-header-hl"},[n("v-svg",{attrs:{name:"gift",width:"24",height:"24"}}),e._v(" Оплата сертификатом \n                    "),n("v-spinner",{attrs:{width:"24",height:"24",show:e.isCertificatePending}})],1)]),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.certificates,(function(t){return n("li",{key:t.code,staticClass:"checkout-product-panel__item-card"},[n("span",[e._v("\n                        Будет оплачено "+e._s(t.amount)+" подарочным сертификатом —\n                        "+e._s(t.code)+"\n                    ")]),e._v(" "),n("v-link",{staticClass:"checkout-product-panel__item-card-link",attrs:{tag:"button"},on:{click:function(n){return e.DELETE_CERTIFICATE(t.code)}}},[e._v("\n                        Отменить\n                    ")])],1)})),0),e._v(" "),n("div",{staticClass:"checkout-product-panel__item-controls"},[n("v-input",{staticClass:"checkout-product-panel__item-controls-input",attrs:{placeholder:"Введите номер сертификата"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.ADD_CERTIFICATE(e.certificateCode))}},model:{value:e.certificateCode,callback:function(t){e.certificateCode=t},expression:"certificateCode"}}),e._v(" "),n("v-button",{staticClass:"btn--outline checkout-product-panel__item-controls-btn",attrs:{disabled:!e.certificateCode},on:{click:function(t){return e.ADD_CERTIFICATE(e.certificateCode)},mousedown:function(e){e.preventDefault()}}},[e._v("\n                    Активировать\n                ")])],1)]),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item checkout-product-panel__item--child checkout-product-panel__item--settings"},[n("div",{staticClass:"checkout-product-panel__item-panel"},[n("v-check",{staticClass:"checkout-product-panel__item-panel-check",attrs:{id:"check-promo",checked:e.subscribe,name:"promo"},on:{change:function(t){e.SET_SUBSCRIBE(Number(t))}}},[e._v("\n                    Сообщать мне об акциях, скидках и специальных предложениях\n                ")]),e._v(" "),n("v-check",{staticClass:"checkout-product-panel__item-panel-check",attrs:{id:"check-agreement",checked:e.agreement,name:"agreement"},on:{change:function(t){e.SET_AGREEMENT(Number(t))}}},[e._v("\n                    Я согласен с условиями "),n("router-link",{attrs:{to:"/"}},[e._v("заказа и доставки")])],1)],1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item-panel"},e._l(e.confirmationTypes,(function(t){return n("v-check",{key:t.id,staticClass:"checkout-product-panel__item-panel-check",attrs:{type:"radio",id:"check-accept-"+t.id,"model-value":e.selectedConfirmationTypeID,value:t.id,name:t.type},on:{change:function(t){return e.SET_CONFIRMATION_TYPE(t)}}},[e._v("\n                    "+e._s(t.title)+"\n                ")])})),1)])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.isPickupPointModalOpen?n("checkout-pickup-point-modal"):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.isDateModalOpen?n("checkout-date-modal",{on:{changed:e.onDateChanged}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.isAddressModalOpen?n("checkout-address-modal",{on:{addressSubmit:e.onAddressSubmit}}):e._e()],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"checkout-product-panel__item-header"},[t("h2",{staticClass:"checkout-product-panel__item-header-hl"},[this._v("Получатель")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"checkout-product-panel__item-header"},[t("h2",{staticClass:"checkout-product-panel__item-header-hl"},[this._v("Дата и время доставки")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"checkout-product-panel__item-header"},[t("h2",{staticClass:"checkout-product-panel__item-header-hl"},[this._v("Способ оплаты")])])}],!1,null,null,null).exports,lt=n("8TZ/"),dt=n("oXaW"),pt=n("VgBE");n("PnIt"),n("vcui");function ht(e,t,n,a,o,s,r){try{var c=e[s](r),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(a,o)}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t,yt,kt={name:"checkout",components:{VSvg:o.a,VLink:s.a,VButton:c.a,VInput:r.a,VSticky:i.a,CheckoutProductPanel:ut},data:function(){return{inputPromocode:null}},computed:ft({},Object(O.d)(lt.c,[lt.a]),{},Object(O.d)(B,["checkoutType","checkoutData"]),{},Object(O.d)("route",{checkoutType:function(e){return e.params.type}}),{},Object(O.c)(B,["promocode","summary"])),methods:ft({},Object(O.b)(B,["ADD_PROMOCODE","DELETE_PROMOCODE","COMMIT_DATA"]),{onCommit:(_t=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.COMMIT_DATA();case 3:t=e.sent,document.location.href=t.paymentUrl,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),w.$logger.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})),yt=function(){var e=this,t=arguments;return new Promise((function(n,a){var o=_t.apply(e,t);function s(e){ht(o,n,a,s,r,"next",e)}function r(e){ht(o,n,a,s,r,"throw",e)}s(void 0)}))},function(){return yt.apply(this,arguments)}),prepareBonus:function(e){return Object(pt.d)(e)}}),beforeRouteEnter:function(e,t,n){!!w.$store._modulesNamespaceMap["".concat(B,"/")]||w.$store.registerModule(B,V,{preserveState:!!w.$store.state.checkout});var a=e.params.type;return w.$store.state.checkout.checkoutType===a?n():(w.$progress.start(),w.$store.dispatch("".concat(B,"/").concat("FETCH_CHECKOUT_DATA"),a).then((function(){return n((function(e){return w.$progress.finish()}))})))},beforeRouteUpdate:function(e,t,n){var a=this,o=w.$store.getters["".concat(lt.c,"/").concat(dt.a)];console.log(o),console.log(o);var s=e.params.type;w.$store.state.checkout.checkoutType!==s&&(this.$progress.start(),this.$store.dispatch("".concat(B,"/").concat("FETCH_CHECKOUT_DATA"),s).then((function(){return a.$progress.finish()}))),n()},beforeRouteLeave:function(e,t,n){n()}},bt=Object(_.a)(kt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section checkout-view"},[n("div",{staticClass:"container"},[n("div",{staticClass:"checkout-view__header"},[n("h1",{staticClass:"checkout-view__header-hl"},[e._v("\n                Оформление заказа: Продукты\n            ")]),e._v(" "),n("v-link",{staticClass:"checkout-view__header-link",attrs:{to:"/cart"}},[n("v-svg",{attrs:{name:"arrow-small",width:"24",height:"24"}}),e._v("  Вернуться в корзину\n            ")],1)],1)]),e._v(" "),n("section",{staticClass:"section checkout-view__main"},[n("div",{staticClass:"container checkout-view__main-container"},[n("div",{staticClass:"checkout-view__main-body"},["product"===e.checkoutType?n("checkout-product-panel"):e._e()],1),e._v(" "),n("v-sticky",{staticClass:"checkout-view__main-sticky",scopedSlots:e._u([{key:"sticky",fn:function(){return[n("div",{staticClass:"checkout-view__main-panel"},[n("p",{staticClass:"text-grey checkout-view__main-panel-info"},[e._v("\n                            Внимание: мастер-классы можете оплатить после завершения оплаты продуктов\n                        ")]),e._v(" "),n("p",{staticClass:"checkout-view__main-panel-line"},[e._v("\n                            Сумма заказа: "+e._s(e.$t("cart.summary.type."+e.checkoutType))+"\n                            "),n("span",[e._v(e._s(e.summary.sum))])]),e._v(" "),n("p",{staticClass:"checkout-view__main-panel-line"},[e._v("\n                            Скидка по промокоду "),n("span",[e._v(e._s(e.summary.promoDiscount))])]),e._v(" "),n("p",{staticClass:"checkout-view__main-panel-line"},[e._v("\n                            Оплата бонусами "),n("span",[e._v(e._s(e.summary.bonusDiscount))])]),e._v(" "),n("p",{staticClass:"checkout-view__main-panel-line"},[e._v("\n                            Оплата подарочным сертификатом "),n("span",[e._v(e._s(e.summary.certDiscount))])]),e._v(" "),n("p",{staticClass:"checkout-view__main-panel-line"},[e._v("\n                            Доставка "),n("span",[e._v(e._s(e.summary.delivery))])]),e._v(" "),n("div",{staticClass:"checkout-view__main-panel-total"},[n("p",{staticClass:"text-bold checkout-view__main-panel-line"},[e._v("\n                                Итого "),n("span",[e._v(e._s(e.summary.total))])]),e._v(" "),n("p",{staticClass:"text-grey text-sm checkout-view__main-panel-line"},[e._v("\n                                Будет начислено\n                                "),n("span",[e._v("\n                                    "+e._s(e.summary.bonusGet>0?"+ "+e.prepareBonus(e.summary.bonusGet):e.prepareBonus(e.summary.bonusGet))+"\n                                     бонусов\n                                ")])]),e._v(" "),n("p",{staticClass:"text-grey text-sm checkout-view__main-panel-line"},[e._v("\n                                Будет списано\n                                "),n("span",[e._v("\n                                    "+e._s(e.summary.bonusSpent>0?"- "+e.prepareBonus(e.summary.bonusSpent):e.prepareBonus(e.summary.bonusSpent))+"\n                                     бонусов\n                                ")])])]),e._v(" "),e.promocode?n("div",{staticClass:"checkout-view__main-panel-promo checkout-view__main-panel-promo--success"},[n("div",{staticClass:"checkout-view__main-panel-promo-icon"},[n("v-svg",{attrs:{name:"check-small",width:"16",height:"16"}})],1),e._v(" "),n("div",[e._v("\n                                Промокод "+e._s(e.promocode)+" применён\n                                "),n("v-link",{staticClass:"checkout-view__main-panel-promo-link",attrs:{tag:"button"},on:{click:function(t){return e.DELETE_PROMOCODE(e.promocode)}}},[e._v("\n                                    Отменить\n                                ")])],1)]):n("div",{staticClass:"checkout-view__main-panel-promo"},[n("v-input",{staticClass:"checkout-view__main-panel-promo-input",attrs:{placeholder:"Введите промокод"},model:{value:e.inputPromocode,callback:function(t){e.inputPromocode=t},expression:"inputPromocode"}}),e._v(" "),n("v-button",{staticClass:"btn--outline checkout-view__main-panel-promo-btn",on:{click:function(t){return e.ADD_PROMOCODE(e.inputPromocode)}}},[e._v("\n                                Применить\n                            ")])],1),e._v(" "),n("v-button",{staticClass:"checkout-view__main-panel-submit",on:{click:e.onCommit}},[e._v("\n                            Перейти к оплате\n                        ")])],1)]},proxy:!0}])})],1)])])}),[],!1,null,null,null);t.default=bt.exports},NCbh:function(e,t,n){},OmJt:function(e,t,n){},Pe8P:function(e,t,n){},k1X8:function(e,t,n){},tfXw:function(e,t,n){},vcui:function(e,t,n){},vyCa:function(e,t,n){}}]);