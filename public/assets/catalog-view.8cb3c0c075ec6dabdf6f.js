(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/Rcj":function(t,e,a){"use strict";a.r(e);var n=a("NDiG"),r=a("i2Ud"),i=(a("o3vK"),a("+gqB")),o=(a("nuHk"),a("pFko")),c=a("0OV/"),s=a("/Q9p"),l=a("LqtR"),u=a("W6hq"),g=a("3bB/"),p=a("zUOt"),v=a("pZQa"),d=a("L2JU"),m=a("BZIu"),_=a("sEfC"),f=a.n(_);a("4eDr"),a("9bRU");function b(t,e,a,n,r,i,o){try{var c=t[i](o),s=c.value}catch(t){return void a(t)}c.done?e(s):Promise.resolve(s).then(n,r)}function h(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var i=t.apply(e,a);function o(t){b(i,n,r,o,c,"next",t)}function c(t){b(i,n,r,o,c,"throw",t)}o(void 0)}))}}function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(a,!0).forEach((function(e){y(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var x,O,k="".concat(g.c.name,"/").concat(v.a),P=0,$={name:"catalog",components:{VSvg:n.a,VButton:r.a,VSelect:o.a,VPagination:i.a,CatalogFilter:c.a,CatalogProductCard:s.a,CatalogBannerCard:l.a},data:function(){var t=["Сначала подороже"];return{sortValue:t[0],sortOptions:t}},computed:C({},Object(d.c)(g.c.name,[p.d,p.b,p.c,p.e,p.f,p.a]),{},Object(d.d)(g.c.name,[g.b,g.a]),{},Object(d.d)("route",{code:function(t){return t.params.code}})),methods:C({},Object(d.b)(g.c.name,[v.b,v.a]),{onBeforeEnterItems:function(t){t.dataset.index=P,P+=1,t.style.opacity=0},itemAnimation:function(t,e){return new Promise((function(a,n){try{setTimeout((function(){requestAnimationFrame((function(){t.style.opacity=1,a()}))}),e)}catch(t){n(t)}}))},onEnterItems:(O=h(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=100*e.dataset.index,t.next=3,this.itemAnimation(e,n);case 3:a();case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return O.apply(this,arguments)}),onAfterEnterItems:function(t){delete t.dataset.index,P=0},onLeaveItems:function(t,e){requestAnimationFrame((function(){t.style.opacity=0,e()}))},onClickDeleteTag:function(t){var e=this.routeSegments,a=this.code;if(e.includes(t)){var n=e.indexOf(t);-1!==n&&e.splice(n,1),this.$router.replace({path:Object(u.a)(a,e)})}}}),beforeRouteEnter:(x=h(regeneratorRuntime.mark((function t(e,a,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.params.code,!!m.$store._modulesNamespaceMap["".concat(g.c.name,"/")]||m.$store.registerModule(g.c.name,g.c,{preserveState:!!m.$store.state.catalog}),m.$store.state.catalog.categoryCode!==r){t.next=8;break}n(),t.next=19;break;case 8:return t.prev=8,m.$progress.start(),t.next=12,m.$store.dispatch(k,{code:r});case 12:n((function(t){return m.$progress.finish()})),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(8),m.$progress.fail(),m.$logger.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[8,15]])}))),function(t,e,a){return x.apply(this,arguments)}),beforeRouteUpdate:function(t,e,a){this.debounce_fetchCatalog(t,e),a()},beforeMount:function(){var t=this;this.debounce_fetchCatalog=f()(function(){var e=h(regeneratorRuntime.mark((function e(a,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.$store.state.catalog.categoryCode,i=a.params.code,t.$progress.start(),r===i){e.next=9;break}return e.next=7,t[v.a]({code:i});case 7:e.next=11;break;case 9:return e.next=11,t[v.b]({code:i});case 11:t.$progress.finish(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),m.$logger.error("debounce_fetchCatalog",e.t0),t.$progress.fail();case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),500)}},j=a("KHd+");a.d(e,"DISPATCH_FETCH_CATALOG_DATA",(function(){return k}));var E=Object(j.a)($,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section catalog-view"},[a("div",{staticClass:"container catalog-view__header"},[a("transition-group",{staticClass:"section catalog-view__breadcrumbs",attrs:{tag:"ol",name:"fade-in"}},[a("li",{key:"main",staticClass:"catalog-view__breadcrumbs-item"},[a("router-link",{attrs:{to:"/"}},[t._v(t._s("Главная"))])],1),t._v(" "),a("li",{key:"all",staticClass:"catalog-view__breadcrumbs-item"},[a("router-link",{attrs:{to:"/catalog"}},[t._v(t._s("Каталог"))])],1),t._v(" "),t._l(t.activeCategories,(function(e){return a("li",{key:e.id,staticClass:"catalog-view__breadcrumbs-item"},[a("router-link",{attrs:{to:"/catalog/"+e.code}},[t._v(t._s(e.name))])],1)}))],2),t._v(" "),a("catalog-banner-card",{staticClass:"catalog-view__banner",attrs:{"banner-id":t.banner.id,image:t.banner.image,"upper-text":t.banner.upperText,"bottom-text":t.banner.bottomText,title:t.banner.title,"btn-text":t.banner.btnText}})],1),t._v(" "),a("section",{staticClass:"section"},[a("div",{staticClass:"container catalog-view__grid"},[a("div",{staticClass:"catalog-view__side-panel"},[a("catalog-filter",{staticClass:"catalog-view__side-panel-filters"})],1),t._v(" "),a("div",{staticClass:"catalog-view__main"},[a("div",{staticClass:"catalog-view__main-header"},[a("div",{staticClass:"catalog-view__main-header-title"},[a("h1",{staticClass:"catalog-view__main-header-hl"},[t._v("\n                            "+t._s(t.activeCategory?t.activeCategory.name:"Каталог")+"\n                        ")]),t._v(" "),a("p",{staticClass:"text-grey catalog-view__main-header-text"},[t._v("489 товаров")])]),t._v(" "),a("v-select",{staticClass:"catalog-view__main-header-sort",attrs:{options:t.sortOptions,searchable:!1,allowEmpty:!1},model:{value:t.sortValue,callback:function(e){t.sortValue=e},expression:"sortValue"}})],1),t._v(" "),a("transition-group",{staticClass:"catalog-view__main-tags",attrs:{tag:"ul",name:"tag-item"}},t._l(t.activeTags,(function(e,n){return a("li",{key:e.code,staticClass:"catalog-view__main-tags-item",attrs:{"data-index":n}},[t._v("\n                        "+t._s(e.name)+" \n                        "),a("button",{staticClass:"catalog-view__main-tags-delete-btn",on:{click:function(a){return t.onClickDeleteTag(e.code)}}},[a("v-svg",{attrs:{name:"cross-small",width:"24",height:"24"}})],1)])})),0),t._v(" "),a("transition-group",{staticClass:"catalog-view__main-grid",attrs:{tag:"ul",name:"catalog-item"},on:{"before-enter":t.onBeforeEnterItems,enter:t.onEnterItems,"after-enter":t.onAfterEnterItems,leave:t.onLeaveItems}},t._l(t.items,(function(e){var n;return a("li",{key:e.id+"-"+e.type,staticClass:"catalog-view__main-grid-item",class:(n={},n["catalog-view__main-grid-item--"+e.type]=e.type,n)},["product"===e.type?a("catalog-product-card",{staticClass:"catalog-view__main-grid-card",attrs:{"product-id":e.id,name:e.name,href:"/catalog"+(t.activeCategory?"/"+t.activeCategory.code:"")+"/"+e.code,image:e.image,price:e.price,"old-price":e.oldPrice,tags:e.tags,rating:e.rating}}):t._e(),t._v(" "),"banner"===e.type?a("catalog-banner-card",{staticClass:"catalog-view__main-grid-card",attrs:{"banner-id":e.id,title:e.title,image:e.image,"upper-text":e.upperText,"btn-text":e.btnText}}):t._e()],1)})),0),t._v(" "),t.pagesCount>1?a("div",{staticClass:"catalog-view__main-controls"},[t.activePage<t.pagesCount?a("v-button",{staticClass:"btn--outline catalog-view__main-controls-btn",attrs:{to:{path:t.$route.path,query:{page:t.activePage+1}}}},[t._v("\n                        Показать ещё\n                    ")]):t._e(),t._v(" "),a("v-pagination",{attrs:{value:t.activePage,"page-count":t.pagesCount},on:{input:function(e){return t.$router.push({path:t.$route.path,query:{page:e}})}}})],1):t._e()],1)])])])}),[],!1,null,null,null);e.default=E.exports},"9bRU":function(t,e,a){}}]);