(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{DbVC:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("NDiG"),i=n("i2Ud"),o=n("o3vK"),a=n("KQVR"),s=n("a6oV"),c=n("L2JU"),u=n("55Sm"),l=n("jDKC"),d=n("sEfC"),f=n.n(d);n("vXAK");function p(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v="preference-edit-modal",_={name:v,components:{VSvg:r.a,VButton:i.a,VCheck:o.a,VInput:a.a,GeneralModal:s.a},data:function(){return{filterString:"",selectedEntities:[]}},computed:b({},Object(c.d)(u.b,{modalState:function(e){return e[u.a][v]&&e[u.a][v].state||{availableEntities:[],entities:[]}}}),{type:function(){return this.modalState.type},data:function(){return this.modalState.data},filteredEntities:function(){var e=this,t=(this.filterString||"").toLowerCase();return this.modalState.availableEntities.filter((function(n){return!e.entities.some((function(e){return e.id===n.id}))&&(n.name||"").toLowerCase().includes(t)}))},entities:function(){return this.modalState.entities},header:function(){switch(this.type){case"brands":return"Добавить бренды";case"categories":return"Добавить категории";default:return"Добавить сущности"}},title:function(){switch(this.type){case"brands":return"Выберите бренды";case"categories":return"Выберите категории";default:return"Выберите сущности"}},isTablet:function(){return this.$mq.tablet}}),methods:b({},Object(c.b)(u.b,[l.a]),{isChecked:function(e){return this.selectedEntities.some((function(t){return t.id===e}))},onFilterChange:function(e){this.filterString=e},onCheckedChanged:function(e,t){if(e)this.selectedEntities.push(t);else{var n=this.selectedEntities.indexOf(t);-1!==n&&this.selectedEntities.splice(n,1)}},onSubmit:function(){var e=[].concat(p(this.entities.map((function(e){return e.id}))),p(this.selectedEntities.map((function(e){return e.id}))));this.$emit("submit",{type:this.type,items:e}),this.onClose()},onClose:function(){this[l.a]({name:v,open:!1})}}),beforeMount:function(){this.debounce_onFilterChange=f()(this.onFilterChange,300)}},g=n("KHd+"),C=Object(g.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("general-modal",{staticClass:"preference-edit-modal",attrs:{type:"sm",header:e.header,"is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[n("h3",{staticClass:"preference-edit-modal__hl"},[e._v(e._s(e.header))]),e._v(" "),n("v-input",{staticClass:"preference-edit-modal__input",on:{input:e.debounce_onFilterChange},scopedSlots:e._u([{key:"after",fn:function(){return[n("v-svg",{attrs:{name:"search-middle",width:"24",height:"24"}})]},proxy:!0}])}),e._v(" "),n("h6",{staticClass:"preference-edit-modal__title"},[e._v(e._s(e.title))]),e._v(" "),n("ul",{staticClass:"preference-edit-modal__list"},e._l(e.filteredEntities,(function(t){return n("li",{key:t.id,staticClass:"preference-edit-modal__list-item"},[n("v-check",{key:t.id,staticClass:"preference-edit-modal__list-check",attrs:{name:e.type,id:e.type+"-"+t.id,value:t.id,checked:e.isChecked(t.id)},on:{change:function(n){return e.onCheckedChanged(n,t)}}},[e._v("\n                    "+e._s(t.name)+"\n                ")])],1)})),0),e._v(" "),n("div",{staticClass:"preference-edit-modal__submit"},[n("v-button",{staticClass:"preference-edit-modal__submit-btn",on:{click:e.onSubmit}},[e._v("\n                Добавить\n            ")])],1)]},proxy:!0}])})}),[],!1,null,null,null);t.b=C.exports},vXAK:function(e,t,n){}}]);