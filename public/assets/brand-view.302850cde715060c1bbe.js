(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"8C+g":function(t,e,n){"use strict";n.r(e);var a=n("NDiG"),r=n("i2Ud"),i=(n("o3vK"),n("+gqB")),o=(n("nuHk"),n("pFko")),s=n("0OV/"),c=n("/Q9p"),u=n("LqtR"),l=n("3bB/"),d=n("zUOt"),p=n("pZQa"),v=n("L2JU"),f=n("BZIu"),g=n("sEfC"),b=n.n(g);n("4eDr"),n("Fkbr");function m(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(t,e,n,a,r,i,o){try{var s=t[i](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,r)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(t){_(i,a,r,o,s,"next",t)}function s(t){_(i,a,r,o,s,"throw",t)}o(void 0)}))}}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(n,!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O,x,k="".concat(l.c.name,"/").concat(p.a),$=0,P={name:"brand",components:{VSvg:a.a,VButton:r.a,VSelect:o.a,VPagination:i.a,CatalogFilter:s.a,CatalogProductCard:c.a,CatalogBannerCard:u.a},data:function(){var t=["Сначала подороже"];return{sortValue:t[0],sortOptions:t}},computed:y({},Object(v.c)(l.c.name,[d.d,d.b,d.c,d.e]),{},Object(v.d)(l.c.name,[l.b]),{},Object(v.d)("route",{brandCode:function(t){return t.params.brandCode},code:function(t){return t.params.code}})),methods:y({},Object(v.b)(l.c.name,[p.b,p.a]),{onBeforeEnterItems:function(t){t.dataset.index=$,$+=1,t.style.opacity=0},itemAnimation:function(t,e){return new Promise((function(n,a){try{setTimeout((function(){requestAnimationFrame((function(){t.style.opacity=1,n()}))}),e)}catch(t){a(t)}}))},onEnterItems:(x=h(regeneratorRuntime.mark((function t(e,n){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=100*e.dataset.index,t.next=3,this.itemAnimation(e,a);case 3:n();case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return x.apply(this,arguments)}),onAfterEnterItems:function(t){delete t.dataset.index,$=0},onLeaveItems:function(t,e){requestAnimationFrame((function(){t.style.opacity=0,e()}))},onClickDeleteTag:function(t){var e=this.$route.path.split("/").slice(4);if(e.includes(t)){var n=e.indexOf(t);-1!==n&&e.splice(n,1);var a=e.length>0?"/brand/".concat(this.brandCode,"/").concat(this.code,"/filters"):"/brand/".concat(this.brandCode,"/").concat(this.code);this.$router.replace({path:a.concat.apply(a,m(e.map((function(t){return"/".concat(t)}))))})}}}),beforeRouteEnter:(O=h(regeneratorRuntime.mark((function t(e,n,a){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.params.code,!!f.$store._modulesNamespaceMap["".concat(l.c.name,"/")]||f.$store.registerModule(l.c.name,l.c,{preserveState:!!f.$store.state.catalog}),f.$store.state.catalog.categoryCode!==r){t.next=8;break}a(),t.next=19;break;case 8:return t.prev=8,f.$progress.start(),t.next=12,f.$store.dispatch(k,{code:r});case 12:a((function(t){return f.$progress.finish()})),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(8),f.$progress.fail(),f.$logger.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[8,15]])}))),function(t,e,n){return O.apply(this,arguments)}),beforeRouteUpdate:function(t,e,n){this.debounce_fetchCatalog(t,e),n()},beforeMount:function(){var t=this;this.debounce_fetchCatalog=b()(function(){var e=h(regeneratorRuntime.mark((function e(n,a){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.$store.state.catalog.categoryCode,i=n.params.code,t.$progress.start(),r===i){e.next=9;break}return e.next=7,t[p.a]({code:i});case 7:e.next=11;break;case 9:return e.next=11,t[p.b]({code:i});case 11:t.$progress.finish(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),f.$logger.error("debounce_fetchCatalog",e.t0),t.$progress.fail();case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),500)}},j=n("KHd+");n.d(e,"DISPATCH_FETCH_CATALOG_DATA",(function(){return k}));var A=Object(j.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section brand-view"},[t._m(0),t._v(" "),n("section",{staticClass:"section brand-view__header"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"brand-view__header-hl"},[t._v(t._s(t.activeCategory?t.activeCategory.name:"Каталог"))]),t._v(" "),n("p",{staticClass:"text-grey brand-view__header-text"},[t._v("489 товаров")])])]),t._v(" "),n("section",{staticClass:"section"},[n("div",{staticClass:"container brand-view__grid"},[n("div",{staticClass:"brand-view__side-panel"},[n("catalog-filter",{staticClass:"brand-view__side-panel-filters"})],1),t._v(" "),n("div",{staticClass:"brand-view__main"},[n("transition-group",{staticClass:"brand-view__main-tags",attrs:{tag:"ul",name:"tag-item"}},t._l(t.activeTags,(function(e,a){return n("li",{key:e.code,staticClass:"brand-view__main-tags-item",attrs:{"data-index":a}},[t._v("\n                        "+t._s(e.name)+" \n                        "),n("button",{staticClass:"brand-view__main-tags-delete-btn",on:{click:function(n){return t.onClickDeleteTag(e.code)}}},[n("v-svg",{attrs:{name:"cross-small",width:"24",height:"24"}})],1)])})),0),t._v(" "),n("v-select",{staticClass:"brand-view__main-sort",attrs:{options:t.sortOptions,searchable:!1,allowEmpty:!1},model:{value:t.sortValue,callback:function(e){t.sortValue=e},expression:"sortValue"}}),t._v(" "),n("transition-group",{staticClass:"brand-view__main-grid",attrs:{tag:"ul",name:"catalog-item"},on:{"before-enter":t.onBeforeEnterItems,enter:t.onEnterItems,"after-enter":t.onAfterEnterItems,leave:t.onLeaveItems}},t._l(t.items,(function(e){var a;return n("li",{key:e.id+"-"+e.type,staticClass:"brand-view__main-grid-item",class:(a={},a["brand-view__main-grid-item--"+e.type]=e.type,a)},["product"===e.type?n("catalog-product-card",{staticClass:"brand-view__main-grid-card",attrs:{"product-id":e.id,name:e.name,href:"/catalog"+(t.activeCategory?"/"+t.activeCategory.code:"")+"/"+e.code,image:e.image,price:e.price,"old-price":e.oldPrice,tags:e.tags,rating:e.rating}}):t._e(),t._v(" "),"banner"===e.type?n("catalog-banner-card",{staticClass:"brand-view__main-grid-card",attrs:{"banner-id":e.id,title:e.title,image:e.image,"upper-text":e.upperText,"btn-text":e.btnText}}):t._e()],1)})),0),t._v(" "),t.pagesCount>1?n("div",{staticClass:"brand-view__main-controls"},[t.activePage<t.pagesCount?n("v-button",{staticClass:"btn--outline brand-view__main-controls-btn",attrs:{to:{path:t.$route.path,query:{page:t.activePage+1}}}},[t._v("\n                        Показать ещё\n                    ")]):t._e(),t._v(" "),n("v-pagination",{attrs:{value:t.activePage,"page-count":t.pagesCount},on:{input:function(e){return t.$router.push({path:t.$route.path,query:{page:e}})}}})],1):t._e()],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("ul",{staticClass:"section brand-view__breadcrumbs"},[e("li",[this._v("Губная помада")])])])}],!1,null,null,null);e.default=A.exports},Fkbr:function(t,e,n){}}]);