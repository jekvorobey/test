(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"B/pr":function(t,e,n){},cKjI:function(t,e,n){},o1PI:function(t,e,n){"use strict";n.r(e);var s=n("NDiG"),o=n("7cXU"),r=n("i2Ud"),a=n("PZpB"),i=n("qjh8"),c=n("VKYi"),l=n("a6oV"),d=n("L2JU"),u=n("55Sm"),f=n("jDKC"),m=n("2JJK");n("cKjI");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=m.modalName.profile.CONFIRMATION,_={name:h,components:{VButton:r.a,GeneralModal:l.a},computed:b(b({},Object(d.d)(u.b,{modalState:function(t){return t[u.a][h]&&t[u.a][h].state||{}}})),{},{isTablet:function(){return this.$mq.tablet},title:function(){return this.modalState.title||"Подтвердить?"},message:function(){return this.modalState.message||"Подтвердите действие"},btnCancelText:function(){return this.modalState.btnCancelText||"Отменить"},btnSubmitText:function(){return this.modalState.btnSubmitText||"Подтвердить"}}),methods:b(b({},Object(d.b)(u.b,[f.a])),{},{onClose:function(){this.$emit("close"),this[f.a]({name:h,open:!1})},onSubmit:function(){var t=this.modalState.additionalArgs;this.$emit("submit",t),this.onClose()}})},O=n("KHd+"),g=Object(O.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("general-modal",{staticClass:"confirmation-modal",attrs:{type:"sm",header:t.title,"is-mobile":t.isTablet},on:{close:t.onClose},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"confirmation-modal__body"},[t.isTablet?t._e():n("h3",{staticClass:"confirmation-modal__hl"},[t._v(t._s(t.title))]),t._v(" "),n("p",{staticClass:"confirmation-modal__message"},[t._v(t._s(t.message))]),t._v(" "),n("div",{staticClass:"confirmation-modal__controls"},[n("v-button",{staticClass:"confirmation-modal__btn-cancel",on:{click:t.onClose}},[t._v(t._s(t.btnCancelText))]),t._v(" "),n("v-button",{staticClass:"btn--transparent confirmation-modal__btn-submit",on:{click:t.onSubmit}},[n("span",{staticClass:"confirmation-modal__btn-text"},[t._v(t._s(t.btnSubmitText))])])],1)])]},proxy:!0}])})}),[],!1,null,null,null).exports,C=n("rBTT"),w=n("mbF8"),S=n("h9RX"),y=(n("BkRI"),n("Y+p1")),j=n.n(y),A=n("3eXy");n("QmAe"),n("zYMX"),n("LZ6J"),n("eZRa"),n("B/pr");function k(t,e,n,s,o,r,a){try{var i=t[r](a),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(s,o)}function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T="".concat(C.NAME,"/").concat(w.b),x={name:"addresses",components:{VSvg:s.a,VLink:o.a,VButton:r.a,InfoPanel:a.a,CheckoutOptionCard:i.a,AddressEditModal:c.a,ConfirmationModal:g},computed:P(P(P({},Object(d.d)(T,[w.a])),Object(d.d)(u.b,{isAddressEditOpen:function(t){return t[u.a][m.modalName.profile.ADDRESS_EDIT]&&t[u.a][m.modalName.profile.ADDRESS_EDIT].open},isConfirmationModalOpen:function(t){return t[u.a][m.modalName.profile.CONFIRMATION]&&t[u.a][m.modalName.profile.CONFIRMATION].open}})),{},{isTablet:function(){return this.$mq.tablet},iconSize:function(){return this.$mq.tablet?24:16}}),methods:P(P(P({},Object(d.b)(u.b,[f.a])),Object(d.b)(T,[S.b,S.d,S.e,S.c,S.a])),{},{isEqualAddress:function(t,e){return j()(t,e)},onSetDefaultAddress:function(t){t.default||this[S.c](t.id)},onAddAddress:function(){this[f.a]({name:m.modalName.profile.ADDRESS_EDIT,open:!0,state:{address:{},btnText:"Добавить"}})},onChangeAddress:function(t){this[f.a]({name:m.modalName.profile.ADDRESS_EDIT,open:!0,state:{address:P({},t),btnText:"Изменить"}})},onSaveAddress:function(t){this[S.e](t)},onDeleteAddress:function(t){this[S.a](t)},onConfirmationModalOpen:function(t){this[f.a]({name:m.modalName.profile.CONFIRMATION,open:!0,state:{title:"Удалить адрес",message:"Адрес доставки будет удалён",btnSubmitText:"Удалить",additionalArgs:t}})}}),serverPrefetch:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e[S.b](e.$isServer);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),A.$logger.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var e=this,n=arguments;return new Promise((function(s,o){var r=t.apply(e,n);function a(t){k(r,s,o,a,i,"next",t)}function i(t){k(r,s,o,a,i,"throw",t)}a(void 0)}))})()},beforeRouteEnter:function(t,e,n){if(A.$store.state[C.NAME][w.b].load)return n(),void A.$store.dispatch("".concat(T,"/").concat(S.d),!1);A.$progress.start(),A.$store.dispatch("".concat(T,"/").concat(S.b)).then((function(){n((function(t){A.$progress.finish()}))})).catch((function(t){A.$progress.fail(),A.$logger.error("beforeRouteEnter",t.error),A.$progress.finish(),n()}))}},N=Object(O.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section addresses-view"},[n("h2",{staticClass:"addresses-view__hl"},[t._v(t._s(t.$t("profile.routes."+t.$route.name)))]),t._v(" "),n("info-panel",{staticClass:"addresses-view__panel",attrs:{header:"Сохраненные адреса"},scopedSlots:t._u([{key:"controls",fn:function(){return[n("v-link",{staticClass:"addresses-view__panel-link",attrs:{tag:"button"},on:{click:t.onAddAddress}},[n("v-svg",{attrs:{name:"plus-small",width:t.iconSize,height:t.iconSize}}),t._v(" "),n("span",[t._v("  Добавить новый адрес")])],1)]},proxy:!0}])},[t._v(" "),t.addresses&&t.addresses.length>0?n("div",{staticClass:"container container--tablet-lg"},[n("ul",{staticClass:"addresses-view__panel-list"},t._l(t.addresses,(function(e){return n("checkout-option-card",{key:e.region_guid+"-"+(e.city_guid||e.settlment_guid)+"-"+e.house,staticClass:"addresses-view__panel-item",attrs:{selected:e.default},on:{cardClick:function(n){return t.onSetDefaultAddress(e)}},scopedSlots:t._u([{key:"controls",fn:function(){return[n("div",{staticClass:"checkout-option-card__controls"},[n("v-link",{staticClass:"checkout-option-card__right-link",attrs:{tag:"button"},on:{click:function(n){return n.stopPropagation(),t.onChangeAddress(e)}}},[n("v-svg",{attrs:{name:"edit",width:"16",height:"16"}})],1),t._v(" "),n("v-link",{staticClass:"checkout-option-card__right-link",attrs:{tag:"button"},on:{click:function(n){return n.stopPropagation(),t.onConfirmationModalOpen(e)}}},[n("v-svg",{attrs:{name:"cross",width:"16",height:"16"}})],1)],1)]},proxy:!0}],null,!0)},[t._v("\n                    "+t._s((e.city||e.settlement)+", "+(e.area?e.area+", ":"")+(e.street?e.street+", ":"")+e.house+" "+(e.block||"")+", "+e.post_index)+"\n                    ")])})),1)]):n("div",{staticClass:"container container--tablet-lg"},[n("div",{staticClass:"addresses-view__no-addresses"},[n("v-svg",{staticClass:"addresses-view__no-addresses-icon",attrs:{name:"info-middle",width:"24",height:"24"}}),t._v("\n                Вы ещё не добавили адресов\n            ")],1),t._v(" "),n("v-button",{staticClass:"btn--outline addresses-view__no-addresses-btn",on:{click:t.onAddAddress}},[t._v("\n                Добавить адрес\n            ")])],1)]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.$isServer||t.isAddressEditOpen?n("address-edit-modal",{directives:[{name:"show",rawName:"v-show",value:t.isAddressEditOpen,expression:"isAddressEditOpen"}],on:{save:t.onSaveAddress}}):t._e()],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.$isServer||t.isConfirmationModalOpen?n("confirmation-modal",{directives:[{name:"show",rawName:"v-show",value:t.isConfirmationModalOpen,expression:"isConfirmationModalOpen"}],on:{submit:t.onDeleteAddress}}):t._e()],1)],1)}),[],!1,null,null,null);e.default=N.exports}}]);