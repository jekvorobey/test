(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{hQDq:function(e,t,s){},hyan:function(e,t,s){"use strict";s.r(t);var a=s("i2Ud"),n=s("Yt4v"),r=s("gd5W"),i=s("uy7R"),c=s("L2JU"),o=s("Q2AE"),l=s("55Sm"),u=s("jDKC"),f=s("rBTT"),p=s("Io6t"),m=s("NqPc"),d=s("YPqg"),g=s("MYsF"),b=s("3eXy"),h=s("QmAe"),v=s("2JJK"),O=s("GyY8"),_=s("nfjx");s("hQDq");function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var M="".concat(f.NAME,"/").concat(p.c),E={name:"messages",mixins:[_.a],components:{VButton:a.a,MessageCard:r.a,MessageModal:i.a,EmptyPlaceholderPanel:n.a},metaInfo:function(){return{title:this.pageTitle}},computed:j(j(j(j({},Object(c.d)([o.g])),Object(c.d)(M,[p.a])),Object(c.d)(l.b,{isMessageOpen:function(e){return e[l.a][v.modalName.profile.MESSAGE]&&e[l.a][v.modalName.profile.MESSAGE].open}})),{},{chats:function(){var e=this,t=this[p.a]||[];return t.map((function(t){return j(j({},t),{},{date:e.formatDate(t.date)})}))},pageTitle:function(){return this.$t("profile.routes.".concat(this.$route.name))},isTablet:function(){return this.$mq.tablet}}),methods:j(j(j({},Object(c.b)(l.b,[u.a])),Object(c.b)(d.c,[g.c])),{},{formatDate:function(e){return e&&Object(h.f)(e).toLocaleDateString(this[o.g],O.f)},onCreateMessage:function(){this[u.a]({name:v.modalName.profile.MESSAGE,open:!0})},onOpenMessage:function(e){var t=e.id;e.isRead||this[g.c](),this.$router.push({name:"MessageDetails",params:{chatId:t}})}}),beforeRouteEnter:function(e,t,s){if(b.$store.state[f.NAME][p.c].load)return b.$store.dispatch("".concat(M,"/").concat(m.f),!1),s();b.$progress.start(),b.$store.dispatch("".concat(M,"/").concat(m.c)).then((function(){b.$store.dispatch("".concat(M,"/").concat(m.f),b.$context.isServer),s((function(){return b.$progress.finish()}))})).catch((function(){return s((function(){return b.$progress.fail()}))}))}},S=s("KHd+"),$=Object(S.a)(E,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"section messages-view"},[s("div",{staticClass:"messages-view__header"},[s("h2",{staticClass:"messages-view__hl"},[e._v("\n            "+e._s(e.pageTitle)+"\n        ")]),e._v(" "),s("v-button",{staticClass:"messages-view__btn",on:{click:e.onCreateMessage}},[e._v("Новое сообщение")])],1),e._v(" "),e.chats&&e.chats.length>0?s("ul",{staticClass:"messages-view__list"},e._l(e.chats,(function(t){return s("message-card",{key:t.id,staticClass:"messages-view__list-item",attrs:{tabindex:"0","message-id":t.id,message:t.message,name:t.name,"last-name":t.lastName,title:t.title,date:t.date,"is-system":t.isSystem,"is-read":t.isRead,"use-header-clamp":!e.isTablet,"use-clamp":""},on:{click:function(s){return s.preventDefault(),e.onOpenMessage(t)}}})})),1):s("empty-placeholder-panel",{staticClass:"messages-view__attention",attrs:{"show-btn":!e.isTablet},on:{"btn-click":e.onCreateMessage},scopedSlots:e._u([{key:"btn",fn:function(){return[e._v("Написать сообщение")]},proxy:!0}])},[e._v("\n        У Вас пока нет ни одного сообщения.\n        ")]),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.$isServer||e.isMessageOpen?s("message-modal"):e._e()],1)],1)}),[],!1,null,null,null);t.default=$.exports}}]);