{"version":3,"sources":["webpack:///./src/views/UserDetail/UserDetail.vue?a1fa","webpack:///./src/views/UserDetail/UserDetail.vue?7073","webpack:///src/views/UserDetail/UserDetail.vue","webpack:///./src/views/UserDetail/UserDetail.vue","webpack:///./src/api/index.js","webpack:///./src/api/create-api-client.js","webpack:///./src/store/modules/ItemList/actions.js","webpack:///./src/store/modules/ItemList/mutations.js","webpack:///./src/store/modules/ItemList/getters.js","webpack:///./src/store/modules/ItemList/index.js","webpack:///./src/views/UserDetail/UserDetail.vue?d90a"],"names":["UserDetail_UserDetailvue_type_script_lang_js_","name","computed","user","this","$store","state","item_list","users","$route","params","id","methods","fetchUser","dispatch","concat","ItemList","beforeRouteEnter","to","from","next","store","ServiceLocator_default","a","progress","$progress","_modulesNamespaceMap","registerModule","preserveState","start","then","finish","beforeRouteUpdate","_this","serverPrefetch","title","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_f","created","karma","domProps","innerHTML","about","_e","attrs","href","__webpack_exports__","process","__webpack_require__","d","fetchIdsByType","fetchItems","watchList","create_api__WEBPACK_IMPORTED_MODULE_0__","_services_ServiceLocator__WEBPACK_IMPORTED_MODULE_1__","logger","n","ServiceLocator","$logger","logRequests","env","DEBUG_API","api","createAPI","version","config","databaseURL","fetch","child","info","cache","cachedItems","has","Promise","resolve","get","reject","once","snapshot","val","__lastUpdated","Date","now","set","type","cachedIds","ids","all","map","fetchItem","cb","first","ref","handler","on","off","onServer","warmCache","top","slice","setTimeout","firebase_app__WEBPACK_IMPORTED_MODULE_0__","firebase_app__WEBPACK_IMPORTED_MODULE_0___default","_ref","Firebase","initializeApp","database","actions","FETCH_LIST_DATA","_ref2","commit","ENSURE_ACTIVE_ITEMS","_ref3","getters","activeIds","FETCH_ITEMS","_ref4","_ref5","filter","item","items","length","FETCH_USER","_ref6","_ref7","SET_USER","_ref8","_ref9","mutations","SET_ACTIVE_TYPE","activeType","SET_LIST","lists","SET_ITEMS","forEach","Vue","rootState","itemsPerPage","page","Number","route","end","activeItems","_","namespaced","new","show","ask","job","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_6_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_UserDetail_vue_vue_type_style_index_0_lang_postcss___WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"ca8cc538aef3eae76d22.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"user-view\"},[_c('div',{staticClass:\"container\"},[(_vm.user)?[_c('h1',[_vm._v(\"User : \"+_vm._s(_vm.user.id))]),_vm._v(\" \"),_c('ul',{staticClass:\"meta\"},[_c('li',[_c('span',{staticClass:\"label\"},[_vm._v(\"Created:\")]),_vm._v(\" \"+_vm._s(_vm._f(\"timeAgo\")(_vm.user.created))+\" ago\")]),_vm._v(\" \"),_c('li',[_c('span',{staticClass:\"label\"},[_vm._v(\"Karma:\")]),_vm._v(\" \"+_vm._s(_vm.user.karma))]),_vm._v(\" \"),(_vm.user.about)?_c('li',{staticClass:\"about\",domProps:{\"innerHTML\":_vm._s(_vm.user.about)}}):_vm._e()]),_vm._v(\" \"),_c('p',{staticClass:\"links\"},[_c('a',{attrs:{\"href\":(\"https://news.ycombinator.com/submitted?id=\" + (_vm.user.id))}},[_vm._v(\"submissions\")]),_vm._v(\" |\\n                \"),_c('a',{attrs:{\"href\":(\"https://news.ycombinator.com/threads?id=\" + (_vm.user.id))}},[_vm._v(\"comments\")])])]:(_vm.user === false)?[_c('h1',[_vm._v(\"User not found.\")])]:_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDetail.vue?vue&type=script&lang=js&\"","<template>\n    <section class=\"user-view\">\n        <div class=\"container\">\n            <template v-if=\"user\">\n                <h1>User : {{ user.id }}</h1>\n                <ul class=\"meta\">\n                    <li><span class=\"label\">Created:</span> {{ user.created | timeAgo }} ago</li>\n                    <li><span class=\"label\">Karma:</span> {{ user.karma }}</li>\n                    <li v-if=\"user.about\" v-html=\"user.about\" class=\"about\"></li>\n                </ul>\n                <p class=\"links\">\n                    <a :href=\"`https://news.ycombinator.com/submitted?id=${user.id}`\">submissions</a> |\n                    <a :href=\"`https://news.ycombinator.com/threads?id=${user.id}`\">comments</a>\n                </p>\n            </template>\n            <template v-else-if=\"user === false\">\n                <h1>User not found.</h1>\n            </template>\n        </div>\n    </section>\n</template>\n\n<script>\nimport itemListModule from '../../store/modules/ItemList';\nimport ServiceLocator from '../../services/ServiceLocator';\n\nexport default {\n    name: 'user-view',\n    computed: {\n        user() {\n            return this.$store.state.item_list ? this.$store.state.item_list.users[this.$route.params.id] : null;\n        },\n    },\n\n    methods: {\n        fetchUser() {\n            return this.$store.dispatch(`${itemListModule.name}/FETCH_USER`, { id: this.$route.params.id });\n        },\n    },\n\n    beforeRouteEnter(to, from, next) {\n        // вызывается до подтверждения пути, соответствующего этому компоненту.\n        // НЕ ИМЕЕТ доступа к контексту экземпляра компонента `this`,\n        // так как к моменту вызова экземпляр ещё не создан!\n\n        if (process.env.VUE_ENV === 'server') {\n            next();\n            return;\n        }\n\n        const store = ServiceLocator.$store();\n        const progress = ServiceLocator.$progress();\n        const register = !!store._modulesNamespaceMap[`${itemListModule.name}/`];\n        if (!register) {\n            store.registerModule(itemListModule.name, itemListModule, {\n                preserveState: !!store.state.item_list,\n            });\n        }\n\n        if (!store.state.item_list.users[to.params.id]) {\n            progress.start();\n            store.dispatch(`${itemListModule.name}/FETCH_USER`, { id: to.params.id }).then(user => {\n                progress.finish();\n                next();\n            });\n        } else next();\n    },\n\n    beforeRouteUpdate(to, from, next) {\n        // вызывается когда маршрут, что рендерит этот компонент изменился,\n        // но этот компонент будет повторно использован в новом маршруте.\n        // Например, для маршрута с динамическими параметрами `/foo/:id`, когда мы\n        // перемещаемся между `/foo/1` и `/foo/2`, экземпляр того же компонента `Foo`\n        // будет использован повторно, и этот хук будет вызван когда это случится.\n        // Также имеется доступ в `this` к экземпляру компонента.\n        this.$progress.start();\n        this.fetchUser().then(() => {\n            this.$progress.finish();\n            next();\n        });\n    },\n\n    // Server-side only\n    // This will be called by the server renderer automatically\n    serverPrefetch() {\n        // return the Promise from the action\n        // so that the component waits before rendering\n        const register = !!this.$store._modulesNamespaceMap[`${itemListModule.name}/`];\n        if (!register) {\n            this.$store.registerModule(itemListModule.name, itemListModule, {\n                preserveState: !!this.$store.state.item_list,\n            });\n        }\n        return this.fetchUser();\n    },\n\n    title() {\n        return this.user ? this.user.id : 'User not found';\n    },\n};\n</script>\n\n<style lang=\"postcss\">\n.user-view {\n    background-color: #fff;\n    box-sizing: border-box;\n    padding: 2em 3em;\n\n    h1 {\n        margin: 0;\n        font-size: 1.5em;\n    }\n\n    .meta {\n        list-style-type: none;\n        padding: 0;\n    }\n\n    .label {\n        display: inline-block;\n        min-width: 4em;\n    }\n\n    .about {\n        margin: 1em 0;\n    }\n\n    .links a {\n        text-decoration: underline;\n    }\n}\n</style>\n","import { render, staticRenderFns } from \"./UserDetail.vue?vue&type=template&id=2565692e&\"\nimport script from \"./UserDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./UserDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserDetail.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// this is aliased in webpack config based on server/client build\n// eslint-disable-next-line\nimport createAPI from 'create-api';\nimport ServiceLocator from '../services/ServiceLocator';\n\nconst logger = ServiceLocator.$logger();\nconst logRequests = !!process.env.DEBUG_API;\n\nconst api = createAPI({\n    version: '/v0',\n    config: {\n        databaseURL: 'https://hacker-news.firebaseio.com',\n    },\n});\n\n// warm the front page cache every 15 min\n// make sure to do this only once across all requests\nif (api.onServer) {\n    warmCache();\n}\n\nfunction warmCache() {\n    fetchItems((api.cachedIds.top || []).slice(0, 30));\n    setTimeout(warmCache, 1000 * 60 * 15);\n}\n\nfunction fetch(child) {\n    if (logRequests) logger.info(`fetching ${child}...`);\n    const cache = api.cachedItems;\n    if (cache && cache.has(child)) {\n        if (logRequests) logger.info(`cache hit for ${child}.`);\n        return Promise.resolve(cache.get(child));\n    }\n    return new Promise((resolve, reject) => {\n        api.child(child).once(\n            'value',\n            snapshot => {\n                const val = snapshot.val();\n                // mark the timestamp when this item is cached\n                if (val) val.__lastUpdated = Date.now();\n                if (cache) cache.set(child, val);\n                if (logRequests) logger.info(`fetched ${child}.`);\n                resolve(val);\n            },\n            reject\n        );\n    });\n}\n\nexport function fetchIdsByType(type) {\n    return api.cachedIds && api.cachedIds[type] ? Promise.resolve(api.cachedIds[type]) : fetch(`${type}stories`);\n}\n\nexport function fetchItem(id) {\n    return fetch(`item/${id}`);\n}\n\nexport function fetchItems(ids) {\n    return Promise.all(ids.map(id => fetchItem(id)));\n}\n\nexport function fetchUser(id) {\n    return fetch(`user/${id}`);\n}\n\nexport function watchList(type, cb) {\n    let first = true;\n    const ref = api.child(`${type}stories`);\n    const handler = snapshot => {\n        if (first) {\n            first = false;\n        } else {\n            cb(snapshot.val());\n        }\n    };\n    ref.on('value', handler);\n    return () => {\n        ref.off('value', handler);\n    };\n}\n","import Firebase from 'firebase/app';\nimport 'firebase/database';\n\nexport default function createAPI({ config, version }) {\n    Firebase.initializeApp(config);\n    return Firebase.database().ref(version);\n}\n","import { fetchUser, fetchItems, fetchIdsByType } from '../../../api';\n\nexport default {\n    // ensure data for rendering given list type\n    FETCH_LIST_DATA: ({ commit, dispatch }, { type }) => {\n        commit('SET_ACTIVE_TYPE', { type });\n        return fetchIdsByType(type)\n            .then(ids => commit('SET_LIST', { type, ids }))\n            .then(() => dispatch('ENSURE_ACTIVE_ITEMS'));\n    },\n\n    // ensure all active items are fetched\n    ENSURE_ACTIVE_ITEMS: ({ dispatch, getters }) => {\n        return dispatch('FETCH_ITEMS', {\n            ids: getters.activeIds,\n        });\n    },\n\n    FETCH_ITEMS: ({ commit, state }, { ids }) => {\n        // on the client, the store itself serves as a cache.\n        // only fetch items that we do not already have, or has expired (3 minutes)\n        const now = Date.now();\n        ids = ids.filter(id => {\n            const item = state.items[id];\n            if (!item) {\n                return true;\n            }\n            if (now - item.__lastUpdated > 1000 * 60 * 3) {\n                return true;\n            }\n            return false;\n        });\n        if (ids.length) return fetchItems(ids).then(items => commit('SET_ITEMS', { items }));\n        return Promise.resolve();\n    },\n\n    FETCH_USER: ({ state, dispatch }, { id }) => {\n        return state.users[id]\n            ? Promise.resolve(state.users[id])\n            : fetchUser(id).then(user => dispatch('SET_USER', { id, user }));\n    },\n\n    SET_USER: ({ commit, state }, { id }) => {\n        return state.users[id]\n            ? Promise.resolve(state.users[id])\n            : fetchUser(id).then(user => commit('SET_USER', { id, user }));\n    },\n};\n","import Vue from 'vue';\n\nexport default {\n    SET_ACTIVE_TYPE: (state, { type }) => {\n        state.activeType = type;\n    },\n\n    SET_LIST: (state, { type, ids }) => {\n        state.lists[type] = ids;\n    },\n\n    SET_ITEMS: (state, { items }) => {\n        items.forEach(item => {\n            if (item) Vue.set(state.items, item.id, item);\n        });\n    },\n\n    SET_USER: (state, { id, user }) => {\n        Vue.set(state.users, id, user || false); /* false means user not found */\n    },\n};\n","export default {\n    // ids of the items that should be currently displayed based on\n    // current list type and current pagination\n    activeIds(state, getters, rootState) {\n        const { activeType, itemsPerPage, lists } = state;\n\n        if (!activeType) {\n            return [];\n        }\n\n        const page = Number(rootState.route.params.page) || 1;\n        const start = (page - 1) * itemsPerPage;\n        const end = page * itemsPerPage;\n\n        return lists[activeType].slice(start, end);\n    },\n\n    // items that should be currently displayed.\n    // this Array may not be fully fetched.\n    activeItems(state, getters) {\n        return getters.activeIds.map(id => state.items[id]).filter(_ => _);\n    },\n};\n","import actions from './actions';\nimport mutations from './mutations';\nimport getters from './getters';\n\n/**\n * Function for create store instance.\n * Функция создания экземпляра стора.\n */\nexport default {\n    name: 'item_list',\n    namespaced: true,\n    state: {\n        activeType: null,\n        itemsPerPage: 20,\n        items: {\n            /* [id: number]: Item */\n        },\n        users: {\n            /* [id: string]: User */\n        },\n        lists: {\n            top: [\n                /* number */\n            ],\n            new: [],\n            show: [],\n            ask: [],\n            job: [],\n        },\n    },\n    actions,\n    mutations,\n    getters,\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDetail.vue?vue&type=style&index=0&lang=postcss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDetail.vue?vue&type=style&index=0&lang=postcss&\""],"sourceRoot":""}