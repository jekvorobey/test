(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{DbVC:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("NDiG"),r=n("i2Ud"),s=n("o3vK"),a=n("KQVR"),o=n("a6oV"),c=n("L2JU"),u=n("55Sm"),l=n("jDKC"),d=n("sEfC"),f=n.n(d);n("vXAK");function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v="preference-edit-modal",y={name:v,components:{VSvg:i.a,VButton:r.a,VCheck:s.a,VInput:a.a,GeneralModal:o.a},data:function(){return{filterString:"",selectedEntities:[]}},computed:b({},Object(c.d)(u.b,{modalState:function(e){return e[u.a][v]&&e[u.a][v].state||{availableEntities:[],entities:[]}}}),{type:function(){return this.modalState.type},data:function(){return this.modalState.data},filteredEntities:function(){var e=this,t=(this.filterString||"").toLowerCase();return this.modalState.availableEntities.filter((function(n){return!e.entities.some((function(e){return e.id===n.id}))&&(n.name||"").toLowerCase().includes(t)}))},entities:function(){return this.modalState.entities},header:function(){switch(this.type){case"brands":return"Добавить бренды";case"categories":return"Добавить категории";default:return"Добавить сущности"}},title:function(){switch(this.type){case"brands":return"Выберите бренды";case"categories":return"Выберите категории";default:return"Выберите сущности"}},isTablet:function(){return this.$mq.tablet}}),methods:b({},Object(c.b)(u.b,[l.a]),{isChecked:function(e){return this.selectedEntities.some((function(t){return t.id===e}))},onFilterChange:function(e){this.filterString=e},onCheckedChanged:function(e,t){if(e)this.selectedEntities.push(t);else{var n=this.selectedEntities.indexOf(t);-1!==n&&this.selectedEntities.splice(n,1)}},onSubmit:function(){var e=[].concat(h(this.entities.map((function(e){return e.id}))),h(this.selectedEntities.map((function(e){return e.id}))));this.$emit("submit",{type:this.type,items:e}),this.onClose()},onClose:function(){this[l.a]({name:v,open:!1})}}),beforeMount:function(){this.debounce_onFilterChange=f()(this.onFilterChange,300)}},_=n("KHd+"),g=Object(_.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("general-modal",{staticClass:"preference-edit-modal",attrs:{type:"sm",header:e.header,"is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[n("h3",{staticClass:"preference-edit-modal__hl"},[e._v(e._s(e.header))]),e._v(" "),n("v-input",{staticClass:"preference-edit-modal__input",on:{input:e.debounce_onFilterChange},scopedSlots:e._u([{key:"after",fn:function(){return[n("v-svg",{attrs:{name:"search-middle",width:"24",height:"24"}})]},proxy:!0}])}),e._v(" "),n("h6",{staticClass:"preference-edit-modal__title"},[e._v(e._s(e.title))]),e._v(" "),n("ul",{staticClass:"preference-edit-modal__list"},e._l(e.filteredEntities,(function(t){return n("li",{key:t.id,staticClass:"preference-edit-modal__list-item"},[n("v-check",{key:t.id,staticClass:"preference-edit-modal__list-check",attrs:{name:e.type,id:e.type+"-"+t.id,value:t.id,checked:e.isChecked(t.id)},on:{change:function(n){return e.onCheckedChanged(n,t)}}},[e._v("\n                    "+e._s(t.name)+"\n                ")])],1)})),0),e._v(" "),n("div",{staticClass:"preference-edit-modal__submit"},[n("v-button",{staticClass:"preference-edit-modal__submit-btn",on:{click:e.onSubmit}},[e._v("\n                Добавить\n            ")])],1)]},proxy:!0}])})}),[],!1,null,null,null);t.b=g.exports},vXAK:function(e,t,n){}}]);