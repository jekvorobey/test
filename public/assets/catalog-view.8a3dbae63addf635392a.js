(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/Rcj":function(t,e,a){"use strict";a.r(e);var n,r=a("NDiG"),i=a("i2Ud"),o=(a("o3vK"),a("+gqB")),c=(a("nuHk"),a("pFko")),s=a("0OV/"),l=a("/Q9p"),u=a("LqtR"),d=a("W6hq"),g=a("BZIu"),p=a("Nlzp");function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var _,v=(m(n={},"SET_BANNER",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.banner=e})),m(n,"SET_ITEMS",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{items:[],range:0},a=e.items,n=e.range;t.items=a||[],t.range=n||0})),m(n,"SET_PARAMS",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.id,n=e.code;t.categoryId=a,t.categoryCode=n})),m(n,"SET_CATEGORIES",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.categories=e})),n);function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function b(t,e,a,n,r,i,o){try{var c=t[i](o),s=c.value}catch(t){return void a(t)}c.done?e(s):Promise.resolve(s).then(n,r)}var C,h,y,T=(f(_={},"FETCH_BANNER",(function(t){var e=t.commit;return Object(p.a)().then((function(t){return e("SET_BANNER",t[6])})).catch((function(t){return g.$logger.error("FETCH_BANNER error: ".concat(t)),[]}))})),f(_,"FETCH_CATEGORIES",(function(t){var e=t.commit;return Object(p.d)().then((function(t){return e("SET_CATEGORIES",t)})).catch((function(t){return g.$logger.error("FETCH_CATEGORIES error: ".concat(t)),[]}))})),f(_,"FETCH_ITEMS",(function(t,e){var a=t.commit;return Object(p.c)(e).then((function(t){a("SET_ITEMS",t),a("SET_PARAMS",e)})).catch((function(t){return g.$logger.error("FETCH_ITEMS error: ".concat(t)),[]}))})),f(_,"FETCH_CATALOG_DATA",(C=regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,Promise.all([n("FETCH_CATEGORIES"),n("FETCH_BANNER")]);case 3:return t.abrupt("return",n("FETCH_ITEMS",a));case 4:case"end":return t.stop()}}),t)})),h=function(){var t=this,e=arguments;return new Promise((function(a,n){var r=C.apply(t,e);function i(t){b(r,a,n,i,o,"next",t)}function o(t){b(r,a,n,i,o,"throw",t)}i(void 0)}))},function(t,e){return h.apply(this,arguments)})),_),E=a("zUOt");function w(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var x={name:"catalog",namespaced:!0,state:(y={},w(y,"banner",{}),w(y,"categoryId",null),w(y,"categoryCode",null),w(y,"categories",[]),w(y,"items",[]),w(y,"range",0),w(y,"filters",[{id:1,title:"Цена р.",name:"price",type:"range",max:1e3,min:0},{id:2,title:"Бренды",name:"brand",type:"check",items:[{id:1,name:"L’Oreal Paris",code:"brand-loreal"},{id:2,name:"Maybelline",code:"brand-maybelline"},{id:3,name:"Pupa",code:"brand-pupa"}]},{id:3,title:"Средства",name:"tool",type:"check",values:[],items:[{id:1,name:"Жидкая помада для губ",code:"tool-zhidkaya_pomada_dlya_gub"},{id:2,name:"Помада для губ",code:"tool-pomada_dlya_gub"},{id:3,name:"Гигиеническая помада для губ",code:"tool-gigienicheskaya_pomada_dlya_gub"}]},{id:4,title:"Эффекты",name:"effect",type:"radio",items:[{id:1,name:"Глянцевая",code:"effect-glyancevaya"},{id:2,name:"Матовая",code:"effect-matovaya"},{id:3,name:"Перламутровая",code:"effect-perlamutrovaya"}]}]),y),actions:T,mutations:v,getters:E.g},O=a("L2JU"),A=a("sEfC"),S=a.n(A);a("4eDr"),a("9bRU");function k(t,e,a,n,r,i,o){try{var c=t[i](o),s=c.value}catch(t){return void a(t)}c.done?e(s):Promise.resolve(s).then(n,r)}function P(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var i=t.apply(e,a);function o(t){k(i,n,r,o,c,"next",t)}function c(t){k(i,n,r,o,c,"throw",t)}o(void 0)}))}}function R(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?R(a,!0).forEach((function(e){j(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function j(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var $,F,H="".concat(x.name,"/").concat("FETCH_CATALOG_DATA"),D=0,N={name:"catalog",components:{VSvg:r.a,VButton:i.a,VSelect:c.a,VPagination:o.a,CatalogFilter:s.a,CatalogProductCard:l.a,CatalogBannerCard:u.a},data:function(){var t=["Сначала подороже"];return{sortValue:t[0],sortOptions:t}},computed:I({},Object(O.c)(x.name,[E.d,E.b,E.c,E.e,E.f,E.a]),{},Object(O.d)(x.name,["items","banner"]),{},Object(O.d)("route",{code:function(t){return t.params.code}})),methods:I({},Object(O.b)(x.name,["FETCH_ITEMS","FETCH_CATALOG_DATA"]),{onBeforeEnterItems:function(t){t.dataset.index=D,D+=1,t.style.opacity=0},itemAnimation:function(t,e){return new Promise((function(a,n){try{setTimeout((function(){requestAnimationFrame((function(){t.style.opacity=1,a()}))}),e)}catch(t){n(t)}}))},onEnterItems:(F=P(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=100*e.dataset.index,t.next=3,this.itemAnimation(e,n);case 3:a();case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return F.apply(this,arguments)}),onAfterEnterItems:function(t){delete t.dataset.index,D=0},onLeaveItems:function(t,e){requestAnimationFrame((function(){t.style.opacity=0,e()}))},onClickDeleteTag:function(t){var e=this.routeSegments,a=this.code;if(e.includes(t)){var n=e.indexOf(t);-1!==n&&e.splice(n,1),this.$router.replace({path:Object(d.a)(a,e)})}}}),beforeRouteEnter:($=P(regeneratorRuntime.mark((function t(e,a,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.params.code,!!g.$store._modulesNamespaceMap["".concat(x.name,"/")]||g.$store.registerModule(x.name,x,{preserveState:!!g.$store.state.catalog}),g.$store.state.catalog.categoryCode!==r){t.next=8;break}n(),t.next=19;break;case 8:return t.prev=8,g.$progress.start(),t.next=12,g.$store.dispatch(H,{code:r});case 12:n((function(t){return g.$progress.finish()})),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(8),g.$progress.fail(),g.$logger.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[8,15]])}))),function(t,e,a){return $.apply(this,arguments)}),beforeRouteUpdate:function(t,e,a){this.debounce_fetchCatalog(t,e),a()},beforeMount:function(){var t=this;this.debounce_fetchCatalog=S()(function(){var e=P(regeneratorRuntime.mark((function e(a,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.$store.state.catalog.categoryCode,i=a.params.code,t.$progress.start(),r===i){e.next=9;break}return e.next=7,t.FETCH_CATALOG_DATA({code:i});case 7:e.next=11;break;case 9:return e.next=11,t.FETCH_ITEMS({code:i});case 11:t.$progress.finish(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),g.$logger.error("debounce_fetchCatalog",e.t0),t.$progress.fail();case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),500)}},M=a("KHd+");a.d(e,"DISPATCH_FETCH_CATALOG_DATA",(function(){return H}));var B=Object(M.a)(N,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section catalog-view"},[a("div",{staticClass:"container catalog-view__header"},[a("transition-group",{staticClass:"section catalog-view__breadcrumbs",attrs:{tag:"ol",name:"fade-in"}},[a("li",{key:"main",staticClass:"catalog-view__breadcrumbs-item"},[a("router-link",{attrs:{to:"/"}},[t._v(t._s("Главная"))])],1),t._v(" "),a("li",{key:"all",staticClass:"catalog-view__breadcrumbs-item"},[a("router-link",{attrs:{to:"/catalog"}},[t._v(t._s("Каталог"))])],1),t._v(" "),t._l(t.activeCategories,(function(e){return a("li",{key:e.id,staticClass:"catalog-view__breadcrumbs-item"},[a("router-link",{attrs:{to:"/catalog/"+e.code}},[t._v(t._s(e.name))])],1)}))],2),t._v(" "),a("catalog-banner-card",{staticClass:"catalog-view__banner",attrs:{"banner-id":t.banner.id,image:t.banner.image,"upper-text":t.banner.upperText,"bottom-text":t.banner.bottomText,title:t.banner.title,"btn-text":t.banner.btnText}})],1),t._v(" "),a("section",{staticClass:"section"},[a("div",{staticClass:"container catalog-view__grid"},[a("div",{staticClass:"catalog-view__side-panel"},[a("catalog-filter",{staticClass:"catalog-view__side-panel-filters"})],1),t._v(" "),a("div",{staticClass:"catalog-view__main"},[a("div",{staticClass:"catalog-view__main-header"},[a("div",{staticClass:"catalog-view__main-header-title"},[a("h1",{staticClass:"catalog-view__main-header-hl"},[t._v("\n                            "+t._s(t.activeCategory?t.activeCategory.name:"Каталог")+"\n                        ")]),t._v(" "),a("p",{staticClass:"text-grey catalog-view__main-header-text"},[t._v("489 товаров")])]),t._v(" "),a("v-select",{staticClass:"catalog-view__main-header-sort",attrs:{options:t.sortOptions,searchable:!1,allowEmpty:!1},model:{value:t.sortValue,callback:function(e){t.sortValue=e},expression:"sortValue"}})],1),t._v(" "),a("transition-group",{staticClass:"catalog-view__main-tags",attrs:{tag:"ul",name:"tag-item"}},t._l(t.activeTags,(function(e,n){return a("li",{key:e.code,staticClass:"catalog-view__main-tags-item",attrs:{"data-index":n}},[t._v("\n                        "+t._s(e.name)+" \n                        "),a("button",{staticClass:"catalog-view__main-tags-delete-btn",on:{click:function(a){return t.onClickDeleteTag(e.code)}}},[a("v-svg",{attrs:{name:"cross-small",width:"24",height:"24"}})],1)])})),0),t._v(" "),a("transition-group",{staticClass:"catalog-view__main-grid",attrs:{tag:"ul",name:"catalog-item"},on:{"before-enter":t.onBeforeEnterItems,enter:t.onEnterItems,"after-enter":t.onAfterEnterItems,leave:t.onLeaveItems}},t._l(t.items,(function(e){var n;return a("li",{key:e.id+"-"+e.type,staticClass:"catalog-view__main-grid-item",class:(n={},n["catalog-view__main-grid-item--"+e.type]=e.type,n)},["product"===e.type?a("catalog-product-card",{staticClass:"catalog-view__main-grid-card",attrs:{"product-id":e.id,name:e.name,href:"/catalog"+(t.activeCategory?"/"+t.activeCategory.code:"")+"/"+e.code,image:e.image,price:e.price,"old-price":e.oldPrice,tags:e.tags,rating:e.rating}}):t._e(),t._v(" "),"banner"===e.type?a("catalog-banner-card",{staticClass:"catalog-view__main-grid-card",attrs:{"banner-id":e.id,title:e.title,image:e.image,"upper-text":e.upperText,"btn-text":e.btnText}}):t._e()],1)})),0),t._v(" "),t.pagesCount>1?a("div",{staticClass:"catalog-view__main-controls"},[t.activePage<t.pagesCount?a("v-button",{staticClass:"btn--outline catalog-view__main-controls-btn",attrs:{to:{path:t.$route.path,query:{page:t.activePage+1}}}},[t._v("\n                        Показать ещё\n                    ")]):t._e(),t._v(" "),a("v-pagination",{attrs:{value:t.activePage,"page-count":t.pagesCount},on:{input:function(e){return t.$router.push({path:t.$route.path,query:{page:e}})}}})],1):t._e()],1)])])])}),[],!1,null,null,null);e.default=B.exports},"/pdK":function(t,e,a){},"9bRU":function(t,e,a){},LqtR:function(t,e,a){"use strict";var n=a("i2Ud"),r=(a("/pdK"),{name:"catalog-banner-card",components:{VButton:n.a},props:{bannerId:{type:[Number,String]},upperText:{type:String},bottomText:{type:String},title:{type:String},image:{type:String},btnText:{type:String}}}),i=a("KHd+"),o=Object(i.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"catalog-banner-card"},[a("img",{staticClass:"lazyload blur-up catalog-banner-card__img",attrs:{"data-src":t.image}}),t._v(" "),a("div",{staticClass:"catalog-banner-card__panel"},[t.upperText?a("div",{staticClass:"catalog-banner-card__panel-upper-text"},[t._v("\n            "+t._s(t.upperText)+"\n        ")]):t._e(),t._v(" "),a("div",{staticClass:"catalog-banner-card__panel-title"},[t._v("\n            "+t._s(t.title)+"\n        ")]),t._v(" "),t.bottomText?a("div",{staticClass:"catalog-banner-card__panel-bottom-text"},[t._v("\n            "+t._s(t.bottomText)+"\n        ")]):t._e(),t._v(" "),a("v-button",{staticClass:"btn--outline catalog-banner-card__panel-btn"},[t._v("\n            "+t._s(t.btnText)+"\n        ")])],1)])}),[],!1,null,null,null);e.a=o.exports}}]);