(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{DzLH:function(e,t,r){},Gsue:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("4mC1");var a,o,i,c="pagesCount";t.b=(i=function(e){var t=e.range;return Math.ceil(t/n.a)},(o=c)in(a={})?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i,a)},NOmi:function(e,t,r){"use strict";var n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return f}));var c="SET_REFERRER_DATA",u="SET_ITEMS",s="SET_ITEMS_MORE",f="SET_QUERY_PARAMS";t.e=(a(n={},"SET_LOAD_PATH",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.loadPath=t})),a(n,f,(function(e,t){var r=t.page,n=void 0===r?1:r;e.activePage=Number(n)})),a(n,c,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id,n=t.name;e.referrerId=r,e.title=n})),a(n,u,(function(e,t){var r=t.items,n=void 0===r?[]:r,a=t.range;e.items=n,e.range=a||0})),a(n,s,(function(e,t){var r,n=t.items,a=void 0===n?[]:n,i=t.range;(r=e.items).push.apply(r,o(a)),e.range=i||0})),n)},Xw1o:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return l}));var n,a=r("48TQ"),o=r("4mC1"),i=r("Nlzp"),c=r("NOmi");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))}}var d="SET_LOAD_PATH",l="FETCH_REFERRER_DATA";t.c=(u(n={},d,(function(e,t){(0,e.commit)(d,t)})),u(n,l,(function(e,t){return f(regeneratorRuntime.mark((function r(){var n,u,s,f,d,p,v,b;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.state,u=e.dispatch,s=e.commit,f=t.code,d=t.page,p=void 0===d?o.b:d,v=t.showMore,r.prev=2,n.referrerId,r.next=6,Object(i.Zb)(f);case 6:return b=r.sent,s(c.d,b),r.next=10,u("FETCH_ITEMS",{id:b.id,page:p,showMore:v});case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(2),Object(a.b)(l,!0)(r.t0);case 15:case"end":return r.stop()}}),r,null,[[2,12]])})))()})),u(n,"FETCH_ITEMS",(function(e,t){return f(regeneratorRuntime.mark((function r(){var n,u,s,f,d,l,p,v,b;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.state,n=e.commit,u=t.id,s=t.page,f=void 0===s?o.b:s,d=t.showMore,l=void 0!==d&&d,r.prev=2,r.next=5,Object(i.ac)(u,f,o.a);case 5:p=r.sent,v=p.products,b=p.products_count,n(c.c,{page:f}),n(l?c.b:c.a,{items:v,range:b}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(2),Object(a.b)("FETCH_ITEMS",!0)(r.t0);case 15:case"end":return r.stop()}}),r,null,[[2,12]])})))()})),n)},aJj6:function(e,t,r){"use strict";r.r(t),r.d(t,"NAME",(function(){return u})),r.d(t,"LOAD_PATH",(function(){return s})),r.d(t,"TITLE",(function(){return f})),r.d(t,"ITEMS",(function(){return d})),r.d(t,"ACTIVE_PAGE",(function(){return l})),r.d(t,"RANGE",(function(){return p})),r.d(t,"default",(function(){return v}));r("2JJK"),r("RiBg");var n=r("4mC1"),a=r("Xw1o"),o=r("NOmi"),i=r("Gsue");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u="referrer",s="loadPath",f="title",d="items",l="activePage",p="range";function v(){var e;return{name:u,namespaced:!0,state:(e={},c(e,s,""),c(e,f,""),c(e,"referrerId",null),c(e,d,[]),c(e,p,0),c(e,l,n.b),e),actions:a.c,mutations:o.e,getters:i.b}}},"jbL/":function(e,t,r){"use strict";r.r(t);var n=r("NDiG"),a=r("+gqB"),o=r("obii"),i=r("zfPd"),c=r("NkcL"),u=r("6AGh"),s=r("L2JU"),f=r("3eXy"),d=r("YPqg"),l=r("MYsF"),p=r("aJj6"),v=r("Gsue"),b=r("Xw1o"),m=r("nfjx"),h=r("4mC1"),g=r("QmAe");r("+in6"),r("DzLH");function w(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={name:"referrer",mixins:[m.a],components:{VSvg:n.a,VPagination:a.a,CatalogProductList:c.a,ShowMoreButton:u.a,Breadcrumbs:o.a,BreadcrumbItem:i.a},metaInfo:function(){var e=this.$route,t=this.activePage;return{title:t>1?"".concat(e.params.code," – страница ").concat(t):e.params.code}},data:function(){return{isMounted:!1,showMore:!1}},computed:E(E(E(E({},Object(s.d)(p.NAME,[p.TITLE,p.ITEMS,p.ACTIVE_PAGE,p.RANGE])),Object(s.c)(p.NAME,[v.a])),Object(s.d)("route",{code:function(e){return e.params.code}})),{},{productName:function(){return Object(g.l)(this[p.RANGE],["продукт","продукта","продуктов"])},isTablet:function(){return this.$mq.tablet}}),methods:E(E(E({},Object(s.b)(d.c,[l.m])),Object(s.b)(p.NAME,[b.a,b.b])),{},{onShowMore:function(){this.showMore=!0,this.$router.replace({path:this.$route.path,query:E(E({},this.$route.query),{},{page:this[p.ACTIVE_PAGE]+1})})},onPageChanged:function(e){this.showMore=!1,this.$router.push({path:this.$route.path,query:E(E({},this.$route.query),{},{page:e>h.b?e:void 0})})}}),beforeRouteEnter:function(e,t,r){var n=e.fullPath,a=e.params.code,o=e.query.page,i=void 0===o?h.b:o;function c(){f.$store.state[p.NAME]&&(f.$store.state[p.NAME].loadPath===n?r():(f.$progress.start(),f.$store.dispatch("".concat(p.NAME,"/").concat(b.a),{code:a,page:i}).then((function(){f.$store.dispatch("".concat(p.NAME,"/").concat(b.b),n),r((function(){f.$progress.finish()}))})).catch((function(e){if(e&&!0===e.isCancel)return!0;r((function(){f.$progress.fail()}))}))))}f.$store.state[p.NAME]?c():f.$store.watch((function(e){return e[p.NAME]}),(function(e){e&&c()}))},beforeRouteUpdate:function(e,t,r){var n,a=this;return(n=regeneratorRuntime.mark((function n(){var o,i,c,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.params.code,i=e.query.page,c=void 0===i?h.b:i,u=t.params.code,s=t.query.page,o!==u||c!==s){n.next=4;break}return n.abrupt("return",r());case 4:return n.prev=4,a.$progress.start(),n.next=8,a[b.a]({code:o,page:c,showMore:a.showMore});case 8:a.$progress.finish(),r(),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(4),a.$progress.fail(),r(!1);case 16:a.showMore=!1;case 17:case"end":return n.stop()}}),n,null,[[4,12]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){w(o,r,a,i,c,"next",e)}function c(e){w(o,r,a,i,c,"throw",e)}i(void 0)}))})()},created:function(){this[l.m](this.code)},mounted:function(){this.isMounted=!0}},A=r("KHd+"),P=Object(A.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section referrer-view"},[r("div",{staticClass:"container"},[r("breadcrumbs",{staticClass:"referrer-view__breadcrumbs"},[r("breadcrumb-item",{key:"main",attrs:{to:"/"}},[e.isTablet?r("v-svg",{attrs:{name:"home",width:"10",height:"10"}}):r("span",[e._v("Главная")])],1),e._v(" "),r("breadcrumb-item",{key:"Referrer",attrs:{to:e.$route.path}},[e._v(e._s(e.$route.params.code))])],1)],1),e._v(" "),r("section",{staticClass:"section"},[r("div",{staticClass:"container referrer-view__header"},[1===e.activePage||e.isMounted?r("h1",{staticClass:"referrer-view__header-hl"},[e._v("\n                "+e._s(e.title)+"\n                "),e.range>0?r("span",{staticClass:"referrer-view__header-counter"},[e._v(" "+e._s(e.range)+" "+e._s(e.productName)+" ")]):e._e()]):e._e()]),e._v(" "),r("div",{staticClass:"container referrer-view__list"},[e.items&&e.items.length>0?r("catalog-product-list",{attrs:{items:e.items,"referral-code":e.code,animation:!e.isTablet,fullscreen:"","item-prop":""}}):r("p",{staticClass:"referrer-view__list-empty"},[e._v("Ничего не найдено")])],1),e._v(" "),e.pagesCount>1?r("div",{staticClass:"container referrer-view__main-controls"},[e.activePage<e.pagesCount?r("show-more-button",{attrs:{"btn-class":"btn--outline referrer-view__main-controls-btn","preloader-class":"referrer-view__preloader","show-preloader":e.showMore},on:{click:e.onShowMore}},[e._v("\n                Показать ещё\n            ")]):e._e(),e._v(" "),r("v-pagination",{attrs:{value:e.activePage,"page-count":e.pagesCount},on:{input:e.onPageChanged}})],1):e._e()])])}),[],!1,null,null,null);t.default=P.exports}}]);