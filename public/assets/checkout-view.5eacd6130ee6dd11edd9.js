(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"+jTb":function(e,t,n){},"096N":function(e,t,n){},DHLn:function(e,t,n){"use strict";n.r(t);var a=n("NDiG"),i=n("7cXU"),r=n("KQVR"),o=n("i2Ud"),s=n("ze5i"),c=n("YNzt"),l=n("A9YF"),u=n("o3vK"),d=n("dMOp"),p=n("Z14j"),m=n("qjh8"),h=n("jYNS"),v=n("aXGN"),f=(n("OmJt"),{name:"checkout-product-card",components:{VSvg:a.a,VLink:i.a,VPicture:h.a},props:{name:{type:String,required:!0},image:{type:[String,Object]},href:{type:String}},methods:{generateSourcePath:function(e,t,n,a){return Object(v.c)(e,t,n,a)}}}),_=n("KHd+"),k=Object(_.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"checkout-product-card"},[n("router-link",{staticClass:"checkout-product-card__img",attrs:{to:e.href}},[e.image&&e.image.id?n("v-picture",{attrs:{image:e.image,alt:""},scopedSlots:e._u([{key:"source",fn:function(t){var a=t.image;t.lazy;return[n("source",{attrs:{"data-srcset":e.generateSourcePath(56,56,a.id,"webp"),type:"image/webp"}})]}},{key:"fallback",fn:function(t){var a=t.image,i=(t.lazy,t.alt);return[n("img",{staticClass:"blur-up lazyload v-picture__img",attrs:{"data-src":e.generateSourcePath(56,56,a.id),alt:i}})]}}],null,!1,1570154704)}):n("v-svg",{attrs:{id:"checkout-product-card-empty",name:"logo",width:"48",height:"48"}})],1),e._v("\n    "+e._s(e.name)+"\n")],1)}),[],!1,null,null,null).exports,b=n("vZFW"),y=n("pFko"),C=n("a6oV"),g=n("L2JU"),O=n("Q2AE"),P=n("Qchp"),w=n("55Sm"),j=n("jDKC"),T=n("2JJK");n("+jTb");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=T.modalName.checkout.DATE_EDIT,I={name:M,components:{VButton:o.a,VDatepicker:b.a,GeneralModal:C.a,VSelect:y.a},data:function(){return{selectedDate:null,availableDateTimes:{},slotTime:{result:{}}}},computed:E(E(E({},Object(g.d)({datepickerLocale:function(e){return e[O.h][e[O.g]]&&e[O.h][e[O.g]].flatpickrLocale}})),Object(g.d)(w.b,{isOpen:function(e){return e[w.a][M]&&e[w.a][M].open},state:function(e){return e[w.a][M]&&e[w.a][M].state||{}}})),{},{availableDates:function(){return Object.keys(this.availableDateTimes)},maxDate:function(){return this.availableDates.length>0?this.availableDates[this.availableDates.length-1]:null},minDate:function(){return this.availableDates.length>0?this.availableDates[0]:null},isTablet:function(){return this.$mq.tablet},timeSlots:function(){var e=this.selectedDate&&this.selectedDate[0],t=e&&this.availableDateTimes&&this.availableDateTimes[e];return e&&t?t.map((function(e,t){var n=e.from,a=e.to,i=e.code;return{name:"С ".concat(n,":00 до ").concat(a,":00"),value:i,result:{deliveryTimeStart:n,deliveryTimeEnd:a,deliveryTimeCode:i}}})):[]}}),methods:E(E({},Object(g.b)(w.b,[j.a])),{},{onSelectPoint:function(e){this.onClose()},onChanged:function(){this.$emit("changed",E(E(E({},this.state),this.slotTime.result),{},{selectedDate:this.selectedDate})),this.onClose()},onClose:function(){this.$emit("close"),this.CHANGE_MODAL_STATE({name:M,open:!1})}}),watch:{state:function(e){this.availableDateTimes=this.state.availableDateTimes,this.selectedDate=this.state.selectedDate},timeSlots:function(e){e&&e[0]&&(this.slotTime=e[0])}},created:function(){this.availableDateTimes=this.state.availableDateTimes||{},this.selectedDate=this.state.selectedDate||[],this.selectedDate.length&&this.selectedDate[0].getMonth&&(this.selectedDate[0]=this.selectedDate[0].toLocaleDateString(this[O.g],{month:"numeric",day:"numeric",year:"numeric"}).split(".").reverse().join("-"))}},x=Object(_.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isOpen?n("general-modal",{staticClass:"checkout-date-modal",attrs:{header:"Дата и время доставки","is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[n("h3",{staticClass:"checkout-date-modal__hl"},[e._v("Дата и время доставки")]),e._v(" "),n("div",{staticClass:"container checkout-date-modal__datepicker"},[n("v-datepicker",{attrs:{mode:"single",enable:e.availableDates,locale:e.datepickerLocale,maxDate:e.maxDate,minDate:e.minDate,"date-format":"Y-m-d",inline:""},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1),e._v(" "),e.timeSlots.length?n("div",{staticClass:"container checkout-date-modal__select"},[n("p",{staticClass:"checkout-date-modal__select-title"},[e._v("Время доставки")]),e._v(" "),n("v-select",{attrs:{searchable:!1,placeholder:"Выберите время",label:"name","track-by":"value",deselectLabel:"","allow-empty":!1,options:e.timeSlots},model:{value:e.slotTime,callback:function(t){e.slotTime=t},expression:"slotTime"}})],1):e._e(),e._v(" "),n("div",{staticClass:"checkout-date-modal__submit"},[n("v-button",{staticClass:"checkout-date-modal__submit-btn",on:{click:e.onChanged}},[e._v("Подтвердить доставку")])],1)]},proxy:!0}],null,!1,2095651794)}):e._e()}),[],!1,null,null,null).exports,$=n("Kw5r");function N(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function L(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return e.charAt(0).toUpperCase()+e.slice(1)}function H(e){return(e.icon.color||"blue")+(e.icon.glyph?R(e.icon.glyph):e.icon.content?"Stretchy":"")}function B(e){return e.map((function(e){return Array.isArray(e)?B(e):+e}))}function q(e,t){var n=[];return function e(t,a){if(t===a)return!0;if(t instanceof Date&&a instanceof Date)return+t==+a;if("object"!==V(t)||"object"!==V(a))return!1;if(function(e,t){for(var a=n.length;a--;)if(!(n[a][0]!==e&&n[a][0]!==t||n[a][1]!==t&&n[a][1]!==e))return!0;return!1}(t,a))return!0;n.push([t,a]);var i=Object.keys(t),r=i.length;if(Object.keys(a).length!==r)return!1;for(;r--;)if(!e(t[i[r]],a[i[r]]))return!1;return!0}(e,t)}var F=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={},this.ymapReady=!1,this.scriptIsNotAttached=!0}var t,n,a;return t=e,(n=[{key:"$on",value:function(e,t){var n=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){n.events[e]=n.events[e].filter((function(e){return t!==e}))}}},{key:"$off",value:function(e,t){this.events[e]||(this.events[e]=[]);var n=this.events[e].indexOf(t);-1!==n&&this.events[e].splice(n,1)}},{key:"$emit",value:function(e,t){var n=this.events[e];n&&n.forEach((function(e){return e(t)}))}}])&&N(t.prototype,n),a&&N(t,a),e}()),Z=["fullscreenControl","geolocationControl","routeEditor","rulerControl","searchControl","trafficControl","typeSelector","zoomControl","routePanelControl"];function z(e){return 0===e.filter((function(e){return![].concat(Z,["default"]).includes(e)})).length}function G(e,t){var n=R(e);if(!t)return n;switch(n){case"Placemark":return"Point";case"Polyline":return"LineString";default:return n}}function U(e,t){var n,a,i=t?{type:"Feature",id:e.properties.markerId,geometry:{type:e.markerType,coordinates:e.coords},properties:e.properties,options:e.options}:new ymaps[e.markerType](e.coords,e.properties,e.options);return i.clusterName=e.clusterName,t||(n=e.callbacks,a=i,n&&"object"===V(n)&&Object.keys(n).forEach((function(e){a.events.add(e,n[e])}))),i}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var a=document.createElement("SCRIPT"),i=e.apiKey,r=void 0===i?"":i,o=e.lang,s=void 0===o?"ru_RU":o,c=e.version,l=void 0===c?"2.1":c,u=e.coordorder,d=void 0===u?"latlong":u,p=e.debug,m=void 0!==p&&p?"debug":"release",h="lang=".concat(s).concat(r&&"&apikey=".concat(r),"&mode=").concat(m,"&coordorder=").concat(d),v="https://api-maps.yandex.ru/".concat(l,"/?").concat(h);a.setAttribute("src",v),a.setAttribute("async",""),a.setAttribute("defer",""),document.body.appendChild(a),F.scriptIsNotAttached=!1,a.onload=function(){F.ymapReady=!0,F.$emit("scriptIsLoaded"),t()},a.onerror=n}))}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=F,Q={pluginOptions:{},provide:function(){var e,t,n=this,a=[],i=[];return{addMarker:function(e){i.push(e),t&&clearTimeout(t),t=setTimeout((function(){n.setMarkers(i),i=[]}),10)},deleteMarker:function(t){n.myMap.geoObjects&&(a.push(t),e&&clearTimeout(e),e=setTimeout((function(){return n.deleteMarkers(a)}),10))},rerender:null,compareValues:function(e){var a=e.newVal,r=e.oldVal,o=e.id;q(a,r)||(i.push(o),t&&clearTimeout(t),t=setTimeout((function(){n.setMarkers(i),i=[]}),10))}}},data:function(){return{ymapId:"yandexMap".concat(Math.round(1e5*Math.random())),myMap:{},style:this.ymapClass?"":"width: 100%; height: 100%;"}},props:{coords:{type:Array,validator:function(e){return!e.filter((function(e){return Number.isNaN(e)})).length},required:!0},zoom:{validator:function(e){return!Number.isNaN(e)},default:18},clusterOptions:{type:Object,default:function(){return{}}},clusterCallbacks:{type:Object,default:function(){return{}}},behaviors:{type:Array,default:function(){return["default"]}},controls:{type:Array,default:function(){return["default"]},validator:function(e){return z(e)}},detailedControls:{type:Object,validator:function(e){return z(Object.keys(e))}},scrollZoom:{type:Boolean,default:!0},zoomControl:Object,mapType:{type:String,default:"map",validator:function(e){return["map","satellite","hybrid"].includes(e)}},placemarks:{type:Array,default:function(){return[]}},useObjectManager:{type:Boolean,default:!1},objectManagerClusterize:{type:Boolean,default:!0},ymapClass:String,initWithoutMarkers:{type:Boolean,default:!0},debug:{type:Boolean,default:!1},settings:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}},showAllMarkers:Boolean},computed:{coordinates:function(){return this.coords.map((function(e){return+e}))}},methods:{getMarkersFromSlots:function(e){return this.$slots.default?this.$slots.default.map((function(t){var n=t.componentOptions&&t.componentOptions.propsData;if(n&&(!e||e.includes(n.markerId))){var a={};if(n.balloonTemplate)a={balloonContentLayout:ymaps.templateLayoutFactory.createClass(n.balloonTemplate)};var i={markerId:n.markerId,markerType:n.markerType||"placemark",coords:B(n.coords),hintContent:n.hintContent,markerFill:n.markerFill,circleRadius:+n.circleRadius,clusterName:n.clusterName,markerStroke:n.markerStroke,balloon:n.balloon,callbacks:n.callbacks,properties:n.properties,options:n.options,balloonOptions:a};return n.icon&&["default#image","default#imageWithContent"].includes(n.icon.layout)?(i.iconContent=n.icon.content,i.iconLayout=n.icon.layout,i.iconImageHref=n.icon.imageHref,i.iconImageSize=n.icon.imageSize,i.iconImageOffset=n.icon.imageOffset,i.iconContentOffset=n.icon.contentOffset,n.icon.contentLayout&&"string"==typeof n.icon.contentLayout&&(i.iconContentLayout=ymaps.templateLayoutFactory.createClass(n.icon.contentLayout))):i.icon=n.icon,i}})).filter((function(e){return e&&e.markerType})):[]},createMarkers:function(e){var t=this,n=[],a=this.getMarkersFromSlots(e);e&&this.deleteMarkers(e);for(var i=0;i<a.length;i++){var r=a[i],o=G(r.markerType,this.useObjectManager),s={hintContent:r.hintContent,iconContent:r.icon?r.icon.content:r.iconContent,markerId:r.markerId},c=r.balloon?{balloonContentHeader:r.balloon.header,balloonContentBody:r.balloon.body,balloonContentFooter:r.balloon.footer}:{},l=Object.assign(s,c,r.properties),u=r.iconLayout?{iconLayout:r.iconLayout,iconImageHref:r.iconImageHref,iconImageSize:r.iconImageSize,iconImageOffset:r.iconImageOffset,iconContentOffset:r.iconContentOffset,iconContentLayout:r.iconContentLayout}:{preset:r.icon&&"islands#".concat(H(r),"Icon")},d=r.markerStroke?{strokeColor:r.markerStroke.color||"0066ffff",strokeOpacity:parseFloat(r.markerStroke.opacity)>=0?parseFloat(r.markerStroke.opacity):1,strokeStyle:r.markerStroke.style,strokeWidth:parseFloat(r.markerStroke.width)>=0?parseFloat(r.markerStroke.width):1}:{},p=r.markerFill?{fill:r.markerFill.enabled||!0,fillColor:r.markerFill.color||"0066ff99",fillOpacity:parseFloat(r.markerFill.opacity)>=0?parseFloat(r.markerFill.opacity):1,fillImageHref:r.markerFill.imageHref||""}:{},m=Object.assign(u,d,p,r.balloonOptions,r.options);"Circle"===o&&(r.coords=[r.coords,r.circleRadius]);var h=U({properties:l,options:m,markerType:o,coords:r.coords,clusterName:r.clusterName,callbacks:r.callbacks},this.useObjectManager);n.push(h)}return this.placemarks&&this.placemarks.forEach((function(e){var a=e.markerType,i=void 0===a?"Placemark":a,r=e.properties,o=e.options,s=void 0===o?{}:o,c=e.coords,l=e.clusterName,u=e.callbacks,d=e.balloonTemplate,p=G(i,t.useObjectManager);if(d){var m=ymaps.templateLayoutFactory.createClass(d);s.balloonContentLayout=m}var h=U({properties:r,options:s,markerType:p,coords:c,clusterName:l,callbacks:u},t.useObjectManager);n.push(h)})),n},setMarkers:function(e){var t={options:this.clusterOptions,callbacks:this.clusterCallbacks,map:this.myMap,useObjectManager:this.useObjectManager,objectManagerClusterize:this.objectManagerClusterize};!function(e,t){var n=t.options,a=t.callbacks,i=t.map,r=t.useObjectManager,o=t.objectManagerClusterize,s={},c=[];if(e.forEach((function(e){e.clusterName?s[e.clusterName]=s[e.clusterName]?[].concat(L(s[e.clusterName]),[e]):[e]:c.push(e)})),Object.keys(s).forEach((function(e){var t=n[e]||{},c=a[e]||{},l=t.layout||"\n      <div>{{ properties.balloonContentHeader }}</div>\n      <div>{{ properties.balloonContentBody }}</div>\n      <div>{{ properties.balloonContentFooter }}</div>\n    ";t.clusterBalloonItemContentLayout=ymaps.templateLayoutFactory.createClass(l);var u=t.clusterLayout?ymaps.templateLayoutFactory.createClass(t.clusterLayout):t.clusterBalloonContentLayout||"cluster#balloonTwoColumns";t.clusterBalloonContentLayout=u;var d=t.clusterIconContentLayout;if(t.clusterIconContentLayout=d&&ymaps.templateLayoutFactory.createClass(d),r){var p=new ymaps.ObjectManager(Object.assign({clusterize:o},t));Object.keys(c).forEach((function(e){p.clusters.events.add(e,c[e])})),p.add(s[e]),i.geoObjects.add(p)}else{var m=new ymaps.Clusterer(t);Object.keys(c).forEach((function(e){m.events.add(e,c[e])})),t.createCluster&&(m.createCluster=t.createCluster),m.add(s[e]),i.geoObjects.add(m)}})),c.length){var l=r?new ymaps.ObjectManager({clusterize:!1}):new ymaps.GeoObjectCollection;c.forEach((function(e){return l.add(e)})),i.geoObjects.add(l)}}(this.createMarkers(e),t),e&&this.$emit("markers-was-change",e)},deleteMarkers:function(e){var t=this;this.myMap&&(this.myMap.geoObjects.each((function(n){var a=[];if(t.useObjectManager)n.remove(e);else{var i,r=function(t){var n=t.properties.get("markerId");e.includes(n)&&a.push(t)};if(n.each)n.each(r),i=n.getLength();else{var o=n.getGeoObjects();o.forEach(r),i=o.length}0===i||i===a.length?t.myMap.geoObjects.remove(n):a.length&&a.forEach((function(e){return n.remove(e)}))}})),this.$emit("markers-was-delete",e))},init:function(){var e=this;if(window.ymaps&&ymaps.GeoObjectCollection&&(this.initWithoutMarkers||this.$slots.default||this.placemarks.length)){if(this.$emit("map-initialization-started"),this.myMap=new ymaps.Map(this.ymapId,{center:this.coordinates,zoom:+this.zoom,behaviors:this.behaviors,controls:this.controls,type:"yandex#".concat(this.mapType)},this.options),this.myMap.events.add("click",this.onMapClick),this.zoomControl&&(this.myMap.controls.remove("zoomControl"),this.myMap.controls.add(new ymaps.control.ZoomControl(this.zoomControl))),this.detailedControls)Object.keys(this.detailedControls).forEach((function(t){e.myMap.controls.remove(t),e.myMap.controls.add(t,e.detailedControls[t])}));!1===this.scrollZoom&&this.myMap.behaviors.disable("scrollZoom"),this.setMarkers(),this.showAllMarkers&&this.myMap.setBounds(this.myMap.geoObjects.getBounds()),this.$emit("map-was-initialized",this.myMap)}},onMapClick:function(e){this.$emit("click",e)}},watch:{coordinates:function(e){this.myMap.panTo&&this.myMap.panTo(e)},placemarks:function(){window.ymaps&&(this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.setMarkers())},zoom:function(){this.myMap.setZoom(this.zoom)}},render:function(e){return e("section",{class:"ymap-container",ref:"mapContainer"},[e("div",{attrs:{id:this.ymapId,class:this.ymapClass,style:this.style}}),e("div",{ref:"markersContainer",attrs:{class:"ymap-markers"}},[this.$slots.default])])},mounted:function(){var e=this;if(this.$attrs["map-link"]||this.$attrs.mapLink)throw new Error("Vue-yandex-maps: Attribute mapLink is not supported. Use settings.");this.mapObserver=new MutationObserver((function(){e.myMap.container.fitToViewport()}));var t=this.$refs.mapContainer;if(this.mapObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!1}),J.scriptIsNotAttached){var n=this.debug;K(W(W(W({},this.$options.pluginOptions),this.settings),{},{debug:n}))}if(J.ymapReady)ymaps.ready(this.init);else{var a=function(){return ymaps.ready(e.init)};J.$on("scriptIsLoaded",a),this.$on("hook:beforeDestroy",(function(){return J.$off("scriptIsLoaded",a)}))}},beforeDestroy:function(){this.mapObserver.disconnect(),this.myMap.geoObjects.removeAll(),this.myMap.events.remove("click",this.onMapClick),this.myMap.destroy()},destroyed:function(){this.mapObserver=null,this.myMap=null}},ee=["placemark","polyline","rectangle","polygon","circle"],te=[],ne={inject:["addMarker","deleteMarker","rerender","compareValues"],props:{coords:{type:Array,required:!0,validator:function(e){return!e.filter((function(e){return Number.isNaN(e)})).length}},hintContent:String,icon:Object,balloon:Object,markerType:{type:String,validator:function(e){return ee.includes(e.toLowerCase())},default:"placemark"},markerFill:Object,markerStroke:Object,clusterName:[String,Number],circleRadius:{validator:function(e){return!Number.isNaN(e)},default:1e3},callbacks:Object,balloonTemplate:String,markerId:{type:[String,Number],required:!0},properties:Object,options:Object},render:function(){},mounted:function(){var e=this;this.$parent._isMounted&&this.addMarker(this.markerId),Object.keys(this.$props).forEach((function(t){te.push(e.$watch(t,(function(t,n){return e.compareValues({newVal:t,oldVal:n,id:e.markerId})})))}))},beforeDestroy:function(){te.forEach((function(e){return e()})),this.deleteMarker(this.markerId)}};Q.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Q.pluginOptions=t,e.component("yandex-map",Q),e.component("ymap-marker",ne)};var ae=Q;if("undefined"!=typeof window){$.default.use(ae,{apiKey:"46c69919-a571-416e-8198-189ed26c6a79",lang:"ru_RU",coordorder:"latlong",version:"2.1"})}var ie=n("hFEP"),re=n("Ghaw"),oe=n("Ffxs");n("PnIt"),n("NCbh");function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=T.modalName.checkout.PICKUP_POINT,de={name:ue,components:{VSvg:a.a,VLink:i.a,VButton:o.a,VSelect:y.a,CheckoutOptionCard:m.a,GeneralModal:C.a},data:function(){return{selectedPickupPoint:null,selectedDeliveryMethod:null,showMap:!1,coords:[55.755814,37.617635],markerIcon:{layout:"default#image",imageHref:oe.a,imageSize:[24,24],imageOffset:[0,0]},clusterMarkerIcon:{href:oe.a,size:[32,32],offset:[0,0]},tabs:[{name:"Карта",icon:"map"},{name:"Список",icon:"list"}],activeTab:0}},computed:ce(ce(ce({},Object(g.c)(P.c,[re.p,re.l,re.z])),Object(g.d)(w.b,{isOpen:function(e){return e[w.a][ue]&&e[w.a][ue].open}})),{},{filteredPickupPoints:function(){var e=this;return this[re.p].filter((function(t){return!e.selectedDeliveryMethod||t.methodID===e.selectedDeliveryMethod.id}))},clusterOptions:function(){return{"default-cluster":{preset:"islands#blackClusterIcons"}}},isTabletLg:function(){return this.$mq.tabletLg}}),methods:ce(ce(ce({},Object(g.b)(w.b,[j.a])),Object(g.b)(P.c,[ie.v])),{},{onShowPoint:function(e){this.selectedPickupPoint=e,console.log(this.selectedPickupPoint),this.activeTab=1},onSelectPoint:function(e){this[ie.v](this.selectedPickupPoint),this.selectedPickupPoint=null,this.onClose()},onBackClick:function(){this.selectedPickupPoint=null},onClose:function(){this.selectedDeliveryMethod=null,this.CHANGE_MODAL_STATE({name:ue,open:!1})},onTabClick:function(e){this.activeTab!==e&&(this.selectedPickupPoint=null,this.activeTab=e)},initHandler:function(e){var t=this;e.geoObjects.events.add("click",(function(e){if(!e._defaultPrevented){var n=+e.get("target").properties._data.markerId.split("-")[1],a=t.filteredPickupPoints.find((function(e){return e.id===n}));t.onShowPoint(a)}}))}}),mounted:function(){var e=this;setTimeout((function(){return e.showMap=!0}),400)}},pe=Object(_.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("general-modal",{staticClass:"checkout-pickup-point-modal",attrs:{type:e.isTabletLg?"fullscreen":"wide","is-scroll-locked":!1,"is-mobile":e.isTabletLg},on:{close:e.onClose},scopedSlots:e._u([{key:"header",fn:function(){return[e.selectedPickupPoint?[n("button",{staticClass:"checkout-pickup-point-modal__header-btn checkout-pickup-point-modal__header-btn--arrow",on:{click:function(t){return t.preventDefault(),e.onBackClick(t)}}},[n("v-svg",{attrs:{name:"arrow-small",width:"24",height:"24"}}),e._v("\n                Назад к списку\n            ")],1)]:n("button",{staticClass:"checkout-pickup-point-modal__header-btn checkout-pickup-point-modal__header-btn--close",on:{click:function(t){return e.onClose()}}},[n("v-svg",{attrs:{name:"cross",width:"24",height:"24"}}),e._v("Выбор пункта выдачи\n        ")],1)]},proxy:!0},{key:"content",fn:function(){return[e.isTabletLg?n("div",{staticClass:"checkout-pickup-point-modal__tabs"},e._l(e.tabs,(function(t,a){return n("button",{key:a,staticClass:"checkout-pickup-point-modal__tabs-button",class:{"is-active":e.activeTab===a},attrs:{type:"button"},on:{click:function(t){return e.onTabClick(a)}}},[n("v-svg",{staticClass:"checkout-pickup-point-modal__tabs-icon",attrs:{name:t.icon,width:"24",height:"24"}}),e._v("\n                "+e._s(t.name)+"\n            ")],1)})),0):e._e(),e._v(" "),e.isTabletLg&&0!==e.activeTab?e._e():n("div",{staticClass:"checkout-pickup-point-modal__map"},[e.showMap?n("yandex-map",{attrs:{zoom:11,coords:e.coords,controls:[],"cluster-options":e.clusterOptions,showAllMarkers:""},on:{"map-was-initialized":e.initHandler}},[e.filteredPickupPoints.length?e._l(e.filteredPickupPoints,(function(t){return n("ymap-marker",{key:t.id+"-"+t.methodID,attrs:{"marker-id":"marker-"+t.id,coords:t.map.coords,icon:e.markerIcon,"cluster-name":"default-cluster"}})})):e._e()],2):e._e()],1),e._v(" "),e.isTabletLg&&1!==e.activeTab||!e.selectedPickupPoint?e._e():n("div",{directives:[{name:"scroll-lock",rawName:"v-scroll-lock",value:e.selectedPickupPoint,expression:"selectedPickupPoint"}],staticClass:"container container--tablet-lg checkout-pickup-point-modal__details"},[e.isTabletLg?e._e():n("v-link",{staticClass:"checkout-pickup-point-modal__details-back-link",attrs:{tag:"button"},on:{click:function(t){return t.stopPropagation(),e.onBackClick(t)}}},[n("v-svg",{attrs:{modifier:"icon--rotate-deg90",name:"arrow-small",width:"24",height:"24"}}),e._v(" Назад к\n                списку\n            ")],1),e._v(" "),n("div",{staticClass:"checkout-pickup-point-modal__details-info"},[n("div",{staticClass:"checkout-pickup-point-modal__details-info-main"},[n("h3",{staticClass:"checkout-pickup-point-modal__details-info-main-hl"},[e._v("\n                        "+e._s(e.selectedPickupPoint.title)+"\n                    ")]),e._v(" "),n("div",[e._v(e._s(e.selectedPickupPoint.name))]),e._v(" "),n("div",[e._v(e._s(e.selectedPickupPoint.phone))])]),e._v(" "),n("div",{staticClass:"checkout-pickup-point-modal__details-info-schedule"},[e.selectedPickupPoint.startDate?[e._v("\n                        "+e._s(e.selectedPickupPoint.startDate)+"\n                    ")]:e._e(),e._v(" "),n("ul",{staticClass:"checkout-pickup-point-modal__details-info-schedule-list"},e._l(e.selectedPickupPoint.schedule,(function(t){return n("li",{key:t.id,staticClass:"checkout-pickup-point-modal__details-info-schedule-item"},[n("div",[e._v(e._s(t.title))]),e._v(" "),n("div",[e._v(e._s(t.time))])])})),0)],2)]),e._v(" "),e.selectedPickupPoint.description?n("div",{staticClass:"checkout-pickup-point-modal__details-desc"},[n("div",{staticClass:"text-bold"},[e._v("\n                    Как добраться\n                ")]),e._v("\n                "+e._s(e.selectedPickupPoint.description)+"\n            ")]):e._e(),e._v(" "),n("div",{staticClass:"checkout-pickup-point-modal__details-payment"},[n("div",{staticClass:"text-bold"},[e._v("\n                    Принимаются к оплате\n                ")]),e._v("\n                "+e._s(e.selectedPickupPoint.payment)+"\n            ")]),e._v(" "),n("v-button",{staticClass:"checkout-pickup-point-modal__details-accept",on:{click:function(t){return t.stopPropagation(),e.onSelectPoint(t)}}},[e._v("\n                Выбрать\n            ")])],1),e._v(" "),e.filteredPickupPoints.length?[e.isTabletLg&&1!==e.activeTab||e.selectedPickupPoint?e._e():n("div",{staticClass:"checkout-pickup-point-modal__filter"},[n("div",{staticClass:"container checkout-pickup-point-modal__filter-header"},[e.isTabletLg?e._e():n("h3",{staticClass:"checkout-pickup-point-modal__filter-header-hl"},[e._v("\n                        Выбор пункта выдачи\n                    ")]),e._v(" "),n("div",{staticClass:"checkout-pickup-point-modal__filter-header-controls"},[n("v-select",{attrs:{placeholder:"Тип пункта выдачи","track-by":"id",label:"title",options:e.deliveryMethods,searchable:!1},model:{value:e.selectedDeliveryMethod,callback:function(t){e.selectedDeliveryMethod=t},expression:"selectedDeliveryMethod"}})],1)]),e._v(" "),n("ul",{directives:[{name:"scroll-lock",rawName:"v-scroll-lock",value:e.isOpen,expression:"isOpen"}],staticClass:"checkout-pickup-point-modal__filter-list"},e._l(e.filteredPickupPoints,(function(t){return n("checkout-option-card",{key:t.id,staticClass:"checkout-pickup-point-modal__filter-list-item",attrs:{readonly:""},on:{cardClick:function(n){return e.onShowPoint(t)}}},[n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))]),e._v(" "),n("p",[e._v(e._s(t.name))]),e._v(" "),t.startDate?n("p",{staticClass:"text-grey text-sm"},[e._v(e._s(t.startDate))]):e._e()])})),1)])]:[n("div",{staticClass:"checkout-pickup-point-modal__filter"},[n("span",{staticClass:"checkout-pickup-point-modal__filter-empty-text"},[e._v("\n                    Не найдено ни одного пункта самовывоза.\n                ")])])]]},proxy:!0}])})}),[],!1,null,null,null).exports;n("vLQ8");function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve={name:"checkout-pickup-point-panel",components:{VButton:o.a},data:function(){return{showMap:!1,coords:[55.755814,37.617635],markerIcon:{layout:"default#image",imageHref:oe.a,imageSize:[24,24],imageOffset:[0,0]}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(g.c)(P.c,[re.C])),methods:{onChangePickupPoint:function(){this.$emit("change-address")}},mounted:function(){var e=this;setTimeout((function(){return e.showMap=!0}),400)}},fe=Object(_.a)(ve,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkout-pickup-point-panel"},[e.selectedPickupPoint?n("div",{staticClass:"checkout-pickup-point-panel__address"},[n("div",{staticClass:"checkout-pickup-point-panel__address-info"},[n("div",{staticClass:"checkout-pickup-point-panel__address-info-main"},[n("h3",{staticClass:"checkout-pickup-point-panel__address-info-main-hl"},[e._v(e._s(e.selectedPickupPoint.title))]),e._v(" "),n("div",[e._v(e._s(e.selectedPickupPoint.name))]),e._v(" "),n("div",[e._v(e._s(e.selectedPickupPoint.phone))])]),e._v(" "),n("div",{staticClass:"checkout-pickup-point-panel__address-info-schedule"},[e.selectedPickupPoint.startDate?[e._v("\n                    "+e._s(e.selectedPickupPoint.startDate)+"\n                ")]:e._e(),e._v(" "),n("ul",{staticClass:"checkout-pickup-point-panel__address-info-schedule-list"},e._l(e.selectedPickupPoint.schedule,(function(t){return n("li",{key:t.id,staticClass:"checkout-pickup-point-panel__address-info-schedule-item"},[n("div",[e._v(e._s(t.title))]),e._v(" "),n("div",[e._v(e._s(t.time))])])})),0)],2)]),e._v(" "),e.selectedPickupPoint.description?n("div",{staticClass:"checkout-pickup-point-panel__address-desc"},[n("div",{staticClass:"text-bold"},[e._v("\n                Как добраться\n            ")]),e._v("\n            "+e._s(e.selectedPickupPoint.description)+"\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"checkout-pickup-point-panel__address-payment"},[n("div",{staticClass:"text-bold"},[e._v("\n                Принимаются к оплате\n            ")]),e._v("\n            "+e._s(e.selectedPickupPoint.payment)+"\n        ")]),e._v(" "),n("div",{staticClass:"checkout-pickup-point-panel__address-map"},[e.showMap?n("yandex-map",{attrs:{coords:e.selectedPickupPoint.map.coords,zoom:13,controls:[]}},[n("ymap-marker",{key:"selected-point-"+e.selectedPickupPoint.id,attrs:{"marker-id":"selected-point-"+e.selectedPickupPoint.id,coords:e.selectedPickupPoint.map.coords,icon:e.markerIcon}})],1):e._e()],1)]):n("div",{staticClass:"checkout-pickup-point-panel__choice"},[n("h3",{staticClass:"checkout-pickup-point-panel__title"},[e._v("Выберите пункт выдачи заказов")]),e._v(" "),n("v-button",{staticClass:"btn--outline",on:{click:e.onChangePickupPoint}},[e._v("\n            Выбрать\n        ")])],1)])}),[],!1,null,null,null).exports,_e=n("Y+p1"),ke=n.n(_e);n("Pe8P");function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge={name:"checkout-pickup-point-panel",components:{CheckoutOptionCard:m.a},computed:ye({},Object(g.c)(P.c,[re.a,re.x])),methods:ye(ye({},Object(g.b)(P.c,[ie.r])),{},{isEqualObject:function(e,t){return ke()(e,t)},onSetAddress:function(e){this[ie.r](e)},onChangeAddress:function(e,t){this.$emit("change-address",{address:e,index:t})}})},Oe=Object(_.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkout-address-panel"},[e.addresses&&e.addresses.length?n("ul",{staticClass:"checkout-address-panel__list"},e._l(e.addresses,(function(t,a){return n("checkout-option-card",{key:t.region_guid+"-"+(t.city_guid||t.settlment_guid)+"-"+t.house,staticClass:"checkout-address-panel__list-item",attrs:{selected:e.selectedAddress&&e.isEqualObject(e.selectedAddress,t)},on:{cardClick:function(n){return e.onSetAddress(t)},btnClick:function(n){return e.onChangeAddress(t,a)}}},[e._v("\n            "+e._s((t.city||t.settlement)+", "+(t.area?t.area+", ":"")+(t.street?t.street+", ":"")+t.house+" "+(t.block||"")+", "+t.post_index)+"\n        ")])})),1):n("h3",{staticClass:"checkout-address-panel__title"},[e._v("Добавьте адрес")])])}),[],!1,null,null,null).exports,Pe=n("Sryx"),we=n("SesW"),je=n("QmAe"),Te=n("GyY8");n("VK71");function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=T.modalName.checkout.RECIPIENT_EDIT,Ie={name:Me,mixins:[we.b],components:{VButton:o.a,VInput:r.a,VInputMask:Pe.a,GeneralModal:C.a,AttentionPanel:p.a},validations:{form:{name:{required:we.h},phone:{required:we.h,minLength:Object(we.e)(12)},email:{email:we.c}}},data:function(){return{form:{id:Object(je.f)(0,1e5),name:null,phone:null,email:null},maskOptions:Ee({},Te.g)}},computed:Ee(Ee({},Object(g.d)(w.b,{isOpen:function(e){return e[w.a][Me]&&e[w.a][Me].open},modalState:function(e){return e[w.a][Me]&&e[w.a][Me].state||{}}})),{},{isTablet:function(){return this.$mq.tablet},header:function(){return"Получатель"},emailError:function(){if(this.$v.form.email.$dirty&&!this.$v.form.email.email)return"Неправильный формат"},nameError:function(){if(this.$v.form.name.$dirty&&!this.$v.form.name.required)return"Обязательное поле"},phoneError:function(){if(this.$v.form.phone.$dirty){if(!this.$v.form.phone.required)return"Обязательное поле";if(!this.$v.form.phone.minLength)return"Неверно введен номер"}}}),methods:Ee(Ee({},Object(g.b)(w.b,[j.a])),{},{onSubmit:function(){this.$v.$touch(),this.$v.$invalid||(this.$emit("save",Ee({},this.form)),this.onClose())},onClose:function(){this.$emit("close"),this[j.a]({name:Me,open:!1})},init:function(){this.modalState.recipient&&(this.form=Object.assign({},this.form,this.modalState.recipient))}}),beforeMount:function(){this.init()}},xe=Object(_.a)(Ie,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isOpen?n("general-modal",{staticClass:"checkout-recipient-modal",attrs:{type:"sm",header:e.header,"is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"checkout-recipient-modal__body"},[e.isTablet?e._e():n("h3",{staticClass:"checkout-recipient-modal__hl"},[e._v(e._s(e.header))]),e._v(" "),n("form",{staticClass:"checkout-recipient-modal__form",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("v-input",{staticClass:"checkout-recipient-modal__form-row",attrs:{placeholder:"Введите имя и фамилию",error:e.nameError},scopedSlots:e._u([{key:"error",fn:function(t){var a=t.error;return[n("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[a?n("div",{key:a},[e._v(e._s(a))]):e._e()])]}}],null,!1,3034400235),model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[e._v("\n                    Имя и Фамилия\n                    ")]),e._v(" "),n("v-input-mask",{staticClass:"checkout-recipient-modal__form-row",attrs:{placeholder:"+7 ___ ___-__-__",options:e.maskOptions,error:e.phoneError,raw:""},scopedSlots:e._u([{key:"error",fn:function(t){var a=t.error;return[n("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[a?n("div",{key:a},[e._v(e._s(a))]):e._e()])]}}],null,!1,3034400235),model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}},[e._v("\n                    Телефон\n                    ")]),e._v(" "),n("v-input",{staticClass:"checkout-recipient-modal__form-row",attrs:{error:e.emailError},scopedSlots:e._u([{key:"error",fn:function(t){var a=t.error;return[n("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[a?n("div",{key:a},[e._v(e._s(a))]):e._e()])]}}],null,!1,3034400235),model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},[e._v("\n                    Email\n                    ")])],1)]),e._v(" "),n("attention-panel",{staticClass:"checkout-recipient-modal__panel"},[e._v("\n            При получении заказа необходимо иметь с собой документ, удостоверяющий личность\n        ")]),e._v(" "),n("div",{staticClass:"checkout-recipient-modal__submit"},[n("v-button",{staticClass:"checkout-recipient-modal__submit-btn",on:{click:e.onSubmit}},[e._v("\n                Добавить получателя\n            ")])],1)]},proxy:!0}],null,!1,3781200667)}):e._e()}),[],!1,null,null,null).exports,$e=n("VKYi"),Ne=n("YPqg"),Le=n("tCqp"),Ae=n("4mC1"),Ve=(n("BkRI"),n("sEfC")),Re=n.n(Ve),He=n("suXn"),Be=n("W6hq"),qe=n("4BeY"),Fe=n.n(qe),Ze=n("IaFt"),ze=n.n(Ze),Ge=new Fe.a({id:"icon-bonus",use:"icon-bonus-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="icon-bonus">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.2115 6.5H7.45831L7.0287 8.66369H11.54L11.3207 9.77877H6.8206L6.39099 11.9425H10.8834L9.58951 18.5H12.4529C15.1534 18.5 17.5 16.6203 17.5 14.1394C17.5 12.0818 15.8433 10.3914 13.7078 9.91369L13.9544 8.66369H16.8162L17.2115 6.5ZM12.4321 16.3363L13.2733 12.0482C14.3962 12.3466 15.1229 13.2211 15.1229 14.1394C15.1229 15.2766 14.0024 16.3363 12.4529 16.3363H12.4321Z" />\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 12C-2.89694e-07 5.37258 5.37258 2.89694e-07 12 0C18.6274 -2.89694e-07 24 5.37258 24 12C24 18.6274 18.6274 24 12 24C5.37259 24 2.89694e-07 18.6274 0 12ZM12 2C6.47716 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5229 22 12C22 6.47716 17.5229 2 12 2Z" />\n</symbol>'}),Ue=(ze.a.add(Ge),n("d3HE"),n("JUPh"),n("lK0d"),new Fe.a({id:"icon-apple",use:"icon-apple-usage",viewBox:"0 0 40 24",content:'<symbol viewBox="0 0 40 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="icon-apple">\n<g clip-path="url(#icon-apple_clip0)">\n<path d="M7.30792 6.0628C6.83917 6.60324 6.08917 7.0295 5.33917 6.9686C5.24542 6.23787 5.61261 5.46147 6.04229 4.98192C6.51104 4.42626 7.33136 4.03045 7.99542 4C8.07354 4.76118 7.76886 5.50714 7.30792 6.0628ZM7.98761 7.11323C6.90167 7.05233 5.97198 7.71456 5.45636 7.71456C4.93292 7.71456 4.14386 7.14367 3.28448 7.1589C2.16729 7.17412 1.12823 7.79068 0.557918 8.7726C-0.613957 10.7364 0.25323 13.6441 1.38604 15.2426C1.94073 16.0343 2.60479 16.902 3.47979 16.8716C4.30792 16.8411 4.63604 16.3463 5.63604 16.3463C6.64385 16.3463 6.93292 16.8716 7.80792 16.8563C8.71417 16.8411 9.28448 16.0647 9.83917 15.2731C10.472 14.3749 10.7298 13.4995 10.7454 13.4539C10.7298 13.4386 8.99542 12.7916 8.97979 10.843C8.96417 9.21408 10.347 8.43768 10.4095 8.39201C9.62823 7.26546 8.40948 7.14367 7.98761 7.11323ZM14.261 4.9058V16.7726H16.1517V12.7155H18.7689C21.1595 12.7155 22.8392 11.117 22.8392 8.80304C22.8392 6.48906 21.1907 4.9058 18.8314 4.9058H14.261ZM16.1517 6.45861H18.3314C19.972 6.45861 20.9095 7.31113 20.9095 8.81066C20.9095 10.3102 19.972 11.1703 18.3235 11.1703H16.1517V6.45861ZM26.2923 16.8639C27.4798 16.8639 28.5814 16.2778 29.0814 15.3492H29.1204V16.7726H30.8704V10.8658C30.8704 9.15319 29.4642 8.04948 27.3001 8.04948C25.2923 8.04948 23.8079 9.16841 23.7532 10.706H25.4564C25.597 9.97526 26.2923 9.49572 27.2454 9.49572C28.4017 9.49572 29.0501 10.0209 29.0501 10.9876V11.6422L26.6907 11.7793C24.4954 11.9087 23.3079 12.784 23.3079 14.3064C23.3079 15.844 24.5345 16.8639 26.2923 16.8639ZM26.8001 15.4558C25.7923 15.4558 25.1517 14.9838 25.1517 14.2607C25.1517 13.5147 25.7689 13.0809 26.9485 13.0124L29.0501 12.883V13.5528C29.0501 14.6641 28.0814 15.4558 26.8001 15.4558ZM33.2064 20C35.0501 20 35.9173 19.3149 36.6751 17.2369L39.9954 8.16365H38.0735L35.847 15.1741H35.8079L33.5814 8.16365H31.6048L34.8079 16.803L34.636 17.3283C34.347 18.2188 33.8782 18.5614 33.0423 18.5614C32.8939 18.5614 32.6048 18.5461 32.4876 18.5309V19.9543C32.597 19.9848 33.0657 20 33.2064 20Z" fill="black" />\n</g>\n<defs>\n<clipPath id="icon-apple_clip0">\n<rect width="40" height="24" fill="white" />\n</clipPath>\n</defs>\n</symbol>'})),Ke=(ze.a.add(Ue),new Fe.a({id:"icon-google",use:"icon-google-usage",viewBox:"0 0 40 24",content:'<symbol viewBox="0 0 40 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="icon-google">\n<g clip-path="url(#icon-google_clip0)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.9186 11.8165V16.5066H17.4414V4.92412H21.3591C21.8267 4.91428 22.2917 4.99782 22.7271 5.16992C23.1625 5.34202 23.5598 5.59927 23.896 5.92683C24.2356 6.2345 24.5058 6.61183 24.6886 7.03345C24.8714 7.45507 24.9625 7.91122 24.9557 8.37124C24.9654 8.83372 24.8757 9.29284 24.6928 9.71715C24.5099 10.1415 24.2381 10.5209 23.896 10.8295C23.2109 11.4875 22.3653 11.8162 21.3591 11.8156L18.9186 11.8165ZM18.9186 6.3501V10.3933H21.3958C21.6674 10.4014 21.9377 10.3523 22.1893 10.2492C22.441 10.1461 22.6685 9.99121 22.8574 9.79445C23.0452 9.61048 23.1946 9.39044 23.2965 9.14734C23.3985 8.90423 23.451 8.643 23.451 8.37909C23.451 8.11518 23.3985 7.85395 23.2965 7.61085C23.1946 7.36775 23.0452 7.14771 22.8574 6.96374C22.6709 6.76284 22.4442 6.60415 22.1922 6.4982C21.9402 6.39224 21.6687 6.34145 21.3958 6.34917L18.9186 6.3501Z" fill="#5F6368" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M28.3596 8.32324C29.4514 8.32324 30.3132 8.61713 30.9451 9.20489C31.5769 9.79266 31.8926 10.5985 31.8919 11.6225V16.5067H30.479V15.4069H30.4148C29.8031 16.3126 28.9896 16.7655 27.9742 16.7655C27.1075 16.7655 26.3824 16.5067 25.7989 15.9892C25.5188 15.7516 25.2949 15.4541 25.1435 15.1184C24.9921 14.7827 24.917 14.4171 24.9236 14.0484C24.9236 13.2284 25.2312 12.5762 25.8466 12.092C26.4619 11.6077 27.2834 11.365 28.311 11.3637C29.1881 11.3637 29.9105 11.5255 30.4781 11.8489V11.5088C30.4798 11.2575 30.4259 11.0089 30.3203 10.7811C30.2148 10.5533 30.0603 10.3521 29.868 10.1919C29.4773 9.83691 28.9682 9.64321 28.4422 9.64941C27.617 9.64941 26.9641 9.99998 26.4833 10.7011L25.1823 9.87583C25.898 8.84077 26.957 8.32324 28.3596 8.32324ZM26.4484 14.0808C26.4475 14.2701 26.4914 14.457 26.5766 14.6258C26.6618 14.7946 26.7859 14.9404 26.9384 15.0511C27.2651 15.31 27.6706 15.4471 28.0862 15.4393C28.7095 15.4382 29.307 15.1883 29.7478 14.7443C30.2371 14.2804 30.4818 13.7361 30.4818 13.1113C30.0212 12.7417 29.3789 12.5568 28.555 12.5568C27.955 12.5568 27.4546 12.7025 27.054 12.994C26.6494 13.2897 26.4484 13.6492 26.4484 14.0808Z" fill="#5F6368" />\n<path d="M35.0701 20L40.0026 8.58203H38.3942L36.1143 14.2749H36.0821L33.7379 8.58203H32.1323L35.3757 16.0049L33.5453 20H35.0701Z" fill="#5F6368" />\n<path d="M12.9495 10.8055C12.9501 10.352 12.912 9.8994 12.8357 9.45251H6.60596V12.0152H10.1741C10.1011 12.4245 9.94654 12.8147 9.71979 13.1622C9.49304 13.5097 9.19877 13.8074 8.85474 14.0373V15.7008H10.9842C12.2311 14.5428 12.9495 12.8303 12.9495 10.8055Z" fill="#4285F4" />\n<path d="M6.60585 17.308C8.38855 17.308 9.88957 16.7183 10.9841 15.7018L8.85463 14.0383C8.26193 14.4431 7.49858 14.6741 6.60585 14.6741C4.8828 14.6741 3.42031 13.5041 2.89734 11.9275H0.703613V13.6418C1.25344 14.7439 2.09653 15.6703 3.13877 16.3177C4.18101 16.965 5.38138 17.3079 6.60585 17.308Z" fill="#34A853" />\n<path d="M2.89763 11.9274C2.62116 11.1013 2.62116 10.2066 2.89763 9.38046V7.66614H0.703905C0.241374 8.59321 0.000488281 9.61639 0.000488281 10.6539C0.000488281 11.6915 0.241374 12.7147 0.703905 13.6418L2.89763 11.9274Z" fill="#FBBC04" />\n<path d="M6.60585 6.63393C7.54792 6.61843 8.45822 6.97696 9.13997 7.63202L11.0254 5.73287C9.82985 4.60177 8.24598 3.98077 6.60585 4.00007C5.38138 4.00013 4.18101 4.34298 3.13877 4.99037C2.09653 5.63775 1.25344 6.56417 0.703613 7.66622L2.89734 9.38053C3.42031 7.80392 4.8828 6.63393 6.60585 6.63393Z" fill="#EA4335" />\n</g>\n<defs>\n<clipPath id="icon-google_clip0">\n<rect width="40" height="24" fill="white" />\n</clipPath>\n</defs>\n</symbol>'})),Ye=(ze.a.add(Ke),new Fe.a({id:"icon-yandex",use:"icon-yandex-usage",viewBox:"0 0 56 24",content:'<symbol viewBox="0 0 56 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="icon-yandex">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.0934 6.65398H4.33402C3.18568 6.65398 2.07456 7.43927 2.07456 9.71861C2.07456 11.9211 3.09299 12.6299 4.33402 12.6299H5.0934V6.65398ZM3.90798 13.8559L1.64852 19.1039H0L2.48205 13.4919C1.31486 12.879 0.536944 11.7681 0.536944 9.71882C0.536944 6.84573 2.29653 5.40918 4.38963 5.40918H6.51964V19.1039H5.0934V13.8559H3.90798Z" fill="#FF0000" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M34.2298 14.2772C34.2298 11.2507 35.3599 9.31641 37.5455 9.31641C38.3788 9.31641 38.8604 9.54627 39.2679 9.81416L39.0642 11.2319C38.6752 10.8868 38.1196 10.5614 37.5269 10.5614C36.4896 10.5614 35.7489 11.7679 35.7489 14.2005C35.7489 16.6137 36.3044 17.993 37.4712 17.993C38.175 17.993 38.7123 17.7057 39.0456 17.3993L39.379 18.51C38.8789 18.9504 38.2862 19.2377 37.4342 19.2377C35.4338 19.2377 34.2298 17.5716 34.2298 14.2772ZM30.007 14.296V19.1037H28.5622V9.45022H30.007V13.9131L32.2481 9.45022H33.7114L31.3962 13.9897L34.0446 19.1037H32.4704L30.007 14.296ZM23.2095 13.396H25.5988C25.5988 11.7488 25.3395 10.5421 24.5061 10.5421C23.617 10.5421 23.3022 11.6721 23.2095 13.396ZM24.8024 19.2377C22.8761 19.2377 21.6909 17.6483 21.6909 14.6797C21.6909 11.5764 22.5244 9.31641 24.5061 9.31641C26.0619 9.31641 27.0807 10.5229 27.0807 13.7979V14.6219H23.1909C23.1909 16.8055 23.7836 17.9547 24.932 17.9547C25.747 17.9547 26.3953 17.5716 26.7657 17.3036L27.0992 18.4521C26.5065 18.9314 25.7284 19.2377 24.8024 19.2377ZM18.6532 10.6569H17.0417V10.8296C17.0417 12.8597 16.9492 15.8282 16.1713 17.8778H18.6532V10.6569ZM20.8201 20.9999H19.5238V19.1037H15.523V20.9999H14.2266V17.8778H14.8008C15.6526 15.8282 15.7452 12.8406 15.7452 10.2738V9.45022H20.0794V17.8778H20.8201V20.9999ZM13.3931 9.44997V19.1034H11.9669V14.7749H9.81831V19.1034H8.37354V9.44997H9.81831V13.5486H11.9669V9.44997H13.3931Z" fill="black" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M43.0002 10.4327C43.0002 9.47814 43.0806 8.8724 45.0684 7.39666C46.714 6.17495 52 2 52 2V9H56V19H44.2531C43.564 19 43 18.4391 43 17.7537L43.0002 10.4327Z" fill="#FACA22" />\n<path d="M52 13V9L54 9.00001V15L45 18L52 13Z" fill="#C9A521" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M48.3743 8.50845C48.8052 8.02762 49.4345 7.85783 49.78 8.1294C50.1256 8.40097 50.0565 9.01096 49.6256 9.49178C49.195 9.97255 48.5655 10.1421 48.2199 9.87054C47.8744 9.59903 47.9436 8.98921 48.3743 8.50845Z" fill="#6F8F9D" />\n</symbol>'}));ze.a.add(Ye),n("fIfu"),n("eZRa"),n("GW+4"),n("k1X8");function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e){var t=e.selectedDate?new Date(e.selectedDate):null,n=e.deliveryTimeStart?null:e.availableDateTimes&&e.selectedDate&&e.availableDateTimes[e.selectedDate]&&e.availableDateTimes[e.selectedDate][0],a={};return n&&(a={deliveryTimeStart:n.from,deliveryTimeEnd:n.to,deliveryTimeCode:n.code}),Xe(Xe(Xe({},e),a),{},{selectedDate:t})}function et(e){var t=e.items;return Xe(Xe({},e),{},{items:Object(He.orderBy)(t.map(Qe),["selectedDate"],["asc"])})}var tt={name:"checkout-product-panel",mixins:[we.b],components:{VSvg:a.a,VLink:i.a,VButton:o.a,VInput:r.a,VCheck:u.a,VSpinner:d.a,Price:c.a,AttentionPanel:p.a,CheckoutProductCard:k,CheckoutOptionCard:m.a,CheckoutAddressPanel:Oe,CheckoutPickupPointPanel:fe,CheckoutDateModal:x,CheckoutRecipientModal:xe,CheckoutPickupPointModal:pe,AddressEditModal:$e.a},validations:function(){var e,t;switch(this[re.D]){case Le.e.PICKUP:return Je(e={},re.c,{valid:function(e){return!0===e}}),Je(e,re.E,{required:we.h}),Je(e,re.C,{required:we.h}),e;case Le.e.DELIVERY:case Le.e.EXPRESS:default:return Je(t={},re.c,{valid:function(e){return!0===e}}),Je(t,re.E,{required:we.h}),Je(t,re.x,{required:we.h}),t}},data:function(){return{bonusAmount:null,certificateCode:null,recipientIndexToChange:null,addressIndexToChange:null}},computed:Xe(Xe(Xe(Xe(Xe({},Object(g.d)([O.g])),Object(g.d)(Ne.c,Je({},Ne.e,(function(e){return e[Ne.h]&&e[Ne.h][Ne.e]||!1})))),Object(g.d)(w.b,{isPickupPointModalOpen:function(e){return e[w.a][pe.name]&&e[w.a][pe.name].open},isDateModalOpen:function(e){return e[w.a][x.name]&&e[w.a][x.name].open},isAddressModalOpen:function(e){return e[w.a][T.modalName.profile.ADDRESS_EDIT]&&e[w.a][T.modalName.profile.ADDRESS_EDIT].open},isRecipientModalOpen:function(e){return e[w.a][T.modalName.checkout.RECIPIENT_EDIT]&&e[w.a][T.modalName.checkout.RECIPIENT_EDIT].open}})),Object(g.c)(P.c,[re.g,re.d,re.n,re.w,re.E,re.u,re.D,re.o,re.B,re.k,re.y,re.a,re.x,re.C,re.m,re.A,re.e,re.i,re.c,re.F,re.s,re.b,re.h,re.j,re.r,re.v])),{},{computedDeliveryTypes:function(){return this[re.m].map(et)},computedSelectedDeliveryType:function(){return et(this[re.A])},isReceiveMethodPending:function(){return this[re.v]===T.requestStatus.PENDING},canDeliver:function(){var e=this[re.u];return e&&e.length>0},isAddressPending:function(){return this[re.b]===T.requestStatus.PENDING},isBonusPending:function(){return this[re.h]===T.requestStatus.PENDING},isCertificatePending:function(){return this[re.j]===T.requestStatus.PENDING},isPromocodePending:function(){return this[re.r]===T.requestStatus.PENDING},showPanels:function(){return this.isDelivery?this[re.x]:this[re.C]},isTablet:function(){return this.$mq.tablet},isDelivery:function(){var e=this[re.D];return e===Le.e.DELIVERY||e===Le.e.EXPRESS},agreementError:function(){if(this.$v.agreement.$dirty&&!this.$v.agreement.valid)return this.debounce_scrollToError(this.$refs.agreement),"Подтвердите согласие с условиями заказа и доставки"},addressError:function(){switch(this[re.D]){case Le.e.PICKUP:if(this.$v.selectedPickupPoint.$dirty&&!this.$v.selectedPickupPoint.required)return this.debounce_scrollToError(this.$refs.address),"Укажите пункт самовывоза";break;case Le.e.DELIVERY:case Le.e.EXPRESS:default:if(this.$v.selectedAddress.$dirty&&!this.$v.selectedAddress.required)return this.debounce_scrollToError(this.$refs.address),"Укажите адрес доставки"}},maxAmountBonus:function(){return this[re.n]<this[re.d]?this[re.n]:this[re.d]}}),methods:Xe(Xe(Xe({},Object(g.b)(P.c,[ie.h,ie.w,ie.u,ie.s,ie.y,ie.t,ie.r,ie.a,ie.g,ie.b,ie.m,ie.c,ie.n,ie.d,ie.o,ie.x,ie.e,ie.i])),Object(g.b)(w.b,[j.a])),{},{validate:function(){return this.$v.$touch(),!this.$v.$invalid},formatPhoneNumber:function(e){return Object(je.d)(e)},generateChunkNote:function(e){var t=new Date(e.selectedDate),n=(new Date).getDate(),a="";if(e.selectedDate){a=n===t.getDate()?"сегодня":n+1===t.getDate()?"завтра":T.dayOfTheWeek[t.getDay()];var i=e.deliveryTimeStart&&e.deliveryTimeEnd?", с ".concat(e.deliveryTimeStart,":00 до ").concat(e.deliveryTimeEnd,":00"):"";return"".concat(t.toLocaleDateString(this[O.g],{month:"long",day:"numeric"}),", ").concat(a).concat(i)}return"Для данного адреса сейчас нет доступных дат доставки"},generatePackageNote:function(e){var t=this,n={month:"long",day:"numeric"};if(e.typeID===Le.b.CONSOLIDATION){var a=new Date(e.items[0].selectedDate);return"Доставим всё ".concat(a.toLocaleDateString(this[O.g],n))}return Array.from(new Set(e.items.map((function(e){return e.selectedDate})))).reduce((function(e,a,i){return e+"".concat(i>0?", ":" ").concat(new Date(a).toLocaleDateString(t[O.g],n))}),"Доставим")},onSetConfirmationType:function(e){this[ie.t](e)},onSetReceiveMethod:function(e){this[ie.w](e)},onSetAgreement:function(e){this[ie.s](Number(e))},onSetDeliveryType:function(e){var t=this[re.m]&&this[re.m].find((function(t){return t.id===e}));this[ie.u](t)},onDateChanged:function(e){this[ie.h]({id:e.id,selectedDate:e.selectedDate[0],deliveryTimeStart:e.deliveryTimeStart,deliveryTimeEnd:e.deliveryTimeEnd,deliveryTimeCode:e.deliveryTimeCode})},onChangeDate:function(e){var t=this[re.A].items.find((function(t){return t.id===e})),n={id:t.id,selectedDate:[t.selectedDate],deliveryTimeStart:t.deliveryTimeStart,deliveryTimeEnd:t.deliveryTimeEnd,deliveryTimeCode:t.deliveryTimeCode,availableDateTimes:Xe({},t.availableDateTimes)};this[j.a]({name:x.name,open:!0,state:n})},isEqualObject:function(e,t){return ke()(e,t)},onSetRecipient:function(e){this[ie.x](e)},onChangeRecipient:function(e,t){this.recipientIndexToChange=t,this[j.a]({name:T.modalName.checkout.RECIPIENT_EDIT,open:!0,state:{recipient:Xe({},e)}})},onAddRecipient:function(){this[j.a]({name:T.modalName.checkout.RECIPIENT_EDIT,open:!0,state:{recipient:{}}})},onSaveRecipient:function(e){null!==this.recipientIndexToChange?this[ie.i]({index:this.recipientIndexToChange,recipient:e}):this[ie.e](e)},onCloseRecipientModal:function(){this.recipientIndexToChange=null},onChangeAddress:function(e){var t=e.address,n=e.index;this.addressIndexToChange=n,this[j.a]({name:T.modalName.profile.ADDRESS_EDIT,open:!0,state:{address:Xe({},t)}})},onAddAddress:function(){this[j.a]({name:T.modalName.profile.ADDRESS_EDIT,open:!0,state:{address:{}}})},onSaveAddress:function(e){null!==this.addressIndexToChange?this[ie.g]({index:this.addressIndexToChange,address:e}):this[ie.a](e)},onCloseAddressModal:function(){this.addressIndexToChange=null},onChangePickupPoint:function(){this[j.a]({name:pe.name,open:!0})},scrollToError:function(e){window.scrollTo({top:Object(je.e)(e).y-24,behavior:"smooth"})},generateItemProductUrl:function(e){if(Array.isArray(e.categoryCodes)){var t=e.categoryCodes[e.categoryCodes.length-1];return Object(Be.h)(t,e.code)}}}),created:function(){this.agreementTypes=T.agreementTypes},mounted:function(){this.debounce_scrollToError=Re()(this.scrollToError,Ae.g)},watch:{computedDeliveryTypes:function(e){var t=this,n=this[re.A];e&&e.forEach((function(e){e&&e.items&&e.items.forEach((function(e){n&&t[ie.h](Xe({},e))}))}))}}},nt=Object(_.a)(tt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkout-product-panel"},[e.canDeliver?[n("div",{staticClass:"checkout-product-panel__item"},[e._m(0),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.recipients,(function(t,a){return n("checkout-option-card",{key:t.id,staticClass:"checkout-product-panel__item-card",attrs:{selected:e.selectedRecipient&&e.isEqualObject(t,e.selectedRecipient),"show-check":e.recipients.length>1},on:{cardClick:function(n){return e.onSetRecipient(t)},btnClick:function(n){return e.onChangeRecipient(t,a)}}},[n("p",[e._v(e._s(t.name))]),e._v(" "),n("p",[e._v(e._s(e.formatPhoneNumber(t.phone)))]),e._v(" "),n("p",[e._v(e._s(t.email))])])})),1),e._v(" "),n("v-link",{staticClass:"checkout-product-panel__item-header-link",attrs:{tag:"button"},on:{click:e.onAddRecipient}},[n("v-svg",{attrs:{name:"plus",width:"24",height:"24"}}),e._v(" Добавить нового получателя\n            ")],1)],1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--receive-method"},[n("div",{staticClass:"checkout-product-panel__item-header"},[n("h2",{staticClass:"checkout-product-panel__item-header-hl"},[e._v("\n                    Способ получения "),n("v-spinner",{attrs:{width:"24",height:"24",show:e.isReceiveMethodPending}})],1)]),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.receiveMethods,(function(t){return n("checkout-option-card",{key:t.id,staticClass:"checkout-product-panel__item-card",attrs:{selected:t.id===e.selectedReceiveMethodID,readonly:""},on:{cardClick:function(n){return e.onSetReceiveMethod(t)}}},[n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))]),e._v(" "),n("p",[n("price",e._b({},"price",t.price,!1)),e._v(" \n                        "),t.cost?n("price",e._b({staticClass:"text-grey text-sm text-strike"},"price",t.cost,!1)):e._e()],1),e._v(" "),n("p",{staticClass:"text-grey text-sm"},[e._v(e._s(t.description))])])})),1)]),e._v(" "),n("div",{staticClass:"checkout-product-panel__item"},[n("div",{ref:"address",staticClass:"checkout-product-panel__item-header",class:{"checkout-product-panel__item-header--error":e.addressError}},[n("h2",{staticClass:"checkout-product-panel__item-header-hl"},[e._v("\n                    "+e._s(e.isDelivery?"Адрес доставки":"Пункт самовывоза")+" \n                    "),n("v-spinner",{attrs:{width:"24",height:"24",show:e.isAddressPending}})],1)]),e._v(" "),n("transition",{attrs:{name:"fade-in"}},[e.isDelivery?n("checkout-address-panel",{on:{"change-address":e.onChangeAddress}}):n("checkout-pickup-point-panel",{on:{"change-address":e.onChangePickupPoint}})],1),e._v(" "),e.isDelivery?n("v-link",{staticClass:"checkout-product-panel__item-header-link",attrs:{tag:"button"},on:{click:e.onAddAddress}},[n("v-svg",{attrs:{name:"plus",width:"24",height:"24"}}),e._v(" Добавить новый адрес\n            ")],1):e.selectedPickupPoint?n("v-link",{staticClass:"checkout-product-panel__item-header-link",attrs:{tag:"button"},on:{click:e.onChangePickupPoint}},[n("v-svg",{attrs:{name:"pin",width:"16",height:"16"}}),e._v("  Выбрать другой\n            ")],1):e._e()],1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--delivery"},[n("div",{ref:"date",staticClass:"checkout-product-panel__item-header"},[n("h2",{staticClass:"checkout-product-panel__item-header-hl"},[e._v("Дата и время доставки")])]),e._v(" "),n("transition",{attrs:{name:"fade-in",mode:"out-in"}},[e.showPanels?n("div",{key:"not-empty"},[e.computedDeliveryTypes&&e.computedDeliveryTypes.length>1?n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.computedDeliveryTypes,(function(t){return n("checkout-option-card",{key:"delivery-type-"+t.id+"-"+t.methodID,staticClass:"checkout-product-panel__item-card",attrs:{selected:t.id===e.selectedDeliveryType.id,readonly:""},on:{cardClick:function(n){return e.onSetDeliveryType(t.id)}}},[n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))]),e._v(" "),n("p",[e._v(e._s(t.description))]),e._v(" "),n("p",{staticClass:"text-grey text-sm"},[e._v(e._s(e.generatePackageNote(t)))])])})),1):e._e(),e._v(" "),e.selectedDeliveryType?n("transition-group",{attrs:{tag:"ul",name:"chunk-item"}},e._l(e.computedSelectedDeliveryType.items,(function(t){return n("li",{key:t.id,staticClass:"checkout-product-panel__item checkout-product-panel__item--child"},[n("div",{staticClass:"checkout-product-panel__item-header"},[n("h3",{staticClass:"checkout-product-panel__item-header-hl"},[e._v("\n                                    "+e._s(e.generateChunkNote(t))+"\n                                ")]),e._v(" "),t.availableDateTimes&&Object.keys(t.availableDateTimes).length>1?n("v-link",{staticClass:"checkout-product-panel__item-header-link",attrs:{tag:"button"},on:{click:function(n){return e.onChangeDate(t.id)}}},[n("v-svg",{attrs:{name:"edit",width:"16",height:"16"}}),e._v(" "),e.isTablet?e._e():[e._v("\n                                          Изменить дату и время\n                                    ")]],2):e._e()],1),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(t.items,(function(t){return n("checkout-product-card",{key:t.id,staticClass:"checkout-product-panel__item-card",attrs:{name:t.name,image:t.image,href:e.generateItemProductUrl(t)}})})),1)])})),0):e._e()],1):n("div",{key:"empty",staticClass:"checkout-product-panel__item-empty"},[n("h3",{staticClass:"text-bold"},[e._v("Выберите адрес")])])])],1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--payment"},[e._m(1),e._v(" "),n("ul",{staticClass:"checkout-product-panel__item-list"},e._l(e.paymentMethods,(function(t){return n("checkout-option-card",{key:t.id,staticClass:"checkout-product-panel__item-card",attrs:{selected:t.id===e.selectedPaymentMethodID,readonly:""}},[n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))]),e._v(" "),n("br"),e._v(" "),"card"===t.type?n("div",{staticClass:"checkout-product-panel__item-payment"},[n("v-svg",{attrs:{name:"visa",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"mastercard",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"mir",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"apple",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"google",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"yandex",width:"56",height:"24"}})],1):e._e()])})),1),e._v(" "),e.referralPartner&&e.availableBonus>0||!e.referralPartner&&e.maxAmountBonus?n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item--child checkout-product-panel__item--bonus"},[n("div",{staticClass:"checkout-product-panel__item-header"},[n("h3",{staticClass:"checkout-product-panel__item-header-hl"},[n("v-svg",{attrs:{name:"bonus",width:"24",height:"24"}}),e._v(" Оплата бонусами \n                        "),e.isTablet?e._e():n("span",{staticClass:"text-sm text-normal text-grey"},[e._v("\n                            (1 бонус = "+e._s(e.bonusPerRub)+" рубль)\n                        ")]),e._v(" "),n("v-spinner",{attrs:{width:"24",height:"24",show:e.isBonusPending}})],1)]),e._v(" "),e.bonus?n("div",{staticClass:"checkout-product-panel__item-card checkout-product-panel__item-card--bonus"},[n("span",[e._v("\n                        Будет использовано "),n("strong",{staticClass:"text-bold"},[e._v(e._s(e.bonus))]),e._v(" из "+e._s(e.availableBonus)+" бонусных баллов \n                    ")]),e._v(" "),n("div",{staticClass:"checkout-product-panel__item-card-panel"},[e.isTablet?n("div",{staticClass:"text-sm text-normal text-grey"},[e._v("\n                            (1 бонус = "+e._s(e.bonusPerRub)+" рубль)\n                        ")]):e._e(),e._v(" "),n("v-link",{staticClass:"checkout-product-panel__item-card-link",attrs:{tag:"button"},on:{click:e.DELETE_BONUS}},[e._v("\n                            Отменить\n                        ")])],1)]):n("div",{staticClass:"checkout-product-panel__item-controls"},[e.availableBonus>0?[n("v-input",{staticClass:"checkout-product-panel__item-controls-input",attrs:{type:"number",min:"1",max:e.availableBonus,placeholder:"Сколько бонусов использовать?"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.ADD_BONUS(e.bonusAmount))}},model:{value:e.bonusAmount,callback:function(t){e.bonusAmount=t},expression:"bonusAmount"}}),e._v(" "),n("v-button",{staticClass:"btn--outline checkout-product-panel__item-controls-btn",attrs:{disabled:!e.bonusAmount},on:{click:function(t){return e.ADD_BONUS(e.bonusAmount)}}},[e._v("\n                            Применить\n                        ")])]:e._e(),e._v(" "),n("span",{staticClass:"checkout-product-panel__item-controls-text"},[e._v("\n                        Доступно для оплаты: \n                        "),n("strong",{staticClass:"text-bold"},[e._v(e._s(e.maxAmountBonus))]),e._v(" из "+e._s(e.availableBonus)+" бонусов\n                    ")])],2)]):e._e(),e._v(" "),n("div",{staticClass:"checkout-product-panel__item checkout-product-panel__item checkout-product-panel__item--child checkout-product-panel__item--settings"},[n("div",{ref:"agreement",staticClass:"checkout-product-panel__item-panel"},[n("v-check",{staticClass:"checkout-product-panel__item-panel-check",attrs:{id:"check-agreement",checked:e.agreement,name:"agreement"},on:{change:function(t){return e.onSetAgreement(t)}}},[e._v("\n                        Я согласен с\n                        "),n("router-link",{attrs:{to:{name:"Agreements",params:{type:e.agreementTypes.PUBLIC_OFFER}},target:"_blank"}},[e._v("\n                            условиями оферты\n                        ")]),e._v("\n                        и\n                        "),n("router-link",{attrs:{to:{name:"Agreements",params:{type:e.agreementTypes.PERSONAL_POLICY}},target:"_blank"}},[e._v("\n                            политикой конфиденциальности\n                        ")])],1),e._v(" "),n("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[e.agreementError?n("div",{key:e.agreementError,staticClass:"status-color-error"},[e._v("\n                            "+e._s(e.agreementError)+"\n                        ")]):e._e()])],1),e._v(" "),n("div",{staticClass:"checkout-product-panel__item-panel"},e._l(e.confirmationTypes,(function(t){return n("v-check",{key:t.id,staticClass:"checkout-product-panel__item-panel-check",attrs:{type:"radio",id:"check-accept-"+t.id,"model-value":e.selectedConfirmationTypeID,value:t.id,name:t.type},on:{change:e.onSetConfirmationType}},[e._v("\n                        "+e._s(t.title)+"\n                    ")])})),1)])])]:n("attention-panel",{staticClass:"checkout-product-panel__attention"},[e._v("\n        К сожалению, по данным параметрам заказа доставка не может быть реализована. "),n("br"),e._v("\n        Возможно, доставка в ваш регион не осуществляется. "),n("br"),e._v("Пожалуйста, выберете другой регион для доставки или\n        проверьте параметры Вашего заказа.\n    ")]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.isPickupPointModalOpen?n("checkout-pickup-point-modal"):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.isDateModalOpen?n("checkout-date-modal",{on:{changed:e.onDateChanged}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$isServer||e.isRecipientModalOpen?n("checkout-recipient-modal",{on:{save:e.onSaveRecipient,close:e.onCloseRecipientModal}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$isServer||e.isAddressModalOpen?n("address-edit-modal",{on:{save:e.onSaveAddress,close:e.onCloseAddressModal}}):e._e()],1)],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"checkout-product-panel__item-header"},[t("h2",{staticClass:"checkout-product-panel__item-header-hl"},[this._v("Получатель")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"checkout-product-panel__item-header"},[t("h2",{staticClass:"checkout-product-panel__item-header-hl"},[this._v("Способ оплаты")])])}],!1,null,null,null).exports,at=(n("gB8C"),n("096N"),{name:"checkout-masterclass-card",components:{VSvg:a.a,VLink:i.a,VPicture:h.a,Price:c.a},props:{productId:{type:[String,Number],required:!0},name:{type:String,required:!0},href:{type:String},type:{type:String,required:!0},image:{type:[String,Object]},date:{type:[String,Date]},author:{type:String},price:{type:Object},oldPrice:{type:Object},count:{type:Number,default:1},isSmall:{type:Boolean,default:!1}},computed:{isTablet:function(){return this.$mq.tablet}}}),it=Object(_.a)(at,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"checkout-masterclass-card",class:{"checkout-masterclass-card--small":e.isSmall}},[n("router-link",{staticClass:"checkout-masterclass-card__img",attrs:{to:e.href}},[e.image?n("v-picture",[e._t("default")],2):n("v-svg",{attrs:{id:"checkout-masterclass-card-empty",name:"logo",width:"48",height:"48"}})],1),e._v(" "),n("div",{staticClass:"checkout-masterclass-card__body"},[n("v-link",{staticClass:"checkout-masterclass-card__body-name",attrs:{to:e.href}},[e._v(e._s(e.name))]),e._v(" "),n("div",{staticClass:"checkout-masterclass-card__body-count"},[e._v("\n            "+e._s(e.count)+"\n        ")]),e._v(" "),n("div",{staticClass:"checkout-masterclass-card__body-prices"},[n("price",e._b({staticClass:"text-bold checkout-masterclass-card__body-price"},"price",e.price,!1)),e._v(" "),n("price",e._b({directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"oldPrice"}],staticClass:"text-grey text-strike checkout-masterclass-card__body-price checkout-masterclass-card__body-price--old"},"price",e.oldPrice,!1))],1),e._v(" "),n("div",{staticClass:"text-grey text-sm checkout-masterclass-card__body-info"},[n("div",[e._v(e._s(e.date))]),e._v(" "),n("div",[e._v(e._s(e.author))])])],1)],1)}),[],!1,null,null,null).exports;n("nSvm");function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){st(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct,lt=T.modalName.checkout.TICKET_EDIT,ut={name:lt,mixins:[we.b],components:{VButton:o.a,VInput:r.a,VInputMask:Pe.a,VSelect:y.a,GeneralModal:C.a,AttentionPanel:p.a},validations:{name:{required:we.h},form:{firstName:{required:we.h},lastName:{required:we.h},middleName:{required:we.h},phone:{required:we.h,minLength:Object(we.e)(12)},email:{required:we.h,email:we.c},professionId:{required:we.h}}},data:function(){return{name:null,form:{id:Object(je.f)(0,1e5),firstName:null,lastName:null,middleName:null,phone:null,email:null,professionId:null},selectedProfession:null,maskOptions:ot({},Te.g)}},computed:ot(ot(ot({},Object(g.d)(P.c,[P.d])),Object(g.d)(w.b,{isOpen:function(e){return e[w.a][lt]&&e[w.a][lt].open},modalState:function(e){return e[w.a][lt]&&e[w.a][lt].state||{}}})),{},{isTablet:function(){return this.$mq.tablet},header:function(){return"Участник"},emailError:function(){if(this.$v.form.email.$dirty){if(!this.$v.form.email.required)return"Обязательное поле";if(!this.$v.form.email.email)return"Неправильный формат"}},nameError:function(){if(this.$v.name.$dirty){if(!this.$v.name.required)return"Обязательное поле";if(!this.$v.form.lastName.required||!this.$v.form.firstName.required||!this.$v.form.middleName.required)return"Введите ФИО"}},phoneError:function(){if(this.$v.form.phone.$dirty){if(!this.$v.form.phone.required)return"Обязательное поле";if(!this.$v.form.phone.minLength)return"Неверно введен номер"}}}),watch:{name:function(e){var t=(e||"").split(" ",3);this.form.lastName=t[0]||null,this.form.firstName=t[1]||null,this.form.middleName=t[2]||null},selectedProfession:function(e){e&&(this.form.professionId=e.id)}},methods:ot(ot({},Object(g.b)(w.b,[j.a])),{},{onSubmit:function(){if(this.$v.$touch(),!this.$v.$invalid){var e=this.modalState.id;this.$emit("save",{ticket:ot({},this.form),id:e}),this.onClose()}},onClose:function(){this.$emit("close"),this[j.a]({name:lt,open:!1})},init:function(){var e=this.modalState.ticket;if(e){var t=e.firstName,n=e.lastName,a=e.middleName,i="";n&&(i+="".concat(n," ")),t&&(i+="".concat(t," ")),a&&(i+="".concat(a)),this.form=Object.assign({},this.form,e),this.name=i}this.selectedProfession=this[P.d][0]}}),beforeMount:function(){this.init()}},dt=Object(_.a)(ut,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isOpen?n("general-modal",{staticClass:"checkout-ticket-modal",attrs:{type:"sm",header:e.header,"is-mobile":e.isTablet},on:{close:e.onClose},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"checkout-ticket-modal__body"},[e.isTablet?e._e():n("h3",{staticClass:"checkout-ticket-modal__hl"},[e._v(e._s(e.header))]),e._v(" "),n("form",{staticClass:"checkout-ticket-modal__form",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("v-select",{staticClass:"checkout-ticket-modal__form-row",attrs:{"track-by":"id",label:"name",placeholder:"Выберите профессию",options:e.professions,searchable:!1,"allow-empty":!1,"show-labels":!1,"show-error":""},model:{value:e.selectedProfession,callback:function(t){e.selectedProfession=t},expression:"selectedProfession"}},[e._v("\n                    Профессия\n                ")]),e._v(" "),n("v-input",{staticClass:"checkout-ticket-modal__form-row",attrs:{placeholder:"Введите ФИО",error:e.nameError},scopedSlots:e._u([{key:"error",fn:function(t){var a=t.error;return[n("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[a?n("div",{key:a},[e._v(e._s(a))]):e._e()])]}}],null,!1,3034400235),model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[e._v("\n                    ФИО\n                    ")]),e._v(" "),n("v-input-mask",{staticClass:"checkout-ticket-modal__form-row",attrs:{placeholder:"+7 ___ ___-__-__",options:e.maskOptions,error:e.phoneError,raw:""},scopedSlots:e._u([{key:"error",fn:function(t){var a=t.error;return[n("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[a?n("div",{key:a},[e._v(e._s(a))]):e._e()])]}}],null,!1,3034400235),model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}},[e._v("\n                    Телефон\n                    ")]),e._v(" "),n("v-input",{staticClass:"checkout-ticket-modal__form-row",attrs:{error:e.emailError},scopedSlots:e._u([{key:"error",fn:function(t){var a=t.error;return[n("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[a?n("div",{key:a},[e._v(e._s(a))]):e._e()])]}}],null,!1,3034400235),model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},[e._v("\n                    Email\n                    ")])],1)]),e._v(" "),n("div",{staticClass:"checkout-ticket-modal__submit"},[n("v-button",{staticClass:"checkout-ticket-modal__submit-btn",on:{click:e.onSubmit}},[e._v("\n                Добавить участника\n            ")])],1)]},proxy:!0}],null,!1,1365376394)}):e._e()}),[],!1,null,null,null).exports;n("cgQE"),n("tH0B");function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt={name:"checkout-master-class-panel",mixins:[we.b],components:{VSvg:a.a,VLink:i.a,VButton:o.a,VInput:r.a,VCheck:u.a,VSpinner:d.a,AttentionPanel:p.a,CheckoutMasterclassCard:it,CheckoutOptionCard:m.a,CheckoutRecipientModal:xe,CheckoutTicketModal:dt},validations:(ct={},ht(ct,re.c,{valid:function(e){return!0===e}}),ht(ct,re.E,{required:we.h}),ht(ct,re.t,{$each:{isFull:function(e){return e.tickets.length===e.cartItem.count},tickets:{$each:{firstName:{required:we.h},lastName:{required:we.h},middleName:{required:we.h},phone:{required:we.h,minLength:Object(we.e)(12)},email:{required:we.h,email:we.c}}}}}),ct),data:function(){return{recipientIndexToChange:null,ticketIndexToChange:null}},computed:mt(mt(mt(mt({},Object(g.d)([O.g])),Object(g.d)(w.b,{isRecipientModalOpen:function(e){return e[w.a][T.modalName.checkout.RECIPIENT_EDIT]&&e[w.a][T.modalName.checkout.RECIPIENT_EDIT].open},isTicketModalOpen:function(e){return e[w.a][T.modalName.checkout.TICKET_EDIT]&&e[w.a][T.modalName.checkout.TICKET_EDIT].open}})),Object(g.c)(P.c,[re.q,re.w,re.E,re.o,re.B,re.k,re.y,re.t,re.c,re.F,re.s,re.r,re.H])),{},{masterClasses:function(){var e=this;this[re.t];return this.publicEvents.map((function(t){var n=t.cartItem.p,a=new Date("".concat(n.nearestDate," ").concat(n.nearestTimeFrom)),i=a.toLocaleString(e[O.g],Te.b),r=a.toLocaleString(e[O.g],Te.d),o="".concat(i,", ").concat(r),s=Object(Be.g)(n.code),c=n.speakers&&n.speakers[0],l=c&&"".concat(c.firstName," ").concat(c.lastName,", ").concat(c.profession),u=n.image&&Object(v.c)(144,96,n.image.id),d=n.image&&{webp:Object(v.c)(144,96,n.image.id,T.fileExtension.image.WEBP),orig:Object(v.c)(144,96,n.image.id)};return mt(mt({},t),{},{cartItem:mt(mt({},t.cartItem),{},{p:mt(mt({},n),{},{url:s,author:l,dateTime:o,desktopImg:d,defaultImg:u})})})}))},agreementError:function(){if(this.$v.agreement.$dirty&&!this.$v.agreement.valid)return this.debounce_scrollToError(this.$refs.agreement),"Подтвердите согласие с условиями заказа и доставки"},publicEventsError:function(){this.$v.publicEvents.$dirty&&this.$v.publicEvents.$invalid&&this.debounce_scrollToError(this.$refs.events)},isTablet:function(){return this.$mq.tablet},isTicketPending:function(){return this[re.H]===T.requestStatus.PENDING}}),methods:mt(mt(mt({},Object(g.b)(w.b,[j.a])),Object(g.b)(P.c,[ie.x,ie.e,ie.i,ie.f,ie.j,ie.s,ie.y,ie.t,ie.d,ie.o])),{},{formatPhoneNumber:function(e){return Object(je.d)(e)},isEqualObject:function(e,t){return ke()(e,t)},onSetRecipient:function(e){this[ie.x](e)},onChangeRecipient:function(e,t){this.recipientIndexToChange=t,this[j.a]({name:T.modalName.checkout.RECIPIENT_EDIT,open:!0,state:{recipient:mt({},e)}})},onAddRecipient:function(){this[j.a]({name:T.modalName.checkout.RECIPIENT_EDIT,open:!0,state:{recipient:{}}})},onSaveRecipient:function(e){null!==this.recipientIndexToChange?this[ie.i]({index:this.recipientIndexToChange,recipient:e}):this[ie.e](e)},onCloseRecipientModal:function(){this.recipientIndexToChange=null},onAddTicket:function(e){this[j.a]({name:T.modalName.checkout.TICKET_EDIT,open:!0,state:{ticket:{},id:e}})},onSaveTicket:function(e){var t=e.ticket,n=e.id;null!==this.ticketIndexToChange?this[ie.j]({index:this.ticketIndexToChange,ticket:t,offerId:n}):this[ie.f]({ticket:t,offerId:n})},onChangeTicket:function(e,t,n){this.ticketIndexToChange=n,this[j.a]({name:T.modalName.checkout.TICKET_EDIT,open:!0,state:{ticket:mt({},e),id:t}})},onCloseTicketModal:function(){this.ticketIndexToChange=null},onSetConfirmationType:function(e){this[ie.t](e)},onSetAgreement:function(e){this[ie.s](Number(e))},scrollToError:function(e){window.scrollTo({top:Object(je.e)(e).y-24,behavior:"smooth"})},validate:function(){return this.$v.$touch(),!this.$v.$invalid}}),created:function(){this.agreementTypes=T.agreementTypes},mounted:function(){this.debounce_scrollToError=Re()(this.scrollToError,Ae.g)}},ft=Object(_.a)(vt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkout-master-class-panel"},[n("div",{staticClass:"checkout-master-class-panel__item checkout-master-class-panel__item--recepient"},[e._m(0),e._v(" "),n("ul",{staticClass:"checkout-master-class-panel__item-list"},e._l(e.recipients,(function(t,a){return n("checkout-option-card",{key:t.id,staticClass:"checkout-master-class-panel__item-card",attrs:{selected:e.selectedRecipient&&e.isEqualObject(t,e.selectedRecipient),"show-check":e.recipients.length>1},on:{cardClick:function(n){return e.onSetRecipient(t)},btnClick:function(n){return e.onChangeRecipient(t,a)}}},[n("p",[e._v(e._s(t.name))]),e._v(" "),n("p",[e._v(e._s(e.formatPhoneNumber(t.phone)))]),e._v(" "),n("p",[e._v(e._s(t.email))])])})),1),e._v(" "),n("attention-panel",{staticClass:"checkout-master-class-panel__attention"},[e._v("\n            На указанный адрес электронной почты мы вышлем вам копии билетов\n        ")]),e._v(" "),n("v-link",{staticClass:"checkout-master-class-panel__item-header-link",attrs:{tag:"button"},on:{click:e.onAddRecipient}},[n("v-svg",{attrs:{name:"plus",width:"24",height:"24"}}),e._v(" Добавить нового получателя\n        ")],1)],1),e._v(" "),n("div",{staticClass:"checkout-master-class-panel__item"},[n("div",{ref:"events",staticClass:"checkout-master-class-panel__item-header"},[n("h2",{staticClass:"checkout-master-class-panel__item-header-hl"},[e._v("\n                Участники "),n("v-spinner",{attrs:{width:"24",height:"24",show:e.isTicketPending}})],1)]),e._v(" "),e._l(e.masterClasses,(function(t,a){var i=t.cartItem,r=i.p,o=i.count,s=t.tickets,c=t.offerId;return n("div",{key:c},[n("checkout-masterclass-card",{key:r.id,staticClass:"checkout-master-class-panel__item-masterclass",attrs:{type:"masterclass","product-id":r.id,name:r.name,image:r.image,price:r.price,"old-price":r.oldPrice,date:r.dateTime,author:r.author,count:o,href:r.url,"is-small":e.isTablet}},[n("source",{attrs:{"data-srcset":r.desktopImg.webp,type:"image/webp"}}),e._v(" "),n("source",{attrs:{"data-srcset":r.desktopImg.orig}}),e._v(" "),n("img",{staticClass:"blur-up lazyload v-picture__img",attrs:{"data-src":r.defaultImg,alt:""}})]),e._v("\n\n            "+e._s(e.publicEventsError)+"\n\n            "),n("ul",{staticClass:"checkout-master-class-panel__item-list"},[e._l(s,(function(t,a){return n("checkout-option-card",{key:t.id,staticClass:"checkout-master-class-panel__item-card",attrs:{"show-check":!1,selected:""},on:{btnClick:function(n){return e.onChangeTicket(t,c,a)}}},[n("p",{staticClass:"text-bold"},[e._v("Билет "+e._s(a+1))]),e._v(" "),n("p",[n("span",[e._v(e._s(t.lastName)+" "+e._s(t.firstName)+" "+e._s(t.middleName)+",")]),e._v(" "),e.professionsMap[t.professionId]?n("span",[e._v("\n                            "+e._s(e.professionsMap[t.professionId].name)+"\n                        ")]):e._e()]),e._v(" "),n("p",[e._v(e._s(e.formatPhoneNumber(t.phone)))]),e._v(" "),n("p",[e._v(e._s(t.email))])])})),e._v(" "),s.length<o?n("checkout-option-card",{key:"new",staticClass:"checkout-master-class-panel__item-card",class:{"checkout-master-class-panel__item-card--invalid":e.$v.publicEvents.$anyDirty&&!e.$v.publicEvents.$each.$iter[a].isFull},attrs:{"show-check":!1,selected:"",readonly:""}},[n("p",{staticClass:"text-bold"},[e._v("Билет "+e._s(s.length+1))]),e._v(" "),n("br"),e._v(" "),n("button",{staticClass:"checkout-master-class-panel__item-card-link text-grey",class:{"status-color-error":e.$v.publicEvents.$anyDirty&&!e.$v.publicEvents.$each.$iter[a].isFull},on:{click:function(t){return e.onAddTicket(c)}}},[e._v("\n                        Добавить данные участника\n                    ")]),e._v(" "),n("br"),e._v(" "),n("br")]):e._e()],2)],1)}))],2),e._v(" "),n("div",{staticClass:"checkout-master-class-panel__item checkout-master-class-panel__item--payment"},[e._m(1),e._v(" "),n("ul",{staticClass:"checkout-master-class-panel__item-list"},e._l(e.paymentMethods,(function(t){return n("checkout-option-card",{key:t.id,staticClass:"checkout-master-class-panel__item-card",attrs:{selected:t.id===e.selectedPaymentMethodID,readonly:""}},["card"===t.type?n("div",{staticClass:"checkout-master-class-panel__item-payment"},[n("div",{staticClass:"text-bold checkout-master-class-panel__item-payment-title"},[e._v("\n                        "+e._s(t.title)+"\n                    ")]),e._v(" "),n("div",{staticClass:"checkout-master-class-panel__item-payment-list"},[n("v-svg",{attrs:{name:"visa",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"mastercard",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"mir",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"apple",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"google",width:"40",height:"24"}}),e._v(" "),n("v-svg",{attrs:{name:"yandex",width:"56",height:"24"}})],1)]):n("p",{staticClass:"text-bold"},[e._v(e._s(t.title))])])})),1),e._v(" "),n("div",{staticClass:"checkout-master-class-panel__item checkout-master-class-panel__item checkout-master-class-panel__item--child checkout-master-class-panel__item--settings"},[n("div",{ref:"agreement",staticClass:"checkout-master-class-panel__item-panel"},[n("v-check",{staticClass:"checkout-master-class-panel__item-panel-check",attrs:{id:"check-agreement",checked:e.agreement,name:"agreement"},on:{change:e.onSetAgreement}},[e._v("\n                    Я согласен с\n                    "),n("router-link",{attrs:{to:{name:"Agreements",params:{type:e.agreementTypes.PUBLIC_OFFER}},target:"_blank"}},[e._v("\n                        условиями оферты\n                    ")]),e._v("\n                    и\n                    "),n("router-link",{attrs:{to:{name:"Agreements",params:{type:e.agreementTypes.PERSONAL_POLICY}},target:"_blank"}},[e._v("\n                        политикой конфиденциальности\n                    ")])],1),e._v(" "),n("transition",{attrs:{name:"slide-in-bottom",mode:"out-in"}},[e.agreementError?n("div",{key:e.agreementError,staticClass:"status-color-error"},[e._v("\n                        "+e._s(e.agreementError)+"\n                    ")]):e._e()])],1),e._v(" "),n("div",{staticClass:"checkout-master-class-panel__item-panel"},e._l(e.confirmationTypes,(function(t){return n("v-check",{key:t.id,staticClass:"checkout-master-class-panel__item-panel-check",attrs:{type:"radio",id:"check-accept-"+t.id,"model-value":e.selectedConfirmationTypeID,value:t.id,name:t.type},on:{change:e.onSetConfirmationType}},[e._v("\n                    "+e._s(t.title)+"\n                ")])})),1)])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$isServer||e.isRecipientModalOpen?n("checkout-recipient-modal",{on:{save:e.onSaveRecipient,close:e.onCloseRecipientModal}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$isServer||e.isTicketModalOpen?n("checkout-ticket-modal",{on:{save:e.onSaveTicket,close:e.onCloseTicketModal}}):e._e()],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"checkout-master-class-panel__item-header"},[t("h2",{staticClass:"checkout-master-class-panel__item-header-hl"},[this._v("Получатель")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"checkout-master-class-panel__item-header"},[t("h2",{staticClass:"checkout-master-class-panel__item-header-hl"},[this._v("Способ оплаты")])])}],!1,null,null,null).exports,_t=n("3eXy"),kt=n("8TZ/"),bt=(n("oXaW"),n("fhPv"));n("muNP"),n("vcui");function yt(e,t,n,a,i,r,o){try{var s=e[r](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function Ct(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){yt(r,a,i,o,s,"next",e)}function s(e){yt(r,a,i,o,s,"throw",e)}o(void 0)}))}}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wt={name:"checkout",components:{VSvg:a.a,VLink:i.a,VButton:o.a,VInput:r.a,VSticky:s.a,VCartHeader:l.a,Price:c.a,CheckoutProductPanel:nt},data:function(){return{inputPromocode:null,isCommit:!1}},computed:Ot(Ot(Ot(Ot(Ot(Ot(Ot({},Object(g.d)(kt.c,[kt.a])),Object(g.d)(P.c,[P.b,P.a])),Object(g.d)(Ne.c,[Ne.b])),Object(g.d)(Ne.c,Pt({},Ne.e,(function(e){return e[Ne.h]&&e[Ne.h][Ne.e]||!1})))),Object(g.d)("route",{checkoutType:function(e){return e.params.type}})),Object(g.c)(P.c,[re.s,re.G,re.u,re.f])),{},{isProduct:function(){return this.checkoutType===bt.a.PRODUCT},canDeliver:function(){var e=this[re.u];return!this.isProduct||this.isProduct&&e&&e.length>0},checkoutPanel:function(){switch(this.checkoutType){case bt.a.PRODUCT:return nt;case bt.a.MASTERCLASS:return ft}}}),watch:Pt({},Ne.b,(function(e){e||this.$router.replace(Te.a.path)})),methods:Ot(Ot({},Object(g.b)(P.c,[ie.p,ie.k,ie.d,ie.o,ie.l])),{},{onCommit:function(){var e=this;return Ct(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.$refs.panel.validate()){t.next=4;break}return t.abrupt("return");case 4:return e.isCommit=!0,t.next=7,e[ie.l]();case 7:n=t.sent,a=n.paymentUrl,document.location.href=a,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),e.isCommit=!1,_t.$logger.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},prepareBonus:function(e){return Object(je.i)(e)}}),beforeRouteEnter:function(e,t,n){var a=e.params.type;_t.$store.state[P.c][P.a]?n():(_t.$progress.start(),Promise.all([_t.$store.dispatch("".concat(P.c,"/").concat(ie.p),a),_t.$store.dispatch("".concat(P.c,"/").concat(ie.q))]).then((function(){return n((function(e){return _t.$progress.finish()}))})).catch((function(){return n((function(e){return _t.$progress.fail()}))})))},beforeRouteUpdate:function(e,t,n){var a=this;return Ct(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=e.params.type,a.$progress.start(),t.next=5,a[ie.p](i);case 5:a.$progress.finish(),n(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),a.$progress.fail(),n(!1);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},beforeDestroy:function(){this[ie.k]()}},jt=Object(_.a)(wt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section checkout-view"},[n("v-cart-header"),e._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"checkout-view__header"},[n("h1",{staticClass:"checkout-view__header-hl"},[e._v("\n                Оформление заказа: "+e._s(e.$t("cart.summary.type."+e.checkoutType))+"\n            ")]),e._v(" "),n("v-link",{staticClass:"checkout-view__header-link",attrs:{to:"/cart"}},[n("v-svg",{attrs:{name:"arrow-small",width:"24",height:"24"}}),e._v("  Вернуться в корзину\n            ")],1)],1)]),e._v(" "),n("section",{staticClass:"section checkout-view__main"},[n("div",{staticClass:"container checkout-view__main-container"},[n("div",{staticClass:"checkout-view__main-body"},[n(e.checkoutPanel,{ref:"panel",tag:"component"})],1),e._v(" "),e.canDeliver?n("v-sticky",{staticClass:"checkout-view__main-sticky",scopedSlots:e._u([{key:"sticky",fn:function(){return[n("div",{staticClass:"checkout-view__main-panel"},[e.isProduct?n("p",{staticClass:"text-grey checkout-view__main-panel-info"},[e._v("\n                            Внимание: мастер-классы можете оплатить после завершения оплаты продуктов\n                        ")]):e._e(),e._v(" "),n("p",{staticClass:"checkout-view__main-panel-line"},[e._v("\n                            Сумма заказа: "+e._s(e.$t("cart.summary.type."+e.checkoutType))+"\n                            "),n("price",e._b({},"price",e.summary.sum,!1))],1),e._v(" "),e.isProduct?[e.summary.delivery?n("p",{staticClass:"checkout-view__main-panel-line"},[e._v("\n                                Доставка\n                                "),e.summary.delivery.value||0===e.summary.delivery.value?n("price",e._b({},"price",e.summary.delivery,!1)):n("span",[e._v(e._s(e.summary.delivery))])],1):e._e(),e._v(" "),e.bonusPayment>0?n("p",{staticClass:"checkout-view__main-panel-line"},[e._v("\n                                Оплата бонусами\n                                "),n("span",[e._v(" -"),n("price",{attrs:{value:e.bonusPayment,currency:"RUB"}})],1)]):e._e()]:e._e(),e._v(" "),e._l(e.summary.discounts,(function(t){return n("p",{key:t.type,staticClass:"checkout-view__main-panel-line"},[e._v("\n                            "+e._s(e.$t("cart.summary.discount."+t.type))+"\n                            "),n("span",[e._v("-"),n("price",e._b({},"price",t.value,!1))],1)])})),e._v(" "),n("div",{staticClass:"checkout-view__main-panel-total"},[n("p",{staticClass:"text-bold checkout-view__main-panel-line"},[e._v("\n                                Итого "),n("price",e._b({},"price",e.summary.total,!1))],1),e._v(" "),e.referralPartner?e._e():n("p",{staticClass:"text-grey text-sm checkout-view__main-panel-line"},[e._v("\n                                Будет начислено\n                                "),n("span",[e._v("\n                                    "+e._s(e.summary.bonusGet>0?"+ "+e.prepareBonus(e.summary.bonusGet):e.prepareBonus(e.summary.bonusGet))+"\n                                     бонусов\n                                ")])]),e._v(" "),e.isProduct&&e.summary.bonusSpent?n("p",{staticClass:"text-grey text-sm checkout-view__main-panel-line"},[e._v("\n                                Будет списано\n                                "),n("span",[e._v("\n                                    "+e._s(e.summary.bonusSpent>0?"- "+e.prepareBonus(e.summary.bonusSpent):e.prepareBonus(e.summary.bonusSpent))+"\n                                     бонусов\n                                ")])]):e._e()]),e._v(" "),e.promocode?n("div",{staticClass:"checkout-view__main-panel-promo checkout-view__main-panel-promo--success"},[n("div",{staticClass:"checkout-view__main-panel-promo-icon"},[n("v-svg",{attrs:{name:"check-small",width:"16",height:"16"}})],1),e._v(" "),n("div",[e._v("\n                                Промокод "+e._s(e.promocode)+" применён\n                                "),n("v-link",{staticClass:"checkout-view__main-panel-promo-link",attrs:{tag:"button"},on:{click:function(t){return e.DELETE_PROMOCODE(e.promocode)}}},[e._v("\n                                    Отменить\n                                ")])],1)]):n("div",{staticClass:"checkout-view__main-panel-promo"},[n("v-input",{staticClass:"checkout-view__main-panel-promo-input",attrs:{placeholder:"Ваш промокод"},model:{value:e.inputPromocode,callback:function(t){e.inputPromocode=t},expression:"inputPromocode"}}),e._v(" "),n("v-button",{staticClass:"btn--outline checkout-view__main-panel-promo-btn",attrs:{disabled:!e.inputPromocode},on:{click:function(t){return e.ADD_PROMOCODE(e.inputPromocode)}}},[e._v("\n                                Применить\n                            ")])],1),e._v(" "),n("v-button",{staticClass:"checkout-view__main-panel-submit",attrs:{disabled:e.isCommit},on:{click:e.onCommit}},[e._v("\n                            Перейти к оплате\n                        ")])],2)]},proxy:!0}],null,!1,2287716081)}):e._e()],1)])],1)}),[],!1,null,null,null);t.default=jt.exports},NCbh:function(e,t,n){},OmJt:function(e,t,n){},Pe8P:function(e,t,n){},VK71:function(e,t,n){},cgQE:function(e,t,n){},k1X8:function(e,t,n){},nSvm:function(e,t,n){},vLQ8:function(e,t,n){},vcui:function(e,t,n){}}]);