(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"0Bec":function(e,t,r){},fPNc:function(e,t,r){"use strict";r.r(t);var o=r("i2Ud"),n=r("+gqB"),a=r("/Q9p"),i=r("L2JU"),s=r("3eXy"),c=r("Cv2f"),u=r("xm1V"),p=r("LCOE"),f=r("55Sm"),d=r("jDKC"),l=r("4mC1"),v=r("2JJK");r("0Bec");function h(e,t,r,o,n,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={name:"favorites",components:{VButton:o.a,VPagination:n.a,CatalogProductCard:a.a},data:function(){return{showMore:!1}},computed:b({},Object(i.d)(c.e,[c.b,c.c,c.d,c.a]),{},Object(i.c)(c.e,[u.b])),methods:b({},Object(i.b)(c.e,[p.b,p.d,p.e]),{},Object(i.b)(f.b,[d.a]),{onShowMore:function(){this.showMore=!0,this.$router.replace({path:this.$route.path,query:b({},this.$route.query,{page:this[c.a]+1})})},onPageChanged:function(e){this.showMore=!1,this.$router.push({path:this.$route.path,query:b({},this.$route.query,{page:e})})},onToggleFavorite:function(e){var t=e.productId;this[p.e](t)},onPreview:function(e){this[d.a]({name:v.modalName.general.QUICK_VIEW,open:!0,state:{code:e}})},onAddToCart:function(e){var t=e.id,r=e.stock,o=e.type;this[d.a]({name:v.modalName.general.ADD_TO_CART,open:!0,state:{offerId:t,storeId:r.storeId,type:o}})}}),beforeRouteEnter:function(e,t,r){var o=e.fullPath,n=e.query.page,a=void 0===n?l.a:n;s.$store.state[c.e].loadPath===o?r():(s.$progress.start(),s.$store.dispatch("".concat(c.e,"/").concat(p.b),{page:a}).then((function(e){s.$store.dispatch("".concat(c.e,"/").concat(p.d),o),r((function(e){s.$progress.finish()}))})).catch((function(e){if(e&&!0===e.isCancel)return!0;r((function(e){s.$progress.fail()}))})))},beforeRouteUpdate:function(e,t,r){var o,n=this;return(o=regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.query.page,a=void 0===o?l.a:o,t.prev=1,n.$progress.start(),t.next=5,n[p.b]({page:a,showMore:n.showMore});case 5:n.$progress.finish(),r(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n.$progress.fail(),r(!1);case 13:n.showMore=!1;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=o.apply(e,t);function i(e){h(a,r,n,i,s,"next",e)}function s(e){h(a,r,n,i,s,"throw",e)}i(void 0)}))})()}},y=r("KHd+"),_=Object(y.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section favorites-view"},[r("div",{staticClass:"container favorites-view__header"},[r("h1",{staticClass:"favorites-view__header-h1"},[e._v("\n            Избранное\n            "),e.favorites.length>0?r("span",{staticClass:"favorites-view__header-counter"},[e._v("\n                "+e._s(e.favorites.length)+" продуктов\n            ")]):e._e()])]),e._v(" "),e.favorites.length>0?r("div",{staticClass:"container favorites-container"},[r("ul",{staticClass:"favorites-product-list"},e._l(e.favorites,(function(t){return r("catalog-product-card",{key:t.id,staticClass:"favorites-product-list__item",attrs:{"offer-id":t.id,"product-id":t.productId,name:t.name,type:t.type,href:"/catalog/"+t.categoryCodes[t.categoryCodes.length-1]+"/"+t.code,image:t.image,price:t.price,"old-price":t.oldPrice,tags:t.tags,rating:t.rating,"show-buy-btn":t.stock.qty>0},on:{"add-item":function(r){return e.onAddToCart(t)},preview:function(r){return e.onPreview(t.code)},"toggle-favorite-item":function(r){return e.onToggleFavorite(t)}}})})),1),e._v(" "),e.pagesCount>1?r("div",{staticClass:"favorites-view__main-controls"},[e.activePage<e.pagesCount?r("v-button",{staticClass:"btn--outline favorites-view__main-controls-btn",attrs:{disabled:e.showMore},on:{click:e.onShowMore}},[e._v("\n                Показать ещё\n            ")]):e._e(),e._v(" "),r("v-pagination",{attrs:{value:e.activePage,"page-count":e.pagesCount},on:{input:e.onPageChanged}})],1):e._e()]):r("div",{staticClass:"container"},[r("p",[e._v("Ничего не найдено")])])])}),[],!1,null,null,null);t.default=_.exports}}]);