(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{hQDq:function(e,t,n){},hyan:function(e,t,n){"use strict";n.r(t);n("7cXU");var s=n("i2Ud"),a=n("KQVR"),r=(n("+gqB"),n("Yt4v")),i=n("gd5W"),c=n("uy7R"),o=n("L2JU"),u=n("Q2AE"),l=n("55Sm"),p=n("jDKC"),f=n("rBTT"),m=n("Io6t"),g=n("YPqg"),b=n("MYsF"),d=n("NqPc"),h=n("3eXy"),v=n("QmAe"),O=n("2JJK"),_=n("GyY8"),y=n("nfjx");n("hQDq");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E="".concat(f.NAME,"/").concat(m.c),P={name:"messages",mixins:[y.a],components:{VButton:s.a,VInput:a.a,MessageCard:i.a,MessageModal:c.a,EmptyPlaceholderPanel:r.a},metaInfo:function(){return{title:this.pageTitle}},computed:w(w(w(w({},Object(o.d)([u.g])),Object(o.d)(E,[m.a])),Object(o.d)(l.b,{isMessageOpen:function(e){return e[l.a][O.modalName.profile.MESSAGE]&&e[l.a][O.modalName.profile.MESSAGE].open}})),{},{chats:function(){var e=this,t=this[m.a]||[];return t.map((function(t){return w(w({},t),{},{date:e.formatDate(t.date)})}))},pageTitle:function(){return this.$t("profile.routes.".concat(this.$route.name))},isTablet:function(){return this.$mq.tablet}}),methods:w(w(w({},Object(o.b)(l.b,[p.a])),Object(o.b)(g.c,[b.c])),{},{formatDate:function(e){return e&&Object(v.f)(e).toLocaleDateString(this[u.g],_.f)},onCreateMessage:function(){this[p.a]({name:O.modalName.profile.MESSAGE,open:!0})},onOpenMessage:function(e){var t=e.id;e.isRead||this[b.c](),this.$router.push({name:"MessageDetails",params:{chatId:t}})}}),beforeRouteEnter:function(e,t,n){h.$progress.start(),h.$store.dispatch("".concat(E,"/").concat(d.c)).then((function(){return n((function(e){return h.$progress.finish()}))})).catch((function(e){return n((function(e){return h.$progress.fail()}))}))}},S=n("KHd+"),C=Object(S.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section messages-view"},[n("div",{staticClass:"messages-view__header"},[n("h2",{staticClass:"messages-view__hl"},[e._v("\n            "+e._s(e.pageTitle)+"\n        ")]),e._v(" "),n("v-button",{staticClass:"messages-view__btn",on:{click:e.onCreateMessage}},[e._v("Новое сообщение")])],1),e._v(" "),e.chats&&e.chats.length>0?n("ul",{staticClass:"messages-view__list"},e._l(e.chats,(function(t){return n("message-card",{key:t.id,staticClass:"messages-view__list-item",attrs:{tabindex:"0","message-id":t.id,message:t.message,name:t.name,"last-name":t.lastName,title:t.title,date:t.date,"is-system":t.isSystem,"is-read":t.isRead,"use-header-clamp":!e.isTablet,"use-clamp":""},on:{click:function(n){return n.preventDefault(),e.onOpenMessage(t)}}})})),1):n("empty-placeholder-panel",{staticClass:"messages-view__attention",attrs:{"show-btn":!e.isTablet},on:{"btn-click":e.onCreateMessage},scopedSlots:e._u([{key:"btn",fn:function(){return[e._v("\n            Написать сообщение\n        ")]},proxy:!0}])},[e._v("\n        У Вас пока нет ни одного сообщения.\n        ")]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$isServer||e.isMessageOpen?n("message-modal"):e._e()],1)],1)}),[],!1,null,null,null);t.default=C.exports}}]);